{"version":3,"file":"main.dc230a3eaebc9c72e3fb.bundle.js","mappings":"uSAMA,IAAYA,ECCAC,GDDZ,SAAYD,GACX,6BACA,mCACA,mCACA,2CACA,8CACA,CAND,CAAYA,IAAAA,EAAS,KAQd,MAAME,EAKZ,WAAAC,GACCC,KAAKC,aAAe,IAAKC,OAAOC,cAAiBD,OAAeE,oBAChEJ,KAAKK,aAAe,IAAIC,IACxBN,KAAKO,sBAAwB,IAC9B,CAEA,YAAAC,GACC,MAAMC,EAAW,CAChBT,KAAKU,UAAUd,EAAUe,UAAW,GACpCX,KAAKU,UAAUd,EAAUgB,aAAc,GACvCZ,KAAKU,UAAUd,EAAUiB,aAAc,GACvCb,KAAKU,UAAUd,EAAUkB,iBAAkB,GAC3Cd,KAAKU,UAAUd,EAAUmB,mBAAoB,IAE9C,OAAOC,QAAQC,IAAIR,EACpB,CAEA,SAAAC,CAAUQ,EAAsBC,GAC/B,OAAOC,MAAMD,GACXE,MAAMC,GAAaA,EAASC,gBAC5BF,MAAME,GAAgBvB,KAAKC,aAAauB,gBAAgBD,KACxDF,MAAMI,IACNzB,KAAKK,aAAaqB,IAAIR,EAAWO,EAAY,IAE7CE,OAAOC,GAAUC,QAAQD,MAAM,6BAA6BT,IAAOS,IACtE,CAEA,IAAAE,CAAKZ,GACJ,MAAMa,EAAS/B,KAAKK,aAAa2B,IAAId,GACrC,GAAIa,EAAQ,CACX,MAAME,EAASjC,KAAKC,aAAaiC,qBACjCD,EAAOF,OAASA,EAChBE,EAAOE,QAAQnC,KAAKC,aAAamC,aACjCH,EAAOI,MAAM,EACd,MACCR,QAAQS,KAAK,oBAAoBpB,cAEnC,CAEA,eAAAqB,GACC,OAAOvC,KAAKC,YACb,CAEA,mBAAAuC,GACC,MAAMT,EAAS/B,KAAKK,aAAa2B,IAAIpC,EAAUkB,kBAC3CiB,GACH/B,KAAKyC,sBACLzC,KAAKO,sBAAwBP,KAAKC,aAAaiC,qBAC/ClC,KAAKO,sBAAsBwB,OAASA,EACpC/B,KAAKO,sBAAsBmC,MAAO,EAClC1C,KAAKO,sBAAsB4B,QAAQnC,KAAKC,aAAamC,aACrDpC,KAAKO,sBAAsB8B,MAAM,IAEjCR,QAAQS,KAAK,oCAEf,CAEA,mBAAAG,GACKzC,KAAKO,wBACRP,KAAKO,sBAAsBoC,KAAK,GAChC3C,KAAKO,sBAAsBqC,aAC3B5C,KAAKO,sBAAwB,KAE/B,EElFM,MAAMsC,GACW,EAAAC,UAAY,UACZ,EAAAC,eAAiB,UACjB,EAAAC,YAAc,UACd,EAAAC,WAAa,UACb,EAAAC,WAAa,UACb,EAAAC,WAAa,UACb,EAAAC,WAAa,UACb,EAAAC,iBAAmB,UACnB,EAAAC,WAAa,UACb,EAAAC,cAAgB,UAChB,EAAAC,aAAe,UACf,EAAAC,WAAa,UACb,EAAAC,kBAAoB,UACpB,EAAAC,WAAa,UACb,EAAAC,YAAc,UACd,EAAAC,UAAY,UACZ,EAAAC,UAAY,UACZ,EAAAC,WAAa,UACb,EAAAC,WAAa,UACb,EAAAC,WAAa,UACb,EAAAC,gBAAkB,UAClB,EAAAC,WAAa,UACb,EAAAC,UAAY,UACZ,EAAAC,UAAY,UACZ,EAAAC,UAAY,UACZ,EAAAC,eAAiB,UACjB,EAAAC,UAAY,UACZ,EAAAC,YAAc,UACd,EAAAC,WAAa,UACb,EAAAC,gBAAkB,UAClB,EAAAC,YAAc,UACd,EAAAC,aAAe,UACf,EAAAC,YAAc,UACd,EAAAC,gBAAkB,UAClB,EAAAC,gBAAkB,UAClB,EAAAC,iBAAmB,UACnB,EAAAC,aAAe,UACf,EAAAC,YAAc,UACd,EAAAC,cAAgB,UAChB,EAAAC,mBAAqB,UACrB,EAAAC,YAAc,UACd,EAAAC,gBAAkB,UAClB,EAAAC,cAAgB,UAChB,EAAAC,oBAAsB,UACtB,EAAAC,eAAiB,UACjB,EAAAC,oBAAsB,UACtB,EAAAC,kBAAoB,UACpB,EAAAC,iBAAmB,UACnB,EAAAC,kBAAoB,UACpB,EAAAC,mBAAqB,UACrB,EAAAC,oBAAsB,UACtB,EAAAC,oBAAsB,UACtB,EAAAC,WAAa,UACb,EAAAC,WAAa,UACb,EAAAC,UAAY,UACZ,EAAAC,YAAc,UACd,EAAAC,WAAa,UACb,EAAAC,YAAc,UACd,EAAAC,UAAY,UACZ,EAAAC,MAAQ,UACR,EAAAC,UAAY,UACZ,EAAAC,SAAW,UC5D5B,MAAMC,EAWZ,WAAA7G,CAAY8G,EAAWC,EAAWC,EAAgBC,EAAeC,EAAmBC,EAAmBC,GACtGnH,KAAK6G,EAAIA,EACT7G,KAAK8G,EAAIA,EACT9G,KAAKoH,eAAiBL,EACtB/G,KAAKqH,cAAgBL,EACrBhH,KAAKiH,UAAYA,EACjBjH,KAAKkH,UAAYA,EACjBlH,KAAKsH,YAAcH,EACnBnH,KAAKmH,KAAOA,CACb,CAEA,MAAAI,GACCvH,KAAK6G,GAAK7G,KAAKiH,UACfjH,KAAK8G,GAAK9G,KAAKkH,UACflH,KAAKmH,MAAQ,CACd,CAEA,IAAAK,CAAKC,GACJA,EAAQC,YACRD,EAAQE,IAAI3H,KAAK6G,EAAG7G,KAAK8G,EAAG9G,KAAKoH,gBAAkBpH,KAAKmH,KAAOnH,KAAKsH,aAAc,EAAa,EAAVM,KAAKC,IAAQ,GAClGJ,EAAQK,UAAY9H,KAAKqH,cACzBI,EAAQM,OACRN,EAAQO,WACT,CAEA,QAAAC,CAASC,GACR,OACClI,KAAK6G,GAAKqB,EAAKC,OAASnI,KAAK6G,GAAKqB,EAAKE,QAAUpI,KAAK8G,GAAKoB,EAAKG,MAAQrI,KAAK8G,GAAKoB,EAAKI,SAAWtI,KAAKmH,KAAO,CAEhH,EClCM,MAAMoB,EAsBZ,WAAAxI,CACCyI,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAlBM,KAAAC,aAAuB,EACvB,KAAAlC,OAAiB,EACjB,KAAAmC,oBAA8B,GAC7B,KAAAC,UAA4B,GAC5B,KAAAC,mBAAqB,QAE3BC,OAAO,CAAC,EAAG,GAAK,IAChBC,MAAM,CAACzG,EAAmBqD,WAAYrD,EAAmBuB,UAAWvB,EAAmB0D,cAaxFvG,KAAKuJ,UAAYf,EACjBxI,KAAKwJ,UAAYf,EACjBzI,KAAK0I,MAAQA,EACb1I,KAAK2I,MAAQA,EACb3I,KAAKyJ,UAAY7B,KAAK8B,IAAI1J,KAAK0I,OAAS1I,KAAK2I,MAC7C3I,KAAK2J,UAAY/B,KAAKgC,IAAI5J,KAAK0I,OAAS1I,KAAK2I,MAC7C3I,KAAK6J,QAAU,EACf7J,KAAK4I,WAAaA,EAClB5I,KAAK6I,YAAcA,EACnB7I,KAAK8I,aAAeA,EACpB9I,KAAK+I,YAAcA,EACnB/I,KAAKgJ,aAAeA,CACrB,CAEA,cAAAc,CAAeC,GACV/J,KAAKiJ,cAGTjJ,KAAKuJ,WAAavJ,KAAKyJ,UACvBzJ,KAAKwJ,WAAaxJ,KAAK2J,WAEnB3J,KAAKuJ,WAAa,GAAKvJ,KAAKuJ,UAAYvJ,KAAK6I,eAChD7I,KAAKyJ,WAAazJ,KAAKyJ,UACvBzJ,KAAK6J,YAGF7J,KAAKwJ,WAAa,GAAKxJ,KAAKwJ,UAAYxJ,KAAK8I,gBAChD9I,KAAK2J,WAAa3J,KAAK2J,UACvB3J,KAAK6J,WAGNE,EAAeC,UAAUC,SAASC,IACjC,GACClK,KAAKuJ,UAAYW,EAAS/B,OAC1BnI,KAAKuJ,UAAYW,EAAS9B,QAC1BpI,KAAKwJ,UAAYU,EAAS7B,MAC1BrI,KAAKwJ,UAAYU,EAAS5B,QACzB,CACDtI,KAAK6J,UACL,MAAMM,EAAWvC,KAAKwC,IAAIpK,KAAKuJ,UAAYW,EAAS/B,OAC9CkC,EAAYzC,KAAKwC,IAAIpK,KAAKuJ,UAAYW,EAAS9B,QAC/CkC,EAAU1C,KAAKwC,IAAIpK,KAAKwJ,UAAYU,EAAS7B,MAC7CkC,EAAa3C,KAAKwC,IAAIpK,KAAKwJ,UAAYU,EAAS5B,SAChDkC,EAAc5C,KAAK6C,IAAIN,EAAUE,EAAWC,EAASC,GAEvDC,IAAgBF,GACnBtK,KAAKwJ,UAAYU,EAAS7B,KAAO,EACjCrI,KAAK2J,WAAa3J,KAAK2J,WACba,IAAgBD,GAC1BvK,KAAKwJ,UAAYU,EAAS5B,QAAU,EACpCtI,KAAK2J,WAAa3J,KAAK2J,WACba,IAAgBL,GAC1BnK,KAAKuJ,UAAYW,EAAS/B,MAAQ,EAClCnI,KAAKyJ,WAAazJ,KAAKyJ,WACbe,IAAgBH,IAC1BrK,KAAKuJ,UAAYW,EAAS9B,OAAS,EACnCpI,KAAKyJ,WAAazJ,KAAKyJ,UAEzB,KAGGzJ,KAAK6J,QAAU7J,KAAK4I,YACvB5I,KAAK0K,UAEP,CAEO,OAAAA,GACF1K,KAAK+I,aAAe/I,KAAKiJ,cAG7BjJ,KAAK2K,kBACL3K,KAAKgJ,aAAalH,KAAKlC,EAAUmB,oBACjCf,KAAKiJ,aAAc,EACnB2B,YAAW,KACV5K,KAAKiJ,aAAc,EACnBjJ,KAAK+I,aAAc,CAAI,GACrB,KACJ,CAEA,aAAA8B,CAAcC,GACbA,EAAWb,SAASc,IACfA,EAAUhC,aAIb/I,KAAKuJ,UAAYwB,EAAU5C,OAC3BnI,KAAKuJ,UAAYwB,EAAU3C,QAC3BpI,KAAKwJ,UAAYuB,EAAU1C,MAC3BrI,KAAKwJ,UAAYuB,EAAUzC,UAE3BtI,KAAK0K,UACLK,EAAUL,UACV1K,KAAKgJ,aAAalH,KAAKlC,EAAUgB,cACjCiB,QAAQmJ,IAAI,gBACb,GAEF,CAEA,cAAAC,CAAeC,GACVA,EAAWnC,aAId/I,KAAKuJ,UAAY2B,EAAW/C,OAC5BnI,KAAKuJ,UAAY2B,EAAW9C,QAC5BpI,KAAKwJ,UAAY0B,EAAW7C,MAC5BrI,KAAKwJ,UAAY0B,EAAW5C,UAE5B4C,EAAWR,UACX1K,KAAK0K,UACL7I,QAAQmJ,IAAI,iBAEd,CAEA,wBAAAG,CAAyBC,GACxB,IAAK,MAAMC,KAAcD,EACxB,GAAIC,IAAerL,OAASqL,EAAWtC,YAAa,CACnD,MAAMuC,EAAKtL,KAAKuJ,UAAY8B,EAAW9B,UACjCgC,EAAKvL,KAAKwJ,UAAY6B,EAAW7B,UACtB5B,KAAK4D,KAAKF,EAAKA,EAAKC,EAAKA,GAC3BvL,KAAK+G,OAASsE,EAAWtE,SACvC/G,KAAK0K,UACLW,EAAWX,UAEb,CAEF,CAEA,kBAAAe,CAAmBC,GAClB,IAAK,MAAMC,KAAQD,EAClB,IAAKC,EAAK5C,cAAgB4C,EAAK1C,cAAe,CAC7C,MAAMqC,EAAKtL,KAAKuJ,UAAYoC,EAAKpC,UAC3BgC,EAAKvL,KAAKwJ,UAAYmC,EAAKnC,UAChB5B,KAAK4D,KAAKF,EAAKA,EAAKC,EAAKA,GAC3BvL,KAAK+G,OAAS4E,EAAK5E,SACjC/G,KAAK0K,UACLiB,EAAKjB,UAEP,CAEF,CAEA,MAAAkB,CACCpD,EACAC,EACAC,EACAK,EACAF,EACAC,GAEA9I,KAAKuJ,UAAYf,EACjBxI,KAAKwJ,UAAYf,EACjBzI,KAAK0I,MAAQA,EACb1I,KAAK+I,YAAcA,EACnB/I,KAAKyJ,UAAY7B,KAAK8B,IAAI1J,KAAK0I,OAAS1I,KAAK2I,MAC7C3I,KAAK2J,UAAY/B,KAAKgC,IAAI5J,KAAK0I,OAAS1I,KAAK2I,MAC7C3I,KAAK6I,YAAcA,EACnB7I,KAAK8I,aAAeA,EACpB9I,KAAK6J,QAAU,CAChB,CAEA,IAAArC,CAAKC,GACAzH,KAAKiJ,YACRjJ,KAAK6L,gBAAgBpE,IAItBA,EAAQC,YACRD,EAAQE,IAAI3H,KAAKuJ,UAAWvJ,KAAKwJ,UAAWxJ,KAAK+G,OAAQ,EAAG,EAAIa,KAAKC,IACrEJ,EAAQK,UAAY,QACpBL,EAAQM,OACRN,EAAQqE,UAAY,EACpBrE,EAAQsE,YAAc,QACtBtE,EAAQuE,SACRvE,EAAQO,YACT,CAEQ,eAAA6D,CAAgBpE,GACvBzH,KAAKmJ,UAAUc,SAASgC,IACvBA,EAAS1E,SACT0E,EAASzE,KAAKC,EAAQ,IAGvBzH,KAAKmJ,UAAYnJ,KAAKmJ,UAAU+C,QAAQD,GAAaA,EAAS9E,KAAO,GACtE,CAEQ,eAAAwD,GAEP,IAAK,IAAIwB,EAAI,EAAGA,EADM,GACaA,IAAK,CACvC,MAAMC,EAAwB,EAAhBxE,KAAKyE,SAAezE,KAAKC,GACjCc,EAAwB,EAAhBf,KAAKyE,SAAe,EAC5BpF,EAAYW,KAAK8B,IAAI0C,GAASzD,EAC9BzB,EAAYU,KAAKgC,IAAIwC,GAASzD,EAC9B2D,EAAW,IAAI1F,EACpB5G,KAAKuJ,UACLvJ,KAAKwJ,UACW,EAAhB5B,KAAKyE,SAAe,EACpBrM,KAAKoJ,mBAAmBxB,KAAKyE,UAC7BpF,EACAC,EACAlH,KAAKkJ,qBAENlJ,KAAKmJ,UAAUoD,KAAKD,EACrB,CACD,CAEA,iBAAAE,CAAkBzC,EAAgCmB,GACjD,IAAIuB,EAA6BzM,KAAKuJ,UAClCmD,EAA6B1M,KAAKwJ,UAClCmD,EAA6B3M,KAAKyJ,UAClCmD,EAA6B5M,KAAK2J,UAClCkD,EAAmB,EACvB,KAAOA,GAAoB7M,KAAK4I,YAuB/B,GAtBA6D,GAAsBE,EACtBD,GAAsBE,GAClBH,GAAsB,GAAKA,EAAqBzM,KAAK6I,eACxD8D,GAAsBA,EACtBE,MAEGH,GAAsB,GAAKA,EAAqB1M,KAAK8I,gBACxD8D,GAAsBA,EACtBC,KAED9C,EAAeC,UAAUC,SAASC,IAEhCuC,EAAqBvC,EAAS/B,OAC9BsE,EAAqBvC,EAAS9B,QAC9BsE,EAAqBxC,EAAS7B,MAC9BqE,EAAqBxC,EAAS5B,UAE9BuE,IACAF,GAAsBA,EACtBC,GAAsBA,EACvB,IAGAH,EAAqBvB,EAAW/C,OAChCsE,EAAqBvB,EAAW9C,QAChCsE,EAAqBxB,EAAW7C,MAChCqE,EAAqBxB,EAAW5C,QAEhC,OAAO,EAGT,OAAO,CACR,EAGM,MAAMwE,UAAyBvE,EACrC,WAAAxI,CACCyI,EACAC,EACAC,EACAG,EACAC,EACAC,EACAC,GAIA+D,MACCvE,EACAC,EACAC,EAJ6B,EADK,EAQlCG,EACAC,EACAC,EACAC,EAEF,EAGM,MAAMgE,UAA0BzE,EACtC,WAAAxI,CACCyI,EACAC,EACAC,EACAG,EACAC,EACAC,EACAC,GAIA+D,MACCvE,EACAC,EACAC,EAJ8B,EADK,EAQnCG,EACAC,EACAC,EACAC,EAEF,EAGM,MAAMiE,UAA0B1E,EACtC,WAAAxI,CACCyI,EACAC,EACAC,EACAG,EACAC,EACAC,EACAC,GAIA+D,MACCvE,EACAC,EACAC,EAJ8B,EADK,EAQnCG,EACAC,EACAC,EACAC,EAEF,ECvWM,MAAMkE,EAeZ,WAAAnN,CAAYyI,EAAgBC,EAAgBnB,EAAqByB,EAAsBC,GANhF,KAAAjC,OAAiB,GAEd,KAAAoC,UAA4B,GAC9B,KAAAC,mBAAqB,QAAyBC,OAAO,CAAC,EAAG,GAAK,IAAIC,MAAM,CAAC,MAAO,SAAU,WAC1F,KAAA6D,cAA+B,KAGtCnN,KAAKuJ,UAAYf,EACjBxI,KAAKwJ,UAAYf,EACjBzI,KAAKsH,YAAcA,EACnBtH,KAAK+I,YAAcA,EACnB/I,KAAKgJ,aAAeA,EACpBhJ,KAAKoN,aAAe,IACpBpN,KAAKqN,cAAgB,EACrBrN,KAAKsN,gBAAiB,CACvB,CAEO,OAAA5C,GACF1K,KAAK+I,aAAe/I,KAAKiJ,gBAG7BjJ,KAAK+I,aAAc,EACnB/I,KAAK2K,kBACL3K,KAAKgJ,aAAalH,KAAKlC,EAAUiB,cACN,OAAvBb,KAAKmN,gBACRI,aAAavN,KAAKmN,eAClBnN,KAAKmN,cAAgB,MAEvB,CAEO,aAAAtC,CAAcC,GACpBA,EAAWb,SAASc,IACnB,IAAIA,EAAUhC,YAGd,IAAK,MAAMuD,KAAYtM,KAAKmJ,UAC3B,GAAImD,EAASrE,SAAS8C,GAAY,CACjCA,EAAUL,UACV,KACD,CACD,GAEF,CAEO,cAAAO,CAAeC,GACrB,IAAIA,EAAWnC,YAGf,IAAK,MAAMuD,KAAYtM,KAAKmJ,UAC3B,GAAImD,EAASrE,SAASiD,GAAa,CAClCA,EAAWR,UACX,KACD,CAEF,CAEO,OAAA8C,GACNxN,KAAKmJ,UAAY,GACjBnJ,KAAK+I,aAAc,EACnB/I,KAAKqN,cAAgBI,YAAYC,MACjC1N,KAAK2N,cACL3N,KAAKmN,cAAgBjN,OAAO0K,YAAW,KACtC5K,KAAK0K,SAAS,GACZ1K,KAAKoN,aACT,CAEO,uBAAAQ,CAAwB1F,GAC9B,MAAM2F,EAAwB3F,EAAKqB,UAAYrB,EAAK4F,aAC9CC,EAAwB7F,EAAKsB,UAAYtB,EAAK4F,aAC9CE,EAAwBhO,KAAKuJ,UAC7B0E,EAAwBjO,KAAKwJ,UAC7B0E,EAAyBhG,EAAK4F,aAS9BxC,EARmB1D,KAAKuG,IAC7BN,EAAgBK,EAChBtG,KAAK6C,IAAIuD,EAAeH,EAAgBK,IAMXF,EACxBzC,EALmB3D,KAAKuG,IAC7BJ,EAAgBG,EAChBtG,KAAK6C,IAAIwD,EAAeF,EAAgBG,IAGXD,EAE9B,OADyBrG,KAAK4D,KAAKF,EAAKA,EAAKC,EAAKA,IAC/BvL,KAAKsH,WACzB,CAEO,WAAA2B,GAEN,OAD6BjJ,KAAKmJ,UAAUiF,MAAM9B,GAAaA,EAASnF,KAAO,GAEhF,CAEU,eAAA0E,CAAgBpE,GACzBzH,KAAKmJ,UAAUc,SAASgC,IACvBA,EAAS1E,SACT0E,EAASzE,KAAKC,EAAQ,IAGvBzH,KAAKmJ,UAAYnJ,KAAKmJ,UAAU+C,QAAQD,GAAaA,EAAS9E,KAAO,GACtE,CAEO,IAAAK,CAAKC,GACkBzH,KAAKiJ,cAEjCjJ,KAAK6L,gBAAgBpE,IAItBA,EAAQC,YACRD,EAAQE,IAAI3H,KAAKuJ,UAAWvJ,KAAKwJ,UAAWxJ,KAAK+G,OAAQ,EAAG,EAAIa,KAAKC,IACrEJ,EAAQK,UAAY9H,KAAKsN,eAAiB,MAAQ,SAClD7F,EAAQM,OACRN,EAAQqE,UAAY,EACpBrE,EAAQsE,YAAc,QACtBtE,EAAQuE,SACRvE,EAAQO,YAERP,EAAQC,YACRD,EAAQE,IAAI3H,KAAKuJ,UAAWvJ,KAAKwJ,UAAW,GAAI,EAAG,EAAI5B,KAAKC,IAC5DJ,EAAQqE,UAAY,IACpBrE,EAAQsE,YAAc,QACtBtE,EAAQuE,SACRvE,EAAQO,YACT,CAEQ,WAAA2F,GACP,GAAI3N,KAAK+I,YACR,OAED,MACMsF,GADcZ,YAAYC,MAAQ1N,KAAKqN,eACPrN,KAAKoN,aAE3CpN,KAAKsN,eADmB,CAAC,IAAM,GAAK,KAAO,IAAM,MAAQ,KAAO,OAAS,MAAQ,OAAS,SACpDc,MACpCE,GAAcD,EAAkBC,GAAaD,EAAkBC,EAAY,MAE7EC,uBAAsB,IAAMvO,KAAK2N,eAClC,CAEQ,eAAAhD,GAEP,IAAK,IAAIwB,EAAI,EAAGA,EADM,GACaA,IAAK,CACvC,MAAMC,EAAwB,EAAhBxE,KAAKyE,SAAezE,KAAKC,GACjCc,EAAwB,EAAhBf,KAAKyE,SAAe,EAC5BpF,EAAYW,KAAK8B,IAAI0C,GAASzD,EAC9BzB,EAAYU,KAAKgC,IAAIwC,GAASzD,EAC9B2D,EAAW,IAAI1F,EACpB5G,KAAKuJ,UACLvJ,KAAKwJ,UACW,EAAhB5B,KAAKyE,SAAe,EACpBrM,KAAKoJ,mBAAmBxB,KAAKyE,UAC7BpF,EACAC,EACAlH,KAAKsH,aAENtH,KAAKmJ,UAAUoD,KAAKD,EACrB,CACD,EAGM,MAAMkC,UAAmBtB,EAC/B,WAAAnN,CAAYyI,EAAgBC,EAAgBM,EAAsBC,GAEjE+D,MAAMvE,EAAQC,EADgB,GACeM,EAAaC,EAC3D,EAGM,MAAMyF,UAAkBvB,EAC9B,WAAAnN,CAAYyI,EAAgBC,EAAgBM,EAAsBC,GAEjE+D,MAAMvE,EAAQC,EADe,GACeM,EAAaC,EAC1D,EAUM,MAAM0F,UAAiBxB,EAC7B,WAAAnN,CAAYyI,EAAgBC,EAAgBM,EAAsBC,GAEjE+D,MAAMvE,EAAQC,EADc,GACeM,EAAaC,EACzD,CAES,IAAAxB,CAAKC,GACOzH,KAAKmJ,UAAUiF,MAAM9B,GACjCA,EAASnF,KAAO,IAGvBnH,KAAK6L,gBAAgBpE,IAItBA,EAAQkH,OACRlH,EAAQmH,UAAU5O,KAAKuJ,UAAWvJ,KAAKwJ,WACvC/B,EAAQoH,MAAM,EAAG,KACjBpH,EAAQC,YACRD,EAAQqH,OAAO,EAAG,GAClBrH,EAAQsH,cAAc,IAAK,GAAI,GAAI,EAAG,EAAG,IACzCtH,EAAQsH,eAAe,GAAI,GAAI,IAAK,GAAI,EAAG,GAC3CtH,EAAQK,UAAY9H,KAAKsN,eAAiB,MAAQ,UAClD7F,EAAQM,OACRN,EAAQqE,UAAY,EACpBrE,EAAQsE,YAAc,QACtBtE,EAAQuE,SACRvE,EAAQO,YACRP,EAAQuH,UACT,EC1NM,MAAMC,EAMZ,WAAAlP,CAAmBmP,GAAA,KAAAA,OAAAA,EALZ,KAAAC,WAAY,EACZ,KAAAC,UAAW,EAKjB,MAAM3H,EAAUzH,KAAKkP,OAAOG,WAAW,MACvC,IAAK5H,EACJ,MAAM,IAAI6H,MAAM,yDAEjBtP,KAAKyH,QAAUA,CAChB,CAEO,gBAAA8H,CAAiBC,EAAeC,GACtCzP,KAAKkP,OAAOM,MAAQA,EACpBxP,KAAKkP,OAAOO,OAASA,CACtB,CAEA,qBAAAC,GACC,IAAK1P,KAAKyH,QACT,MAAM,IAAI6H,MAAM,yDAGjB,MAAMK,EAAU3P,KAAKmP,UAAY,MAAQnP,KAAKoP,SAAW,OAAS,GAClE,GAAgB,KAAZO,EACH,OAID3P,KAAKyH,QAAQmI,KAAO,cACpB5P,KAAKyH,QAAQqE,UAAY,EACzB9L,KAAKyH,QAAQsE,YAAc/L,KAAKmP,UAAY,QAAU,MACtDnP,KAAKyH,QAAQK,UAAY9H,KAAKmP,UAAY,QAAU,MAEpD,MAAMU,EAAY7P,KAAKyH,QAAQqI,YAAYH,GAASH,MAC9C3I,GAAK7G,KAAKkP,OAAOM,MAAQK,GAAa,EACtC/I,EAAI9G,KAAKkP,OAAOO,OAAS,EAAIM,GAEnC/P,KAAKyH,QAAQuI,UAAU,EAAG,EAAGhQ,KAAKkP,OAAOM,MAAOxP,KAAKkP,OAAOO,QAC5DzP,KAAKyH,QAAQwI,WAAWN,EAAS9I,EAAGC,GACpC9G,KAAKyH,QAAQyI,SAASP,EAAS9I,EAAGC,EACnC,CAEA,MAAAqJ,CAAOC,EAAkBlF,EAAkBJ,GAC1C,IAAK9K,KAAKyH,QACT,MAAM,IAAI6H,MAAM,yDAEjBtP,KAAKyH,QAAQuI,UAAU,EAAG,EAAGhQ,KAAKkP,OAAOM,MAAOxP,KAAKkP,OAAOO,QAExDvE,EAAWnC,YACd/I,KAAKoP,UAAW,EACNtE,EAAWuF,OAAOnI,GAASA,EAAKa,gBAC1C/I,KAAKmP,WAAY,IAEdnP,KAAKoP,UAAYpP,KAAKmP,YACzBnP,KAAK0P,wBAEN,MAAMY,EAA8B,IAChCxF,EAAWyF,SAASxF,GAAcA,EAAUM,gBAC5CH,EAAWG,YAETmF,EAAmB,IAAI1F,EAAWyF,SAASxF,GAAcA,EAAUW,WAAWR,EAAWQ,OAC/FR,EAAWpB,eAAeoB,EAAYA,EAAYJ,EAAYwF,EAAeE,GAC7EtF,EAAWuF,IAAIvF,EAAWwF,QAASxF,EAAWyF,QAASzF,GAEvDJ,EAAWb,SAASc,IACdA,EAAUhC,cACdgC,EAAUjB,eAAeiB,EAAWG,EAAYJ,EAAYwF,EAAeE,GAC3EzF,EAAU0F,IAAI1F,EAAU2F,QAAS3F,EAAU4F,QAASzF,GACpDH,EAAU6F,MAAM1F,GAChBH,EAAU8F,UAAU3F,GACrB,IAEDJ,EAAWb,SAASc,IACnBA,EAAUvD,KAAKxH,KAAKyH,SACpBsD,EAAUM,WAAWpB,SAASoB,IACzBA,EAAWtC,cAGfsC,EAAWF,yBAAyBmF,GACpCjF,EAAWI,mBAAmB,IAAIP,EAAWQ,QAC7CL,EAAWvB,eAAeiB,EAAUhB,gBACpCsB,EAAWJ,eAAeC,GAC1BG,EAAW7D,KAAKxH,KAAKyH,SAAoC,IAE1DsD,EAAUW,MAAMzB,SAAS0B,IACpBA,EAAK5C,cAAgB4C,EAAK1C,gBAG9B0C,EAAKV,eAAeC,GACpBS,EAAKnE,KAAKxH,KAAKyH,SAAoC,GAClD,IAGHyD,EAAW1D,KAAKxH,KAAKyH,SAChByD,EAAWnC,aACfmC,EAAW4F,SAAStJ,KACnBxH,KAAKyH,QACLyD,EAAW3B,UACX2B,EAAW1B,UACX0B,EAAWwF,QACXxF,EAAWyF,SAGbzF,EAAWG,WAAWpB,SAASoB,IAC1BA,EAAWtC,cAGfsC,EAAWF,yBAAyBmF,GACpCjF,EAAWI,mBAAmB+E,GAC9BnF,EAAWvB,eAAeoB,EAAWnB,gBACrCsB,EAAWR,cAAcC,GACzBO,EAAWJ,eAAeC,GAC1BG,EAAW7D,KAAKxH,KAAKyH,SAAoC,IAE1DyD,EAAWQ,MAAMzB,SAAS0B,IACrBA,EAAK5C,cAAgB4C,EAAK1C,gBAG9B0C,EAAKd,cAAcC,GACnBa,EAAKV,eAAeC,GACpBS,EAAKnE,KAAKxH,KAAKyH,SAAoC,GAErD,EC5HM,MAAMsJ,EAUZ,WAAAhR,CAAYiR,EAAwBxB,EAAeC,EAAgB1F,GAR3D,KAAAmB,WAA0B,KAC1B,KAAAJ,WAAqB,GAKtB,KAAAmG,iBAAkC,KAGxCjR,KAAKwP,MAAQA,EACbxP,KAAKyP,OAASA,EACdzP,KAAK+J,eAAiBA,EACtB/J,KAAKiR,iBAAmB,KACxBjR,KAAKkR,aAAe,IAAIjC,EAAakC,SAASC,cAAcJ,IAC5DhR,KAAKkR,aAAa3B,iBAAiBvP,KAAKwP,MAAOxP,KAAKyP,QACpDzP,KAAKqR,eAAiB,EACtBnR,OAAOoR,iBAAiB,SAAUtR,KAAKuR,aAAaC,KAAKxR,MAC1D,CAEO,KAAAqC,GACDrC,KAAKiR,mBACTjR,KAAKiR,iBAAmB1C,sBAAsBvO,KAAKyR,SAASD,KAAKxR,OAEnE,CAEO,IAAA2C,GACF3C,KAAKiR,mBACRS,qBAAqB1R,KAAKiR,kBAC1BjR,KAAKiR,iBAAmB,KAE1B,CAEQ,YAAAM,GAAsB,CAEtB,QAAAE,CAASE,GAChB,GAAuB,MAAnB3R,KAAKkL,WAAoB,CAC5B,MAAMkF,EAAWuB,EAAY3R,KAAKqR,eAClCrR,KAAKkR,aAAaf,OAAOC,EAAUpQ,KAAKkL,WAAYlL,KAAK8K,YACzD9K,KAAKqR,eAAiBM,EACtB3R,KAAKiR,iBAAmB1C,sBAAsBvO,KAAKyR,SAASD,KAAKxR,MAClE,CACD,CAEO,YAAA4R,CAAa1J,GACnBlI,KAAK8K,WAAWyB,KAAKrE,EACtB,CAEO,aAAA2J,CAAc3J,GACpBlI,KAAKkL,WAAahD,CACnB,ECvDM,MAAM4J,EAQZ,WAAA/R,CAAYyI,EAAgBC,EAAgB+G,EAAeC,GAC1DzP,KAAKmI,MAAQK,EACbxI,KAAKqI,KAAOI,EACZzI,KAAKwP,MAAQA,EACbxP,KAAKyP,OAASA,EACdzP,KAAKsI,QAAUtI,KAAKqI,KAAOrI,KAAKyP,OAChCzP,KAAKoI,OAASpI,KAAKmI,MAAQnI,KAAKwP,KACjC,CAEA,IAAAhI,CAAKC,GACJA,EAAQC,YACRD,EAAQsK,KAAK/R,KAAKmI,MAAOnI,KAAKqI,KAAMrI,KAAKwP,MAAOxP,KAAKyP,QACrDhI,EAAQK,UAAY,UACpBL,EAAQM,MACT,ECpBM,MAAMiK,EAMZ,WAAAjS,CAAYkS,EAAgCzC,EAAeC,EAAgBzF,GAJpE,KAAAA,UAAwB,GAK9BhK,KAAKwP,MAAQA,EACbxP,KAAKyP,OAASA,EACdzP,KAAKgK,UAAYA,EACjB9J,OAAOoR,iBAAiB,SAAUtR,KAAKuR,aAAaC,KAAKxR,OACzDA,KAAK+J,eAAiBoH,SAASC,cAAca,GAC7CjS,KAAK+J,eAAeyF,MAAQA,EAC5BxP,KAAK+J,eAAe0F,OAASA,EAC7BzF,EAAUC,SAASC,IAClBA,EAAS1C,KAAKxH,KAAK+J,eAAesF,WAAW,MAAkC,GAEjF,CAEO,cAAA6C,GACN,MAAMzK,EAAUzH,KAAK+J,eAAesF,WAAW,MAC3C5H,GACHA,EAAQuI,UAAU,EAAG,EAAGhQ,KAAK+J,eAAeyF,MAAOxP,KAAK+J,eAAe0F,QAExEzP,KAAKgK,UAAY,EAClB,CAEQ,YAAAuH,GAAsB,ECzBxB,MAAeY,GCGf,MAAMC,UAAuBD,EAOnC,WAAApS,CAAYsS,GACXtF,QAPM,KAAAuF,iBAAmB,GACnB,KAAAC,yBAA2B,GAE1B,KAAAC,YAA2B,KAC3B,KAAAC,KAAsB,GAI7BzS,KAAKqS,eAAiBA,CACvB,CAEO,IAAA7K,CAAKC,GACXzH,KAAKqS,eAAe7K,KAAKC,EAC1B,CAEO,cAAAqC,CACN4I,EACAxH,EACAJ,EACAO,EACAK,GAGA,GADA1L,KAAKuS,0BAA4B,EAChB,MAAbvS,KAAKyS,MAAoC,GAApBzS,KAAKyS,KAAKE,QAAgD,GAAjC3S,KAAKuS,yBAA+B,CACrFvS,KAAKqS,eAAeO,QACpB,MAAMC,EAAkB7S,KAAKqS,eAAeS,gBAAgBJ,GACtDK,EAAmB/S,KAAKqS,eAAeS,gBAAgB5H,GACvD8H,EAAwBhT,KAAKqS,eAAeY,8BACjDF,EACA/S,KAAKsS,kBAENtS,KAAKyS,KAAOzS,KAAKqS,eAAea,MAAML,EAAWG,GACjDhT,KAAKuS,yBAA2B,GACf,MAAbvS,KAAKyS,MACR5Q,QAAQmJ,IAAI,eAEd,KAAO,CACNhL,KAAKwS,YAAcxS,KAAKqS,eAAeS,gBAAgBJ,GACvD,MAAMpH,EAAKtL,KAAKyS,KAAK,GAAG5L,EAAI7G,KAAKwS,YAAY3L,EACvC0E,EAAKvL,KAAKyS,KAAK,GAAG3L,EAAI9G,KAAKwS,YAAY1L,EAE7C,GAAI4L,EAAYS,oBAAsBT,EAAYU,0BAA4B,EAAG,CAChF,MAAMC,EAA6BX,EAAYY,qBAC/CZ,EAAYa,wBAAwBF,GACpCX,EAAYU,0BAA4B,EACxC,MAAMI,EAAuB5L,KAAKyE,SACvB,IAAPf,GAAmB,IAAPC,EACXiI,EAAe,GAClBd,EAAYe,gBAEZf,EAAYgB,iBAEK,IAARpI,GAAoB,IAAPC,EACnBiI,EAAe,GAClBd,EAAYiB,gBAEZjB,EAAYkB,gBAEI,IAAPtI,GAAmB,IAAPC,EAClBiI,EAAe,GAClBd,EAAYe,gBAEZf,EAAYkB,gBAEI,IAAPtI,IAAoB,IAARC,EAClBiI,EAAe,GAClBd,EAAYiB,gBAEZjB,EAAYgB,gBAEI,IAAPpI,GAAmB,IAAPC,EAClBiI,EAAe,GAClBd,EAAYmB,YAEZnB,EAAYoB,WAEI,IAAPxI,IAAoB,IAARC,EAClBiI,EAAe,GAClBd,EAAYqB,YAEZrB,EAAYoB,YAEK,IAARxI,GAAoB,IAAPC,EACnBiI,EAAe,GAClBd,EAAYmB,YAEZnB,EAAYsB,YAEK,IAAR1I,IAAqB,IAARC,IACnBiI,EAAe,GAClBd,EAAYqB,YAEZrB,EAAYsB,WAGf,MACY,IAAP1I,GAAmB,IAAPC,EACfmH,EAAYoB,YACM,IAARxI,GAAoB,IAAPC,EACvBmH,EAAYsB,WACK,IAAP1I,GAAmB,IAAPC,EACtBmH,EAAYmB,YACK,IAAPvI,IAAoB,IAARC,EACtBmH,EAAYqB,YACK,IAAPzI,GAAmB,IAAPC,EACtBmH,EAAYe,gBACK,IAAPnI,IAAoB,IAARC,EACtBmH,EAAYgB,iBACM,IAARpI,GAAoB,IAAPC,EACvBmH,EAAYkB,iBACM,IAARtI,IAAqB,IAARC,GACvBmH,EAAYiB,gBAIV3T,KAAKyS,KAAK,GAAG5L,GAAK7G,KAAKwS,YAAY3L,GAAK7G,KAAKyS,KAAK,GAAG3L,GAAK9G,KAAKwS,YAAY1L,GAC9E9G,KAAKyS,KAAKwB,OAAO,EAAG,EAEtB,CAEAvB,EAAYvK,MAAQuK,EAAYnJ,UAChCmJ,EAAYtK,OAASsK,EAAYnJ,UAAYmJ,EAAYwB,KACzDxB,EAAYrK,KAAOqK,EAAYlJ,UAC/BkJ,EAAYpK,QAAUoK,EAAYlJ,UAAYkJ,EAAYwB,IAC3D,ECpIM,MAAMC,EASZ,WAAApU,CAAY8G,EAAWC,GANhB,KAAAsN,EAAI,EACJ,KAAAC,EAAI,EACJ,KAAAC,EAAI,EACJ,KAAAC,UAAW,EACX,KAAAC,OAAsB,KAG5BxU,KAAK6G,EAAIA,EACT7G,KAAK8G,EAAIA,CACV,ECPM,MAAM2N,EASZ,WAAA1U,CACC2U,EACA3K,EACA4K,GAAsB,EACtB3N,EAAgB,QAGhB,GAfM,KAAA4N,KAAiB,GACjB,KAAAC,cAAgB,GAGhB,KAAApC,KAAe,GAUrBzS,KAAKgH,MAAQA,GACR0N,IAAe3K,GAAkB4K,EAIrC,OAHA3U,KAAK8U,YAAc,EACnB9U,KAAK+U,YAAc,OACnB/U,KAAK2U,YAAa,GAGnB3U,KAAK2U,YAAa,EAClB3U,KAAK8U,YAAclN,KAAKoN,MAAMN,EAAWlF,MAAQxP,KAAK6U,eACtD7U,KAAK+U,YAAcnN,KAAKoN,MAAMN,EAAWjF,OAASzP,KAAK6U,eACvD,IAAK,IAAIhO,EAAI,EAAGA,EAAI7G,KAAK8U,YAAajO,IAAK,CAC1C7G,KAAK4U,KAAK/N,GAAK,GACf,IAAK,IAAIC,EAAI,EAAGA,EAAI9G,KAAK+U,YAAajO,IAAK,CAC1C9G,KAAK4U,KAAK/N,GAAGC,GAAK,IAAIqN,EAAKtN,EAAGC,GAC9B,MAAMmO,EAAYpO,EAAI7G,KAAK6U,cACrBK,EAAaD,EAAYjV,KAAK6U,cAC9BM,EAAWrO,EAAI9G,KAAK6U,cACpBO,EAAcD,EAAWnV,KAAK6U,cACpC7U,KAAK4U,KAAK/N,GAAGC,GAAGyN,UAAYxK,EAAeC,UAAUoE,MACnDiH,GAAQH,EAAaG,EAAIlN,OAAS8M,EAAYI,EAAIjN,QAAUgN,EAAcC,EAAIhN,MAAQ8M,EAAWE,EAAI/M,SAExG,CACD,CACD,CAEO,IAAAd,CAAKC,G,MACXA,EAAQqE,UAAY,EACpB,IAAK,IAAIK,EAAI,EAAGA,GAAKnM,KAAK+U,YAAa5I,IACtC1E,EAAQK,UAAY,OACpBL,EAAQC,YACRD,EAAQqH,OAAO,EAAG3C,EAAInM,KAAK6U,eAC3BpN,EAAQ6N,OAAOtV,KAAK8U,YAAc9U,KAAK6U,cAAe1I,EAAInM,KAAK6U,eAC/DpN,EAAQuE,SAET,IAAK,IAAIuJ,EAAI,EAAGA,GAAKvV,KAAK8U,YAAaS,IACtC9N,EAAQK,UAAY,OACpBL,EAAQC,YACRD,EAAQqH,OAAOyG,EAAIvV,KAAK6U,cAAe,GACvCpN,EAAQ6N,OAAOC,EAAIvV,KAAK6U,cAAe7U,KAAK8U,YAAc9U,KAAK6U,eAC/DpN,EAAQuE,SAETvE,EAAQK,UAAY9H,KAAKgH,MAChB,QAAT,EAAAhH,KAAKyS,YAAI,SAAExI,SAAQ,CAACuL,EAAaC,EAAeC,KAC/CjO,EAAQC,YACRD,EAAQE,IACP6N,EAAM3O,EAAI7G,KAAK6U,cAAgB7U,KAAK6U,cAAgB,EACpDW,EAAM1O,EAAI9G,KAAK6U,cAAgB7U,KAAK6U,cAAgB,EACpD,EACA,EACA,EAAIjN,KAAKC,IAEVJ,EAAQM,MAAM,GAEhB,CAEO,KAAA6K,GACN,IAAK,IAAI/L,EAAI,EAAGA,EAAI7G,KAAK8U,YAAajO,IACrC,IAAK,IAAIC,EAAI,EAAGA,EAAI9G,KAAK+U,YAAajO,IACrC9G,KAAK4U,KAAK/N,GAAGC,GAAGwN,EAAI,EACpBtU,KAAK4U,KAAK/N,GAAGC,GAAGsN,EAAI,EACpBpU,KAAK4U,KAAK/N,GAAGC,GAAGuN,EAAI,EACpBrU,KAAK4U,KAAK/N,GAAGC,GAAG0N,OAAS,IAG5B,CAEA,eAAA1B,CAAgB5K,GACf,IAAIyN,EAA0B/N,KAAKoN,OAAO9M,EAAKqB,UAAYrB,EAAKgM,KAAO,GAAKlU,KAAK6U,eAC7Ee,EAA0BhO,KAAKoN,OAAO9M,EAAKsB,UAAYtB,EAAKgM,KAAO,GAAKlU,KAAK6U,eAGjF,OAFAc,EAAkB/N,KAAKuG,IAAI,EAAGvG,KAAK6C,IAAIkL,EAAiB3V,KAAK8U,YAAc,IAC3Ec,EAAkBhO,KAAKuG,IAAI,EAAGvG,KAAK6C,IAAImL,EAAiB5V,KAAK+U,YAAc,IACpE/U,KAAK4U,KAAKe,GAAiBC,EACnC,CAEA,6BAAA3C,CAA8B4C,EAAc9O,GAC3C,MAAM+O,EAAyB,GAC/B,IAAK,IAAIjP,EAAI,EAAGA,EAAI7G,KAAK8U,YAAajO,IACrC,IAAK,IAAIC,EAAI,EAAGA,EAAI9G,KAAK+U,YAAajO,IAAK,CAC1C,MAAMiP,EAAO/V,KAAK4U,KAAK/N,GAAGC,GACpBkP,EAAWpO,KAAK4D,KAAK5D,KAAKqO,IAAIF,EAAKlP,EAAIgP,EAAOhP,EAAG,GAAKe,KAAKqO,IAAIF,EAAKjP,EAAI+O,EAAO/O,EAAG,IACpFkP,GAAYjP,EAAS,GAAKiP,GAAYjP,EAAS,GAAKgP,EAAKxB,UAC5DuB,EAAevJ,KAAKwJ,EAEtB,CAGD,OAAOD,EADalO,KAAKoN,MAAMpN,KAAKyE,SAAWyJ,EAAenD,QAE/D,CAEA,KAAAO,CAAM7Q,EAAawT,GAClB,MAAMK,EAAkB,CAAC7T,GACnB8T,EAAY,IAAIC,IAEtB,KAAOF,EAAQvD,OAAS,GAAG,CAC1B,IAAI0D,EAAuBH,EAAQI,MAAK,CAACC,EAAGC,IAAMD,EAAEjC,EAAIkC,EAAElC,IAAG,GAE7D,GAAI+B,EAAQxP,IAAMgP,EAAOhP,GAAKwP,EAAQvP,IAAM+O,EAAO/O,EAAG,CACrD,MAAM2L,EAAO,GACb,KAAmB,OAAZ4D,GACN5D,EAAKgE,QAAQJ,GACbA,EAAUA,EAAQ7B,OAEnB,OAAO/B,CACR,CAEAyD,EAAQjC,OAAOiC,EAAQQ,QAAQL,GAAU,GACzCF,EAAUQ,IAAIN,GAEd,MAAMO,EAAY5W,KAAK6W,qBAAqBR,GAE5C,IAAK,MAAMS,KAAYF,EAAW,CACjC,GAAIT,EAAUY,IAAID,GACjB,SAGD,MAAME,EAAaX,EAAQjC,GAAK0C,EAASjQ,EAAIwP,EAAQxP,GAAM,GAAKiQ,EAAShQ,EAAIuP,EAAQvP,GAAM,EAAI,EAAIc,KAAKqP,OACxG,GAAKf,EAAQgB,SAASJ,IAEf,GAAIE,GAAcF,EAAS1C,EACjC,cAFA8B,EAAQ3J,KAAKuK,GAIdA,EAAStC,OAAS6B,EAClBS,EAAS1C,EAAI4C,EACbF,EAASzC,EAAIzM,KAAKuP,MAAMvP,KAAK4D,KAAK5D,KAAKqO,IAAIa,EAASjQ,EAAIgP,EAAOhP,EAAG,GAAKe,KAAKqO,IAAIa,EAAShQ,EAAI+O,EAAO/O,EAAG,KACvGgQ,EAASxC,EAAIwC,EAAS1C,EAAI0C,EAASzC,CACpC,CACD,CACA,OAAO,IACR,CAEA,oBAAAwC,CAAqBd,GAEpB,MAAMa,EAAoB,GAC1B,IAAK,IAAItL,GAAM,EAAGA,GAAM,EAAGA,IAC1B,IAAK,IAAIC,GAAM,EAAGA,GAAM,EAAGA,IAAM,CAChC,GAAW,IAAPD,GAAmB,IAAPC,EACf,SAED,MAAM1E,EAAIkP,EAAKlP,EAAIyE,EACbxE,EAAIiP,EAAKjP,EAAIyE,EACf1E,GAAK,GAAKC,GAAK,GAAKD,EAAI7G,KAAK8U,aAAehO,EAAI9G,KAAK+U,aAAe/U,KAAK4U,KAAK/N,GAAGC,GAAGyN,UACvFqC,EAAUrK,KAAKvM,KAAK4U,KAAK/N,GAAGC,GAE9B,CAED,OAAO8P,CACR,EC/JM,MAAMQ,UAAwBjF,EAOpC,WAAApS,CAAYsX,GACXtK,QAPM,KAAAwF,yBAA2B,IAC3B,KAAAD,iBAAmB,GAElB,KAAAE,YAA2B,KAC3B,KAAAC,KAAsB,GAI7BzS,KAAKsX,iBAAmBD,CACzB,CAEO,IAAA7P,CAAKC,GAEZ,CAEA,cAAAqC,CACC4I,EACAxH,EACAJ,EACAO,EACAK,GAGA,GADA1L,KAAKuS,0BAA4B,EAChB,MAAbvS,KAAKyS,MAAoC,GAApBzS,KAAKyS,KAAKE,QAAgD,GAAjC3S,KAAKuS,yBAA+B,CACrF,MAAMM,EAAkB7S,KAAKsX,iBAAiBxE,gBAAgBJ,GACxDK,EAAmB/S,KAAKsX,iBAAiBxE,gBAAgB5H,GACzD8H,EAAwBhT,KAAKsX,iBAAiBrE,8BACnDF,EACA/S,KAAKsS,kBAENtS,KAAKuS,yBAA2B,IAChCvS,KAAKyS,KAAOzS,KAAKsX,iBAAiBC,SAAS1E,EAAWG,EACvD,KAAO,CACNhT,KAAKwS,YAAcxS,KAAKsX,iBAAiBxE,gBAAgBJ,GACzD,MAAMpH,EAAKtL,KAAKyS,KAAK,GAAG5L,EAAI7G,KAAKwS,YAAY3L,EACvC0E,EAAKvL,KAAKyS,KAAK,GAAG3L,EAAI9G,KAAKwS,YAAY1L,EAEzC9G,KAAKyS,MAAQzS,KAAKyS,KAAKE,OAAS,IACxB,IAAPrH,GAAmB,IAAPC,EACfmH,EAAYoB,YACM,IAARxI,GAAoB,IAAPC,EACvBmH,EAAYsB,WACK,IAAP1I,GAAmB,IAAPC,EACtBmH,EAAYmB,YACK,IAAPvI,IAAoB,IAARC,EACtBmH,EAAYqB,YACK,IAAPzI,GAAmB,IAAPC,EACtBmH,EAAYe,gBACK,IAAPnI,IAAoB,IAARC,EACtBmH,EAAYgB,iBACM,IAARpI,GAAoB,IAAPC,EACvBmH,EAAYkB,iBACM,IAARtI,IAAqB,IAARC,GACvBmH,EAAYiB,iBAIV3T,KAAKyS,KAAK,GAAG5L,GAAK7G,KAAKwS,YAAY3L,GAAK7G,KAAKyS,KAAK,GAAG3L,GAAK9G,KAAKwS,YAAY1L,GAC9E9G,KAAKyS,KAAKwB,OAAO,EAAG,EAEtB,CAEAvB,EAAYvK,MAAQuK,EAAYnJ,UAChCmJ,EAAYtK,OAASsK,EAAYnJ,UAAYmJ,EAAYwB,KACzDxB,EAAYrK,KAAOqK,EAAYlJ,UAC/BkJ,EAAYpK,QAAUoK,EAAYlJ,UAAYkJ,EAAYwB,IAC3D,ECrEM,MAAMsD,EAQZ,WAAAzX,CAAY2U,EAAyB3K,EAAiC4K,GAAsB,GAC3F,GARM,KAAAC,KAAiB,GACjB,KAAAC,cAAgB,GAGhB,KAAApC,KAAe,IAIhBiC,IAAe3K,GAAkB4K,EAIrC,OAHA3U,KAAK8U,YAAc,EACnB9U,KAAK+U,YAAc,OACnB/U,KAAK2U,YAAa,GAGnB3U,KAAK2U,YAAa,EAClB3U,KAAK8U,YAAclN,KAAKoN,MAAMN,EAAWlF,MAAQxP,KAAK6U,eACtD7U,KAAK+U,YAAcnN,KAAKoN,MAAMN,EAAWjF,OAASzP,KAAK6U,eACvD,IAAK,IAAIhO,EAAI,EAAGA,EAAI7G,KAAK8U,YAAajO,IAAK,CAC1C7G,KAAK4U,KAAK/N,GAAK,GACf,IAAK,IAAIC,EAAI,EAAGA,EAAI9G,KAAK+U,YAAajO,IAAK,CAC1C9G,KAAK4U,KAAK/N,GAAGC,GAAK,IAAIqN,EAAKtN,EAAGC,GAC9B,MAAMmO,EAAYpO,EAAI7G,KAAK6U,cACrBK,EAAaD,EAAYjV,KAAK6U,cAC9BM,EAAWrO,EAAI9G,KAAK6U,cACpBO,EAAcD,EAAWnV,KAAK6U,cACpC7U,KAAK4U,KAAK/N,GAAGC,GAAGyN,UAAYxK,EAAeC,UAAUoE,MACnDiH,GAAQH,EAAaG,EAAIlN,OAAS8M,EAAYI,EAAIjN,QAAUgN,EAAcC,EAAIhN,MAAQ8M,EAAWE,EAAI/M,SAExG,CACD,CACD,CAEA,eAAAmP,CAAgBC,EAAkBC,GACjC,GAAID,IAAeC,EAClB,OAAOD,EAGR,MAAME,EAAgB,CACrB,IAAIzD,EAAKuD,EAAW7Q,EAAI,EAAG6Q,EAAW5Q,GACtC,IAAIqN,EAAKuD,EAAW7Q,EAAI,EAAG6Q,EAAW5Q,GACtC,IAAIqN,EAAKuD,EAAW7Q,EAAG6Q,EAAW5Q,EAAI,GACtC,IAAIqN,EAAKuD,EAAW7Q,EAAG6Q,EAAW5Q,EAAI,IAGvC,IAAI+Q,EAAWH,EACXlN,EAAcsN,OAAOC,iBACzB,IAAK,MAAMC,KAAQJ,EAClB,GAAI5X,KAAKiY,eAAeD,IAAShY,KAAKkY,WAAWF,GAAO,CACvD,MAAMhC,EAAWpO,KAAKwC,IAAI4N,EAAKnR,EAAI8Q,EAAQ9Q,GAAKe,KAAKwC,IAAI4N,EAAKlR,EAAI6Q,EAAQ7Q,GACtEkP,EAAWxL,IACdA,EAAcwL,EACd6B,EAAWG,EAEb,CAED,OAAOH,CACR,CAEA,cAAAI,CAAeE,GACd,OAAO,GAAKA,EAAStR,GAAKsR,EAAStR,EAAI7G,KAAK8U,aAAe,GAAKqD,EAASrR,GAAKqR,EAASrR,EAAI9G,KAAK+U,WACjG,CAEA,UAAAmD,CAAWC,GACV,OAAOnY,KAAK4U,KAAKuD,EAAStR,GAAGsR,EAASrR,GAAGyN,QAC1C,CAEA,QAAAgD,CAASlV,EAAa+V,GACrB,IAAIV,EAAarV,EACjB,MAAMoQ,EAAe,CAACiF,GACtB,IAAIW,EAAgB,GACpB,KAAOA,EAAQ,GACdX,EAAa1X,KAAKyX,gBAAgBC,EAAYU,GAC9C3F,EAAKlG,KAAKmL,GACVW,IAED,OAAO5F,CACR,CAEA,eAAAK,CAAgB5K,GACf,IAAIyN,EAA0B/N,KAAKoN,OAAO9M,EAAKqB,UAAYrB,EAAKgM,KAAO,GAAKlU,KAAK6U,eAC7Ee,EAA0BhO,KAAKoN,OAAO9M,EAAKsB,UAAYtB,EAAKgM,KAAO,GAAKlU,KAAK6U,eAGjF,OAFAc,EAAkB/N,KAAKuG,IAAI,EAAGvG,KAAK6C,IAAIkL,EAAiB3V,KAAK8U,YAAc,IAC3Ec,EAAkBhO,KAAKuG,IAAI,EAAGvG,KAAK6C,IAAImL,EAAiB5V,KAAK+U,YAAc,IACpE/U,KAAK4U,KAAKe,GAAiBC,EACnC,CAEA,6BAAA3C,CAA8B4C,EAAc9O,GAC3C,MAAM+O,EAAyB,GAC/B,IAAK,IAAIjP,EAAI,EAAGA,EAAI7G,KAAK8U,YAAajO,IACrC,IAAK,IAAIC,EAAI,EAAGA,EAAI9G,KAAK+U,YAAajO,IAAK,CAC1C,MAAMiP,EAAO/V,KAAK4U,KAAK/N,GAAGC,GACpBkP,EAAWpO,KAAK4D,KAAK5D,KAAKqO,IAAIF,EAAKlP,EAAIgP,EAAOhP,EAAG,GAAKe,KAAKqO,IAAIF,EAAKjP,EAAI+O,EAAO/O,EAAG,IACpFkP,GAAYjP,EAAS,GAAKiP,GAAYjP,EAAS,GAAKgP,EAAKxB,UAC5DuB,EAAevJ,KAAKwJ,EAEtB,CAGD,OAAOD,EADalO,KAAKoN,MAAMpN,KAAKyE,SAAWyJ,EAAenD,QAE/D,ECzGM,MAAM2F,EAOZ,WAAAvY,CAAYwY,EAA+BvR,EAAewR,EAAyBC,GAFzE,KAAAC,cAAgB,EAGzB1Y,KAAKgH,MAAQA,EACbhH,KAAKuY,YAAcA,EACnBvY,KAAKwY,eAAiBA,EACtBxY,KAAKyY,SAAWA,CACjB,CAEO,IAAAjR,CACNC,EACAkR,EACAC,EACAC,EACAC,GAEI9Y,KAAKwY,iBACR/Q,EAAQsE,YAAc/L,KAAKgH,MAC3BS,EAAQsR,YAAY/Y,KAAKuY,aACzB9Q,EAAQC,YACRD,EAAQqH,OAAO6J,EAAW3Y,KAAKyY,SAAW,EAAGG,EAAW5Y,KAAKyY,SAAW,GACxEhR,EAAQ6N,OAAOuD,EAAWC,GAC1BrR,EAAQqE,UAAY9L,KAAK0Y,cACzBjR,EAAQuE,SAEV,EAGM,MAAMgN,UAAmBV,EAC/B,WAAAvY,GACCgN,MAAM,CAAC,EAAG,GAAI,QAAQ,EAAO,EAC9B,EAeM,MAAMkM,UAAqCX,EAGjD,WAAAvY,CAAY0Y,EAAkBzR,EAAekS,GAC5CnM,MAAM,CAAC,EAAG,GAAI/F,GAAO,EAAMyR,GAC3BzY,KAAKkZ,kBAAoBA,CAC1B,CAES,IAAA1R,CACRC,EACA0R,EACAC,EACAC,EACAC,GAEA,MAAMC,EAAQF,EAAiBF,EACzBK,EAAQF,EAAiBF,EAEzBK,EADW7R,KAAK4D,KAAK5D,KAAKqO,IAAIsD,EAAO,GAAK3R,KAAKqO,IAAIuD,EAAO,IAClBxZ,KAAKkZ,kBAE7CQ,EAA0C,GAA7BD,EAAkC,EAC/CE,EAAkD,IAFd,EAAIF,GAEe,EAE7D,GAAIzZ,KAAKwY,eAAgB,CACxB/Q,EAAQsE,YAAc/L,KAAKgH,MAC3BS,EAAQsR,YAAY,CAACW,EAAYC,IACjClS,EAAQC,YACRD,EAAQqH,OAAOqK,EAAgBnZ,KAAKyY,SAAW,EAAGW,EAAgBpZ,KAAKyY,SAAW,GAClFhR,EAAQ6N,OAAO+D,EAAgBC,GAC/B7R,EAAQqE,UAAY9L,KAAK0Y,cACzBjR,EAAQuE,SAERvE,EAAQsR,YAAY,IACpB,MAAMa,EAAU,EAChBnS,EAAQC,YACRD,EAAQqH,OAAOuK,EAAiBO,EAASN,EAAiBM,GAC1DnS,EAAQ6N,OAAO+D,EAAiBO,EAASN,EAAiBM,GAC1DnS,EAAQuE,SAERvE,EAAQC,YACRD,EAAQqH,OAAOuK,EAAiBO,EAASN,EAAiBM,GAC1DnS,EAAQ6N,OAAO+D,EAAiBO,EAASN,EAAiBM,GAC1DnS,EAAQuE,QACT,CACD,GfxFD,SAAYnM,GACX,qBACA,qBACA,mBACA,mBACA,6BACA,6BACA,6BACA,6BACA,wBACA,CAVD,CAAYA,IAAAA,EAAS,KAYd,MAAMga,EAoCZ,WAAA9Z,CACCmP,EACA4B,EACAvH,EACAC,EACAb,EACAuL,EACAlN,EACA+C,EACAsB,EACAK,EACA1C,GAnCM,KAAA8Q,gBAAkB,EAClB,KAAA/Q,aAAc,EACd,KAAAE,aAAc,EAEd,KAAA8Q,MAAgB,EAAInS,KAAKC,GACzB,KAAAmS,mBAAgCna,EAAUoa,QAC1C,KAAA9G,oBAAqB,EACrB,KAAAC,0BAA4B,EAS5B,KAAA/H,WAA2B,GAE3B,KAAAK,MAAgB,GAmBtB1L,KAAK8Q,SAAWA,EAChB9Q,KAAKuJ,UAAYA,EACjBvJ,KAAKwJ,UAAYA,EACjBxJ,KAAKmI,MAAQoB,EACbvJ,KAAKoI,OAASmB,EAAY2K,EAC1BlU,KAAKqI,KAAOmB,EACZxJ,KAAKsI,QAAUkB,EAAY0K,EAC3BlU,KAAK2I,MAAQA,EACb3I,KAAKkU,KAAOA,EACZlU,KAAKgH,MAAQA,EACbhH,KAAK6I,YAAcqG,EAAOM,MAC1BxP,KAAK8I,aAAeoG,EAAOO,OAC3BzP,KAAK+J,eAAiBA,EACtB/J,KAAK8N,aAAe9N,KAAKkU,KAAO,EAChClU,KAAKqL,WAAaA,EAClBrL,KAAKka,cAAgB7O,EAAWsH,OAChC3S,KAAK0L,MAAQA,EACb1L,KAAKma,SAAWzO,EAAMiH,OACtB3S,KAAKgJ,aAAeA,EACpB,MAAMoR,EAAsBlL,EAAOmL,wBACnCra,KAAKsa,QAAUF,EAAWG,KAC1Bva,KAAKwa,QAAUJ,EAAWK,IAE1Bza,KAAK0Q,QAAUxB,EAAOM,MAAQ,EAC9BxP,KAAK2Q,QAAUzB,EAAOO,OAAS,EAE/B,MAAMnE,EAAatL,KAAK0Q,QAAU1Q,KAAKuJ,UAAYvJ,KAAK8N,aAClDvC,EAAavL,KAAK2Q,QAAU3Q,KAAKwJ,UAAYxJ,KAAK8N,aACxD,IAAIpF,EAAQd,KAAK8S,MAAMnP,EAAID,GACvB5C,EAAQ,IACXA,GAAS,EAAId,KAAKC,IAEnB7H,KAAK2a,SAAWjS,EAEhB1I,KAAK4a,eAAiB5a,KAAKuJ,UAAYvJ,KAAK8N,aAAelG,KAAK8B,IAAI1J,KAAK2a,UAAY3a,KAAKkU,KAC1FlU,KAAK6a,eAAiB7a,KAAKwJ,UAAYxJ,KAAK8N,aAAelG,KAAKgC,IAAI5J,KAAK2a,UAAY3a,KAAKkU,KAE1FlU,KAAKmJ,UAAY,EAClB,CAEO,IAAA3B,CAAKC,GACX,GAAIzH,KAAK+I,YAAa,CACjB/I,KAAKiJ,aACRjJ,KAAK6L,gBAAgBpE,GAEtBA,EAAQsE,YAAc/L,KAAKgH,MAC3BS,EAAQqE,UAAY,EACpBrE,EAAQsR,YAAY,IACpB,MAAMa,EAAU,GAChBnS,EAAQC,YACRD,EAAQqH,OAAO9O,KAAKuJ,UAAYvJ,KAAK8N,aAAe8L,EAAS5Z,KAAKwJ,UAAYxJ,KAAK8N,aAAe8L,GAClGnS,EAAQ6N,OAAOtV,KAAKuJ,UAAYvJ,KAAK8N,aAAe8L,EAAS5Z,KAAKwJ,UAAYxJ,KAAK8N,aAAe8L,GAClGnS,EAAQuE,SAERvE,EAAQC,YACRD,EAAQqH,OAAO9O,KAAKuJ,UAAYvJ,KAAK8N,aAAe8L,EAAS5Z,KAAKwJ,UAAYxJ,KAAK8N,aAAe8L,GAClGnS,EAAQ6N,OAAOtV,KAAKuJ,UAAYvJ,KAAK8N,aAAe8L,EAAS5Z,KAAKwJ,UAAYxJ,KAAK8N,aAAe8L,GAClGnS,EAAQuE,QACT,MACCvE,EAAQK,UAAY9H,KAAKgH,MACzBS,EAAQqT,SAAS9a,KAAKuJ,UAAWvJ,KAAKwJ,UAAWxJ,KAAKkU,KAAMlU,KAAKkU,MAEjEzM,EAAQsR,YAAY,IACpBtR,EAAQsT,SAAW,QACnBtT,EAAQsE,YAAc,QACtBtE,EAAQqE,UAAY,EACpBrE,EAAQuT,WAAWhb,KAAKuJ,UAAWvJ,KAAKwJ,UAAWxJ,KAAKkU,KAAMlU,KAAKkU,MAEnEzM,EAAQC,YACRD,EAAQE,IAAI3H,KAAKuJ,UAAYvJ,KAAK8N,aAAc9N,KAAKwJ,UAAYxJ,KAAK8N,aAAc9N,KAAKkU,KAAO,EAAG,EAAGlU,KAAK+Z,OAC3GtS,EAAQuE,SAERhM,KAAK4a,eAAiB5a,KAAKuJ,UAAYvJ,KAAK8N,aAAelG,KAAK8B,IAAI1J,KAAK2a,UAAY3a,KAAKkU,KAC1FlU,KAAK6a,eAAiB7a,KAAKwJ,UAAYxJ,KAAK8N,aAAelG,KAAKgC,IAAI5J,KAAK2a,UAAY3a,KAAKkU,KAC1FzM,EAAQC,YACRD,EAAQqH,OAAO9O,KAAKuJ,UAAYvJ,KAAK8N,aAAc9N,KAAKwJ,UAAYxJ,KAAK8N,cACzErG,EAAQ6N,OAAOtV,KAAK4a,eAAgB5a,KAAK6a,gBACzCpT,EAAQqE,UAAY9L,KAAK8Z,gBACzBrS,EAAQuE,QAEV,CAEO,OAAAtB,GACN1K,KAAK+I,aAAc,EACnB/I,KAAKiJ,aAAc,EACnBjJ,KAAK2K,kBACLC,YAAW,KACV5K,KAAKiJ,aAAc,CAAK,GACtB,IACJ,CAEA,eAAA0B,GAEC,IAAK,IAAIwB,EAAI,EAAGA,EADM,GACaA,IAAK,CACvC,MAAMC,EAAwB,EAAhBxE,KAAKyE,SAAezE,KAAKC,GACjCc,EAAwB,EAAhBf,KAAKyE,SAAe,EAC5BpF,EAAYW,KAAK8B,IAAI0C,GAASzD,EAC9BzB,EAAYU,KAAKgC,IAAIwC,GAASzD,EAC9BsS,EAAYrT,KAAKoN,MAAsB,IAAhBpN,KAAKyE,UAE5BhF,EAAgB,QAAQ4T,MAAcA,MAAcA,MADvB,GAAhBrT,KAAKyE,SAAiB,MAEnCC,EAAW,IAAI1F,EACpB5G,KAAKuJ,UAAYvJ,KAAK8N,aACtB9N,KAAKwJ,UAAYxJ,KAAK8N,aACN,EAAhBlG,KAAKyE,SAAe,EACpBhF,EACAJ,EACAC,EACA,IAEDlH,KAAKmJ,UAAUoD,KAAKD,EACrB,CACD,CAEA,eAAAT,CAAgBpE,GACfzH,KAAKmJ,UAAUc,SAASgC,IACvBA,EAAS1E,SACT0E,EAASzE,KAAKC,EAAQ,IAGvBzH,KAAKmJ,UAAYnJ,KAAKmJ,UAAU+C,QAAQD,GAAaA,EAAS9E,KAAO,GACtE,CAEO,cAAA2C,CACN4I,EACAxH,EACAJ,EACAO,EACAK,GAGD,CAEO,GAAA+E,CAAIoI,EAAmBC,EAAmB5N,GAEjD,CAEO,KAAA0F,CAAM1F,GAEb,CAEO,SAAA2F,CAAU3F,GAEjB,CAEO,wBAAAgQ,GACNlb,KAAKuT,wBAAwBvT,KAAKga,mBACnC,CAEO,kBAAA1G,GACN,MAAM6H,EAAaC,OAAOC,KAAKxb,GAC7Byb,KAAKC,GAAMzD,OAAO0D,SAASD,KAC3BrP,QAAQqP,IAAOzD,OAAO2D,MAAMF,KAG9B,OADwBJ,EADJvT,KAAKoN,MAAMpN,KAAKyE,SAAW8O,EAAWxI,QAG3D,CAEO,uBAAAY,CAAwBmI,GAC9B,IAAI1b,KAAK+I,YAGT,OAAQ2S,GACP,KAAK7b,EAAU8b,MACd3b,KAAK+T,YACL,MAED,KAAKlU,EAAU+b,MACd5b,KAAK6T,YACL,MAED,KAAKhU,EAAUgc,KACd7b,KAAK8T,WACL,MAED,KAAKjU,EAAUic,KACd9b,KAAKgU,WACL,MAED,KAAKnU,EAAUkc,UACd/b,KAAK0T,gBACL,MAED,KAAK7T,EAAUmc,UACdhc,KAAK2T,gBACL,MAED,KAAK9T,EAAUoc,UACdjc,KAAKyT,gBACL,MAED,KAAK5T,EAAUqc,UACdlc,KAAK4T,gBACL,MAED,QAAS,CACR,MAAMuH,EAAaC,OAAOe,OAAOtc,GAAWqM,QAAQsJ,GAA2B,iBAAVA,IAC/D4G,EAAcxU,KAAKoN,MAAMpN,KAAKyE,SAAW8O,EAAWxI,QAC1D3S,KAAKuT,wBAAwB4H,EAAWiB,IACxC,KACD,EAEF,CAEO,SAAArI,GACN,GAAI/T,KAAK+I,YACR,OAEG/I,KAAKga,oBAAsBna,EAAU8b,MACxC3b,KAAKoT,2BAA6B,EAElCpT,KAAKoT,0BAA4B,EAElCpT,KAAKga,mBAAqBna,EAAU8b,MACpC,IAAIU,GAAU,EACd,IAAK,MAAMnS,KAAYlK,KAAK+J,eAAeC,UAC1C,GACChK,KAAKwJ,UAAYxJ,KAAK2I,MAAQuB,EAAS7B,KAAO6B,EAASuF,QACvDzP,KAAKwJ,UAAYU,EAAS7B,MAC1B6B,EAAS/B,MAAQnI,KAAKuJ,UAAYvJ,KAAKkU,MACvClU,KAAKuJ,UAAYW,EAAS9B,OACzB,CACDpI,KAAKwJ,UAAYU,EAAS5B,QAC1B+T,GAAU,EACV,KACD,CAEIA,EAGJrc,KAAKmT,oBAAqB,EAF1BnT,KAAKwJ,UAAY5B,KAAKuG,IAAInO,KAAKwJ,UAAYxJ,KAAK2I,MAAO,EAIzD,CAEO,SAAAkL,GACN,GAAI7T,KAAK+I,YACR,OAEG/I,KAAKga,oBAAsBna,EAAU+b,MACxC5b,KAAKoT,2BAA6B,EAElCpT,KAAKoT,0BAA4B,EAElCpT,KAAKga,mBAAqBna,EAAU+b,MACpC,IAAIS,GAAU,EACd,IAAK,MAAMnS,KAAYlK,KAAK+J,eAAeC,UAC1C,GACChK,KAAKwJ,UAAYxJ,KAAK2I,MAAQ3I,KAAKkU,KAAOhK,EAAS7B,MACnDrI,KAAKwJ,UAAYU,EAAS7B,KAAO6B,EAASuF,QAC1CvF,EAAS/B,MAAQnI,KAAKuJ,UAAYvJ,KAAKkU,MACvClU,KAAKuJ,UAAYW,EAAS9B,OACzB,CACDpI,KAAKwJ,UAAYU,EAAS7B,KAAOrI,KAAKkU,KACtCmI,GAAU,EACV,KACD,CAEIA,EAGJrc,KAAKmT,oBAAqB,EAF1BnT,KAAKwJ,UAAY5B,KAAK6C,IAAIzK,KAAKwJ,UAAYxJ,KAAK2I,MAAO3I,KAAK8I,aAAe9I,KAAKkU,KAIlF,CAEO,QAAAF,GACN,GAAIhU,KAAK+I,YACR,OAEG/I,KAAKga,oBAAsBna,EAAUic,KACxC9b,KAAKoT,2BAA6B,EAElCpT,KAAKoT,0BAA4B,EAElCpT,KAAKga,mBAAqBna,EAAUic,KACpC,IAAIO,GAAU,EACd,IAAK,MAAMnS,KAAYlK,KAAK+J,eAAeC,UAC1C,GACChK,KAAKuJ,UAAYvJ,KAAK2I,MAAQuB,EAAS9B,QACvCpI,KAAKuJ,UAAYW,EAAS/B,OAC1B+B,EAAS7B,KAAOrI,KAAKwJ,UAAYxJ,KAAKkU,MACtClU,KAAKwJ,UAAYU,EAAS5B,QACzB,CACDtI,KAAKuJ,UAAYW,EAAS9B,OAC1BiU,GAAU,EACV,KACD,CAEIA,EAGJrc,KAAKmT,oBAAqB,EAF1BnT,KAAKuJ,UAAY3B,KAAKuG,IAAInO,KAAKuJ,UAAYvJ,KAAK2I,MAAO,EAIzD,CAEO,QAAAmL,GACN,GAAI9T,KAAK+I,YACR,OAEG/I,KAAKga,oBAAsBna,EAAUgc,KACxC7b,KAAKoT,2BAA6B,EAElCpT,KAAKoT,0BAA4B,EAElCpT,KAAKga,mBAAqBna,EAAUgc,KACpC,IAAIQ,GAAU,EACd,IAAK,MAAMnS,KAAYlK,KAAK+J,eAAeC,UAC1C,GACChK,KAAKuJ,UAAYvJ,KAAK2I,MAAQ3I,KAAKkU,KAAOhK,EAAS/B,OACnDnI,KAAKuJ,UAAYW,EAAS/B,MAAQ+B,EAASsF,OAC3CtF,EAAS7B,KAAOrI,KAAKwJ,UAAYxJ,KAAKkU,MACtClU,KAAKwJ,UAAYU,EAAS5B,QACzB,CACDtI,KAAKuJ,UAAYW,EAAS/B,MAAQnI,KAAKkU,KACvCmI,GAAU,EACV,KACD,CAEIA,EAGJrc,KAAKmT,oBAAqB,EAF1BnT,KAAKuJ,UAAY3B,KAAK6C,IAAIzK,KAAKuJ,UAAYvJ,KAAK2I,MAAO3I,KAAK6I,YAAc7I,KAAKkU,KAIjF,CAEO,aAAAR,GACN,GAAI1T,KAAK+I,YACR,OAEG/I,KAAKga,oBAAsBna,EAAUkc,UACxC/b,KAAKoT,2BAA6B,EAElCpT,KAAKoT,0BAA4B,EAElCpT,KAAKga,mBAAqBna,EAAUkc,UACpC,IAAIO,GAAe,EACfC,GAAc,EAClB,IAAK,MAAMrS,KAAYlK,KAAK+J,eAAeC,WAExCsS,GACDtc,KAAKwJ,UAAYxJ,KAAK2I,MAAQuB,EAAS7B,KAAO6B,EAASuF,QACvDzP,KAAKwJ,UAAYU,EAAS7B,MAC1B6B,EAAS/B,MAAQnI,KAAKuJ,UAAYvJ,KAAKkU,MACvClU,KAAKuJ,UAAYW,EAAS9B,SAE1BpI,KAAKwJ,UAAYU,EAAS5B,QAC1BgU,GAAe,IAGdC,GACDvc,KAAKuJ,UAAYvJ,KAAK2I,MAAQ3I,KAAKkU,KAAOhK,EAAS/B,OACnDnI,KAAKuJ,UAAYW,EAAS/B,MAAQ+B,EAASsF,OAC3CtF,EAAS7B,KAAOrI,KAAKwJ,UAAYxJ,KAAKkU,MACtClU,KAAKwJ,UAAYU,EAAS5B,UAE1BtI,KAAKuJ,UAAYW,EAAS/B,MAAQnI,KAAKkU,KACvCqI,GAAc,GAGZD,GAAgBC,IACnBvc,KAAKmT,oBAAqB,GAEtBmJ,IACJtc,KAAKwJ,UAAY5B,KAAKuG,IAAInO,KAAKwJ,UAAYxJ,KAAK2I,MAAO,IAEnD4T,IACJvc,KAAKuJ,UAAY3B,KAAK6C,IAAIzK,KAAKuJ,UAAYvJ,KAAK2I,MAAO3I,KAAK6I,YAAc7I,KAAKkU,MAEjF,CAEO,aAAAP,GACN,GAAI3T,KAAK+I,YACR,OAEG/I,KAAKga,oBAAsBna,EAAUmc,UACxChc,KAAKoT,2BAA6B,EAElCpT,KAAKoT,0BAA4B,EAElCpT,KAAKga,mBAAqBna,EAAUmc,UACpC,IAAIM,GAAe,EACfE,GAAc,EAClB,IAAK,MAAMtS,KAAYlK,KAAK+J,eAAeC,WAExCsS,GACDtc,KAAKwJ,UAAYxJ,KAAK2I,MAAQuB,EAAS7B,KAAO6B,EAASuF,QACvDzP,KAAKwJ,UAAYU,EAAS7B,MAC1B6B,EAAS/B,MAAQnI,KAAKuJ,UAAYvJ,KAAKkU,MACvClU,KAAKuJ,UAAYW,EAAS9B,SAE1BpI,KAAKwJ,UAAYU,EAAS5B,QAC1BgU,GAAe,IAGdE,GACDxc,KAAKuJ,UAAYvJ,KAAK2I,MAAQuB,EAAS9B,QACvCpI,KAAKuJ,UAAYW,EAAS/B,OAC1B+B,EAAS7B,KAAOrI,KAAKwJ,UAAYxJ,KAAKkU,MACtClU,KAAKwJ,UAAYU,EAAS5B,UAE1BtI,KAAKuJ,UAAYW,EAAS9B,OAC1BoU,GAAc,GAGZF,GAAgBE,IACnBxc,KAAKmT,oBAAqB,GAEtBmJ,IACJtc,KAAKwJ,UAAY5B,KAAKuG,IAAInO,KAAKwJ,UAAYxJ,KAAK2I,MAAO,IAEnD6T,IACJxc,KAAKuJ,UAAY3B,KAAKuG,IAAInO,KAAKuJ,UAAYvJ,KAAK2I,MAAO,GAEzD,CAEO,aAAA8K,GACN,GAAIzT,KAAK+I,YACR,OAEG/I,KAAKga,oBAAsBna,EAAUoc,UACxCjc,KAAKoT,2BAA6B,EAElCpT,KAAKoT,0BAA4B,EAElCpT,KAAKga,mBAAqBna,EAAUoc,UACpC,IAAIQ,GAAe,EACfF,GAAc,EAClB,IAAK,MAAMrS,KAAYlK,KAAK+J,eAAeC,WAExCyS,GACDzc,KAAKwJ,UAAYxJ,KAAK2I,MAAQ3I,KAAKkU,KAAOhK,EAAS7B,MACnDrI,KAAKwJ,UAAYU,EAAS7B,KAAO6B,EAASuF,QAC1CvF,EAAS/B,MAAQnI,KAAKuJ,UAAYvJ,KAAKkU,MACvClU,KAAKuJ,UAAYW,EAAS9B,SAE1BpI,KAAKwJ,UAAYU,EAAS7B,KAAOrI,KAAKkU,KACtCuI,GAAe,IAGdF,GACDvc,KAAKuJ,UAAYvJ,KAAK2I,MAAQ3I,KAAKkU,KAAOhK,EAAS/B,OACnDnI,KAAKuJ,UAAYW,EAAS/B,MAAQ+B,EAASsF,OAC3CtF,EAAS7B,KAAOrI,KAAKwJ,UAAYxJ,KAAKkU,MACtClU,KAAKwJ,UAAYU,EAAS5B,UAE1BtI,KAAKuJ,UAAYW,EAAS/B,MAAQnI,KAAKkU,KACvCqI,GAAc,GAGZE,GAAgBF,IACnBvc,KAAKmT,oBAAqB,GAEtBsJ,IACJzc,KAAKwJ,UAAY5B,KAAK6C,IAAIzK,KAAKwJ,UAAYxJ,KAAK2I,MAAO3I,KAAK8I,aAAe9I,KAAKkU,OAE5EqI,IACJvc,KAAKuJ,UAAY3B,KAAK6C,IAAIzK,KAAKuJ,UAAYvJ,KAAK2I,MAAO3I,KAAK6I,YAAc7I,KAAKkU,MAEjF,CAEO,aAAAN,GACN,GAAI5T,KAAK+I,YACR,OAEG/I,KAAKga,oBAAsBna,EAAUqc,UACxClc,KAAKoT,2BAA6B,EAElCpT,KAAKoT,0BAA4B,EAElCpT,KAAKga,mBAAqBna,EAAUqc,UACpC,IAAIO,GAAe,EACfD,GAAc,EAClB,IAAK,MAAMtS,KAAYlK,KAAK+J,eAAeC,WAExCyS,GACDzc,KAAKwJ,UAAYxJ,KAAK2I,MAAQ3I,KAAKkU,KAAOhK,EAAS7B,MACnDrI,KAAKwJ,UAAYU,EAAS7B,KAAO6B,EAASuF,QAC1CvF,EAAS/B,MAAQnI,KAAKuJ,UAAYvJ,KAAKkU,MACvClU,KAAKuJ,UAAYW,EAAS9B,SAE1BpI,KAAKwJ,UAAYU,EAAS7B,KAAOrI,KAAKkU,KACtCuI,GAAe,IAGdD,GACDxc,KAAKuJ,UAAYvJ,KAAK2I,MAAQuB,EAAS9B,QACvCpI,KAAKuJ,UAAYW,EAAS/B,OAC1B+B,EAAS7B,KAAOrI,KAAKwJ,UAAYxJ,KAAKkU,MACtClU,KAAKwJ,UAAYU,EAAS5B,UAE1BtI,KAAKuJ,UAAYW,EAAS9B,OAC1BoU,GAAc,GAGZC,GAAgBD,IACnBxc,KAAKmT,oBAAqB,GAEtBsJ,IACJzc,KAAKwJ,UAAY5B,KAAK6C,IAAIzK,KAAKwJ,UAAYxJ,KAAK2I,MAAO3I,KAAK8I,aAAe9I,KAAKkU,OAE5EsI,IACJxc,KAAKuJ,UAAY3B,KAAKuG,IAAInO,KAAKuJ,UAAYvJ,KAAK2I,MAAO,GAEzD,EgBjjBM,MAAM+T,UAAkB7C,EAO9B,WAAA9Z,CACCmP,EACA4B,EACAvH,EACAC,EACAb,EACAuL,EACA5B,EACAtL,EACA+C,EACAsB,EACAK,EACA1C,EACA2T,GAEA5P,MAAMmC,EAAQ4B,EAAUvH,EAAWC,EAAWb,EAAOuL,EAAMlN,EAAO+C,EAAgBsB,EAAYK,EAAO1C,GApB/F,KAAAsJ,iBAAmB,GACnB,KAAAG,KAAsB,GACtB,KAAAF,yBAA2B,GAC3B,KAAAqK,gBAAiB,EAkBvB5c,KAAKsS,iBAAmBA,EACxBtS,KAAK2c,UAAYA,CAClB,CAEgB,IAAAnV,CAAKC,GAChBzH,KAAK4c,gBACR5c,KAAK2c,UAAUnV,KAAKC,GAErBsF,MAAMvF,KAAKC,EACZ,CAEgB,cAAAqC,CACf4I,EACAxH,EACAJ,EACAO,EACAK,GAEA1L,KAAK2c,UAAU7S,eAAe4I,EAAaxH,EAAYJ,EAAYO,EAAYK,EAChF,ECzCM,MAAMmR,UAAmBH,EAM/B,WAAA3c,CACCmP,EACA3F,EACAC,EACAO,EACAsB,EACAK,EACAiR,EACA3T,GAEA,MAGM8T,EAAkBja,EAAmBG,YAC3C+J,MACCmC,EACA,IAAI8J,EACJzP,EACAC,EARuB,EACD,GACY,EAUlCsT,EACA/S,EACAsB,EACAK,EACA1C,EACA2T,GAhCK,KAAAI,sBAAwB,IACxB,KAAAC,2BAA4B,EAC5B,KAAAC,2BAA6B,IAC7B,KAAAC,4BAA6B,CA+BpC,CAEgB,SAAArM,CAAU3F,GACzB,GAAIlL,KAAKkd,6BAA+Bld,KAAK+I,YAAa,CACzD,MAAMoU,EAAqBnd,KAAK0L,MAAM0R,WAAWzR,GAASA,EAAK5C,cAAgB4C,EAAK1C,gBACpF,IAA4B,IAAxBkU,EAA2B,CAC9Bnd,KAAK0L,MAAMyR,GAAoB5T,UAAYvJ,KAAKuJ,UAAYvJ,KAAKkU,KAAO,EACxElU,KAAK0L,MAAMyR,GAAoB3T,UAAYxJ,KAAKwJ,UAAYxJ,KAAKkU,KAAO,EACrClU,KAAK0L,MAAMyR,GAAoBvP,wBAAwB1C,KAEzFlL,KAAK0L,MAAMyR,GAAoB3P,UAC/BxN,KAAKkd,4BAA6B,EAClCtS,YAAW,KACV5K,KAAKkd,4BAA6B,CAAI,GACpCld,KAAKid,4BAEV,CACD,CAED,CAEgB,KAAArM,CAAM1F,GACrB,GAAIlL,KAAKgd,4BAA8Bhd,KAAK+I,YAAa,CACxD,MAAMsU,EAA2Brd,KAAKqL,WAAW+R,WAAW/R,GAAeA,EAAWtC,cACtF,IAAkC,IAA9BsU,EAAiC,CACpCrd,KAAKqL,WAAWgS,GAA0BzR,OACzC5L,KAAK4a,eACL5a,KAAK6a,eACL7a,KAAK2a,UACL,EACA3a,KAAK6I,YACL7I,KAAK8I,cAE6B9I,KAAKqL,WAAWgS,GAA0B7Q,kBAC5ExM,KAAK+J,eACLmB,KAGAlL,KAAKqL,WAAWgS,GAA0BtU,aAAc,EACxD/I,KAAKgd,2BAA4B,EACjCpS,YAAW,KACV5K,KAAKgd,2BAA4B,CAAI,GACnChd,KAAK+c,uBAEV,CACD,CAED,CAEgB,GAAAtM,CAAIoI,EAAmBC,EAAmB5N,GACzD,GAAIlL,KAAK+I,YACR,OAGD,MAAMuC,EAAaJ,EAAW3B,UAAY2B,EAAWgJ,KAAO,EAAIlU,KAAKuJ,UAAYvJ,KAAK8N,aAChFvC,EAAaL,EAAW1B,UAAY0B,EAAWgJ,KAAO,EAAIlU,KAAKwJ,UAAYxJ,KAAK8N,aACtF,IAAIpF,EAAQd,KAAK8S,MAAMnP,EAAID,GACvB5C,EAAQ,IACXA,GAAS,EAAId,KAAKC,IAEnB7H,KAAK2a,SAAWjS,CACjB,EClGM,MAAM4U,UAAmBzD,EAgB/B,WAAA9Z,CACCmP,EACA4B,EACAvH,EACAC,EACAb,EACAuL,EACAlN,EACA+C,EACAsB,EACAK,EACA1C,GAEA+D,MAAMmC,EAAQ4B,EAAUvH,EAAWC,EAAWb,EAAOuL,EAAMlN,EAAO+C,EAAgBsB,EAAYK,EAAO1C,GA5B/F,KAAAuU,UAAuB,CAC7BC,SAAS,EACTC,WAAW,EACXC,WAAW,EACXC,YAAY,EACZC,GAAG,EACHrH,GAAG,EACHsH,GAAG,EACHC,GAAG,EACHC,GAAG,EACHC,GAAG,EACHC,GAAG,EACHC,GAAG,GAkBH/M,SAASG,iBAAiB,WAAY6M,IACjCne,KAAKud,UAAUa,eAAeD,EAAME,OACvCre,KAAKud,UAAUY,EAAME,MAAO,EAC7B,IAEDlN,SAASG,iBAAiB,WAAY6M,IAClB,UAAfA,EAAMG,MACTte,KAAK6Q,UAAU7Q,KAChB,IAEDmR,SAASG,iBAAiB,SAAU6M,IAC/Bne,KAAKud,UAAUa,eAAeD,EAAME,OACvCre,KAAKud,UAAUY,EAAME,MAAO,EAC7B,IAEDlN,SAASG,iBAAiB,aAAc6M,IACvCne,KAAK0Q,QAAUyN,EAAMI,QAAUve,KAAKsa,QACpCta,KAAK2Q,QAAUwN,EAAMK,QAAUxe,KAAKwa,OAAO,IAE5CrJ,SAASG,iBAAiB,SAAU6M,IAC/BjP,EAAOuP,SAASN,EAAMtI,SACzB7V,KAAK4Q,MAAM5Q,KACZ,GAEF,CAEgB,cAAA8J,CACf4I,EACAxH,EACAJ,EACAO,EACAK,GAGI1L,KAAK0e,MAAQ1e,KAAK2e,QACrB3e,KAAK0T,gBACK1T,KAAK0e,MAAQ1e,KAAKua,OAC5Bva,KAAK2T,gBACK3T,KAAK4e,QAAU5e,KAAK2e,QAC9B3e,KAAKyT,gBACKzT,KAAK4e,QAAU5e,KAAKua,OAC9Bva,KAAK4T,gBACK5T,KAAK0e,KACf1e,KAAK+T,YACK/T,KAAK4e,OACf5e,KAAK6T,YACK7T,KAAKua,OACfva,KAAKgU,WACKhU,KAAK2e,SACf3e,KAAK8T,WAGN9T,KAAKmI,MAAQnI,KAAKuJ,UAClBvJ,KAAKoI,OAASpI,KAAKuJ,UAAYvJ,KAAKkU,KACpClU,KAAKqI,KAAOrI,KAAKwJ,UACjBxJ,KAAKsI,QAAUtI,KAAKwJ,UAAYxJ,KAAKkU,IACtC,CAEgB,SAAArD,CAAU3F,GACzB,GAAIlL,KAAK+I,YACR,OAED,MAAMoU,EAAqBnd,KAAK0L,MAAM0R,WAAWzR,GAASA,EAAK5C,cAAgB4C,EAAK1C,iBACxD,IAAxBkU,IACHnd,KAAK0L,MAAMyR,GAAoB5T,UAAYvJ,KAAKuJ,UAAYvJ,KAAKkU,KAAO,EACxElU,KAAK0L,MAAMyR,GAAoB3T,UAAYxJ,KAAKwJ,UAAYxJ,KAAKkU,KAAO,EACxElU,KAAK0L,MAAMyR,GAAoB3P,UAEjC,CAEgB,GAAAiD,CAAIoI,EAAmBC,EAAmB5N,GACzD,GAAIlL,KAAK+I,YACR,OAED,MAAMuC,EAAauN,EAAY7Y,KAAKuJ,UAAYvJ,KAAK8N,aAC/CvC,EAAauN,EAAY9Y,KAAKwJ,UAAYxJ,KAAK8N,aACrD,IAAIpF,EAAQd,KAAK8S,MAAMnP,EAAID,GACvB5C,EAAQ,IACXA,GAAS,EAAId,KAAKC,IAEnB7H,KAAK2a,SAAWjS,CACjB,CAEgB,KAAAkI,CAAM1F,GACrB,IAAKlL,KAAK+I,YAAa,CACtB,MAAMsU,EAA2Brd,KAAKqL,WAAW+R,WAAW/R,GAAeA,EAAWtC,eACpD,IAA9BsU,IACHrd,KAAKgJ,aAAalH,KAAKlC,EAAUe,WACjCX,KAAKqL,WAAWgS,GAA4B,IAAIvQ,EAC/C9M,KAAK4a,eACL5a,KAAK6a,eACL7a,KAAK2a,SACL3a,KAAK6I,YACL7I,KAAK8I,cACL,EACA9I,KAAKgJ,cAGR,CAED,CAEO,EAAA0V,GACN,OAAO1e,KAAKud,UAAUC,SAAWxd,KAAKud,UAAUK,GAAK5d,KAAKud,UAAUQ,CACrE,CAEO,IAAAa,GACN,OAAO5e,KAAKud,UAAUE,WAAazd,KAAKud,UAAUM,GAAK7d,KAAKud,UAAUU,CACvE,CAEO,IAAA1D,GACN,OAAOva,KAAKud,UAAUG,WAAa1d,KAAKud,UAAUhH,GAAKvW,KAAKud,UAAUS,CACvE,CAEO,KAAAW,GACN,OAAO3e,KAAKud,UAAUI,YAAc3d,KAAKud,UAAUO,GAAK9d,KAAKud,UAAUW,CACxE,EAGM,MAAMW,UAA0BvB,EACtC,WAAAvd,CACCmP,EACA4P,EACAC,EACAhV,EACAf,GAEA,MAEMgW,EAAyB,UACzB3T,EAA2B,CAChC,IAAIyB,EAAiB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAM9D,GAC1C,IAAI8D,EAAiB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAM9D,GAC1C,IAAI8D,EAAiB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAM9D,GAC1C,IAAI8D,EAAiB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAM9D,GAC1C,IAAI8D,EAAiB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAM9D,IAErC0C,EAAgB,CAAC,IAAI8C,EAAW,EAAG,GAAG,EAAMxF,GAAe,IAAIwF,EAAW,EAAG,GAAG,EAAMxF,IACtF+I,EAAgB7C,EAAOmL,wBACvB4E,EAAwB/e,OAAOgf,WAC/BC,EAA2BpN,EAAKwI,KAChC6E,EAA4BH,EAAgBlN,EAAK4M,MACjDzF,EAA4BhK,EAAOM,MAAQ5H,KAAKuG,IAAIgR,EAAkBC,GAC5ErS,MACCmC,EACA,IAAI+J,EAjByB,GAiB2B+F,EAAwB9F,GAChF4F,EACAC,EApB8B,EACD,GAsB7BC,EACAjV,EACAsB,EACAK,EACA1C,EAEF,ECzLM,MAAMqW,UAAyB3C,EACrC,WAAA3c,CACCmP,EACA3F,EACAC,EACAO,EACAsB,EACAK,EACAiR,EACA3T,GAEA,MAGMsW,EAAwBzc,EAAmBW,aACjDuJ,MACCmC,EACA,IAAI8J,EACJzP,EACAC,EAR6B,IACD,GACY,GAUxC8V,EACAvV,EACAsB,EACAK,EACA1C,EACA2T,EAEF,CAEgB,KAAA/L,CAAM1F,GACrB,MAAMmS,EAA2Brd,KAAKqL,WAAW+R,WAAW/R,GAAeA,EAAWtC,cACtF,IAAkC,IAA9BsU,EAAiC,CACpCrd,KAAKqL,WAAWgS,GAA0BzR,OACzC5L,KAAK4a,eACL5a,KAAK6a,eACL7a,KAAK2a,UACL,EACA3a,KAAK6I,YACL7I,KAAK8I,cAE6B9I,KAAKqL,WAAWgS,GAA0B7Q,kBAC5ExM,KAAK+J,eACLmB,KAGAlL,KAAKqL,WAAWgS,GAA0BtU,aAAc,EAE1D,CAED,CAEgB,GAAA0H,CAAIoI,EAAmBC,EAAmB5N,GACzD,GAAIlL,KAAK+I,YACR,OAGD,MAAMuC,EAAaJ,EAAW3B,UAAY2B,EAAWgJ,KAAO,EAAIlU,KAAKuJ,UAAYvJ,KAAK8N,aAChFvC,EAAaL,EAAW1B,UAAY0B,EAAWgJ,KAAO,EAAIlU,KAAKwJ,UAAYxJ,KAAK8N,aACtF,IAAIpF,EAAQd,KAAK8S,MAAMnP,EAAID,GACvB5C,EAAQ,IACXA,GAAS,EAAId,KAAKC,IAEnB7H,KAAK2a,SAAWjS,CACjB,ECvEM,MAAM6W,UAA4BpN,EAAzC,c,oBACQ,KAAAG,iBAA2B,CAenC,CAbQ,IAAA9K,CAAKC,GAEZ,CAEA,cAAAqC,CACC4I,EACAxH,EACAJ,EACAO,EACAK,GAGD,ECTM,MAAM8T,UAAgC9C,EAG5C,WAAA3c,CACCmP,EACA3F,EACAC,EACAO,EACAsB,EACArC,GAEA,MAGMyW,EAAgB5c,EAAmBC,UAEnC6Z,EAAuB,IAAI4C,EACjCxS,MACCmC,EACA,IAAI8J,EACJzP,EACAC,EAVoC,EACD,GACY,EAY/CiW,EACA1V,EACAsB,EAZqB,GAcrBrC,EACA2T,GA7BK,KAAA+C,qBAAuB,CA+B9B,CAEQ,oBAAAC,GAIP,OAD6B/X,KAAKoN,MAAsB,IAAhBpN,KAAKyE,WADjC,GAGb,CAEgB,cAAAvC,CAAeoB,GAE/B,CAEgB,KAAA0F,CAAM1F,GACrB,MAAMmS,EAA2Brd,KAAKqL,WAAW+R,WAAW/R,GAAeA,EAAWtC,cACtF,IAAkC,IAA9BsU,EAAiC,CACpCrd,KAAKqL,WAAWgS,GAA0BzR,OACzC5L,KAAK4a,eACL5a,KAAK6a,eACL7a,KAAK2a,UACL,EACA3a,KAAK6I,YACL7I,KAAK8I,cAE6B9I,KAAKqL,WAAWgS,GAA0B7Q,kBAC5ExM,KAAK+J,eACLmB,KAGAlL,KAAKqL,WAAWgS,GAA0BtU,aAAc,EAE1D,CAED,CAEgB,GAAA0H,CAAIoI,EAAmBC,EAAmB5N,GACrDlL,KAAK+I,cAGL/I,KAAK0f,qBAAuB,GAC/B1f,KAAK2a,UAAY,IACjB3a,KAAK0f,sBAAwB,GACnB1f,KAAK0f,qBAAuB,GACtC1f,KAAK2a,UAAY,IACjB3a,KAAK0f,sBAAwB,GAE7B1f,KAAK0f,qBAAuB1f,KAAK2f,uBAEnC,EChFM,MAAMC,UAAuBlD,EAInC,WAAA3c,CACCmP,EACA3F,EACAC,EACAO,EACAf,GAEA,MAGM6W,EAAsBhd,EAAmBuB,UACzCiH,EAA2B,CAAC,IAAI2B,EAAkB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAMhE,IAEvE2T,EAAuB,IAAI4C,EACjCxS,MACCmC,EACA,IAAI8J,EACJzP,EACAC,EAX2B,EACD,GACY,EAatCqW,EACA9V,EACAsB,EAZqB,GAcrBrC,EACA2T,GA9BF,KAAAI,sBAAwB,IACxB,KAAAC,2BAA4B,EA+B3BpS,YAAW,KACV5K,KAAKgd,2BAA4B,CAAI,GACnC,IACJ,CAEgB,cAAAlT,CAAeoB,GAE/B,CAEgB,KAAA0F,CAAM1F,GACrB,IAAKlL,KAAKgd,2BAA6Bhd,KAAK+I,YAC3C,OAED,MAAMsU,EAA2Brd,KAAKqL,WAAW+R,WAAW/R,GAAeA,EAAWtC,cACtF,IAAkC,IAA9BsU,EAAiC,CACpCrd,KAAKqL,WAAWgS,GAA0BzR,OACzC5L,KAAK4a,eACL5a,KAAK6a,eACL7a,KAAK2a,UACL,EACA3a,KAAK6I,YACL7I,KAAK8I,cAE6B9I,KAAKqL,WAAWgS,GAA0B7Q,kBAC5ExM,KAAK+J,eACLmB,KAGAlL,KAAKqL,WAAWgS,GAA0BtU,aAAc,EACxD/I,KAAKgd,2BAA4B,EACjCpS,YAAW,KACV5K,KAAKgd,2BAA4B,CAAI,GACnChd,KAAK+c,uBAEV,CAED,CAEgB,GAAAtM,CAAIoI,EAAmBC,EAAmB5N,GACzD,GAAIlL,KAAK+I,YACR,OAGD,MAAMuC,EAAaJ,EAAW3B,UAAY2B,EAAWgJ,KAAO,EAAIlU,KAAKuJ,UAAYvJ,KAAK8N,aAChFvC,EAAaL,EAAW1B,UAAY0B,EAAWgJ,KAAO,EAAIlU,KAAKwJ,UAAYxJ,KAAK8N,aACtF,IAAIpF,EAAQd,KAAK8S,MAAMnP,EAAID,GACvB5C,EAAQ,IACXA,GAAS,EAAId,KAAKC,IAEnB7H,KAAK2a,SAAWjS,CACjB,ECpFM,MAAMoX,UAA8BpD,EAM1C,WAAA3c,CACCmP,EACA3F,EACAC,EACAO,EACAsB,EACAK,EACAiR,EACA3T,GAEA,MAGM+W,EAA6Bld,EAAmBK,WACtD6J,MACCmC,EACA,IAAI8J,EACJzP,EACAC,EARkC,IACD,GACY,EAU7CuW,EACAhW,EACAsB,EACAK,EACA1C,EACA2T,GAhCK,KAAAI,sBAAwB,IACxB,KAAAC,2BAA4B,EAC5B,KAAAC,2BAA6B,IAC7B,KAAAC,4BAA6B,EA+BnCtS,YAAW,KACV5K,KAAKgd,2BAA4B,CAAI,GACnC,IACJ,CAEgB,SAAAnM,CAAU3F,GACzB,GAAIlL,KAAKkd,6BAA+Bld,KAAK+I,YAAa,CACzD,MAAMoU,EAAqBnd,KAAK0L,MAAM0R,WAAWzR,GAASA,EAAK5C,cAAgB4C,EAAK1C,gBACpF,IAA4B,IAAxBkU,EAA2B,CAC9Bnd,KAAK0L,MAAMyR,GAAoB5T,UAAYvJ,KAAKuJ,UAAYvJ,KAAKkU,KAAO,EACxElU,KAAK0L,MAAMyR,GAAoB3T,UAAYxJ,KAAKwJ,UAAYxJ,KAAKkU,KAAO,EACrClU,KAAK0L,MAAMyR,GAAoBvP,wBAAwB1C,KAEzFlL,KAAK0L,MAAMyR,GAAoB3P,UAC/BxN,KAAKkd,4BAA6B,EAClCtS,YAAW,KACV5K,KAAKkd,4BAA6B,CAAI,GACpCld,KAAKid,4BAEV,CACD,CAED,CAEgB,KAAArM,CAAM1F,GACrB,GAAIlL,KAAKgd,4BAA8Bhd,KAAK+I,YAAa,CACxD,MAAMsU,EAA2Brd,KAAKqL,WAAW+R,WAAW/R,GAAeA,EAAWtC,cACtF,IAAkC,IAA9BsU,EAAiC,CACpCrd,KAAKqL,WAAWgS,GAA0BzR,OACzC5L,KAAK4a,eACL5a,KAAK6a,eACL7a,KAAK2a,UACL,EACA3a,KAAK6I,YACL7I,KAAK8I,cAE6B9I,KAAKqL,WAAWgS,GAA0B7Q,kBAC5ExM,KAAK+J,eACLmB,KAGAlL,KAAKqL,WAAWgS,GAA0BtU,aAAc,EACxD/I,KAAKgd,2BAA4B,EACjCpS,YAAW,KACV5K,KAAKgd,2BAA4B,CAAI,GACnChd,KAAK+c,uBAEV,CACD,CAED,CAEgB,GAAAtM,CAAIoI,EAAmBC,EAAmB5N,GACzD,GAAIlL,KAAK+I,YACR,OAGD,MAAMuC,EAAaJ,EAAW3B,UAAY2B,EAAWgJ,KAAO,EAAIlU,KAAKuJ,UAAYvJ,KAAK8N,aAChFvC,EAAaL,EAAW1B,UAAY0B,EAAWgJ,KAAO,EAAIlU,KAAKwJ,UAAYxJ,KAAK8N,aACtF,IAAIpF,EAAQd,KAAK8S,MAAMnP,EAAID,GACvB5C,EAAQ,IACXA,GAAS,EAAId,KAAKC,IAEnB7H,KAAK2a,SAAWjS,CACjB,EC3FM,MAAMsX,EAOZ,WAAAjgB,CAAYgK,EAAgCf,GAJrC,KAAAH,YAAc,IACd,KAAAC,aAAe,IAIrB9I,KAAK+J,eAAiBA,EACtB/J,KAAK0U,WAAa,IAAI3D,EAAW,eAAgB/Q,KAAK6I,YAAa7I,KAAK8I,aAAciB,GACtF/J,KAAKgJ,aAAeA,CACrB,CAEO,IAAArG,GACN3C,KAAK0U,WAAW/R,MACjB,CAEO,KAAAN,GACNrC,KAAK0U,WAAWrS,OACjB,EAGM,MAAM4d,UAAeD,EAC3B,WAAAjgB,CAAYiJ,GACX,MAAMqM,EAAgB,IAAIvD,EAAS,IAAK,IAAK,GAAI,KAC3C/H,EAAiB,IAAIiI,EAAe,mBAAoB,IAAM,IAAK,CAACqD,IAC1EtI,MAAMhD,EAAgBf,GACtB,MAAMkX,EAAiB,IAAIN,EAC1B5f,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,IACAnF,EACAf,GAEDhJ,KAAK0U,WAAW9C,aAAasO,GAE7B,MAAMhV,EAAa,IAAI2T,EACtB7e,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,IACAnF,EACAf,GAEDhJ,KAAK0U,WAAW7C,cAAc3G,EAC/B,EAGM,MAAMiV,UAAeH,EAC3B,WAAAjgB,CAAYiJ,GACX,MAAMqM,EAAgB,IAAIvD,EAAS,IAAK,IAAK,GAAI,KAC3C/H,EAAiB,IAAIiI,EAAe,mBAAoB,IAAM,IAAK,CAACqD,IAC1EtI,MAAMhD,EAAgBf,GAEtB,MAAMoX,EAAkB,IAAIR,EAC3B5f,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,IACAnF,EACAf,GAEKqX,EAAkB,IAAIT,EAC3B5f,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,IACAnF,EACAf,GAEKsX,EAAkB,IAAIV,EAC3B5f,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,IACAnF,EACAf,GAEDhJ,KAAK0U,WAAW9C,aAAawO,GAC7BpgB,KAAK0U,WAAW9C,aAAayO,GAC7BrgB,KAAK0U,WAAW9C,aAAa0O,GAE7B,MAAMpV,EAAa,IAAI2T,EACtB7e,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,IACAnF,EACAf,GAEDhJ,KAAK0U,WAAW7C,cAAc3G,EAC/B,EAGM,MAAMqV,UAAeP,EAC3B,WAAAjgB,CAAYiJ,GACX,MAAMqM,EAAgB,IAAIvD,EAAS,IAAK,IAAK,GAAI,KAC3C/H,EAAiB,IAAIiI,EAAe,mBAAoB,IAAM,IAAK,CAACqD,IAC1EtI,MAAMhD,EAAgBf,GACtB,MAAMwX,EAA0B,CAAC,IAAIvT,EAAkB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAMjE,IACtEyX,EAAS,IAAIjB,EAClBxf,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,IACAnF,EACAyW,EACAxX,GAEDhJ,KAAK0U,WAAW9C,aAAa6O,GAE7B,MAAMvV,EAAa,IAAI2T,EACtB7e,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,IACAnF,EACAf,GAEDhJ,KAAK0U,WAAW7C,cAAc3G,EAC/B,EAGM,MAAMwV,UAAeV,EAC3B,WAAAjgB,CAAYiJ,GACX,MAAMqM,EAAgB,IAAIvD,EAAS,IAAK,IAAK,IAAK,IAC5C6O,EAAiB,IAAI7O,EAAS,IAAK,IAAK,IAAK,IAC7C/H,EAAiB,IAAIiI,EAAe,mBAAoB,IAAM,IAAK,CAACqD,EAAKsL,IAC/E5T,MAAMhD,EAAgBf,GACtB,MAAM4X,EAA0B,CAAC,IAAI5T,EAAkB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAMhE,IAEtEsO,EAAqC,IAAIE,EAAiBxX,KAAK0U,WAAY1U,KAAK+J,gBAAgB,GAChG4S,EAAuB,IAAIvF,EAAgBE,GAC3CmJ,EAAS,IAAIpB,EAClBrf,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,GACAnF,EACA6W,EARyB,GAUzBjE,EACA3T,GAEDhJ,KAAK0U,WAAW9C,aAAa6O,GAE7B,MAAMvV,EAAa,IAAI2T,EACtB7e,KAAK0U,WAAWxD,aAAahC,OAC7B,GACA,IACAnF,EACAf,GAEDhJ,KAAK0U,WAAW7C,cAAc3G,EAC/B,EAGM,MAAM2V,UAAeb,EAC3B,WAAAjgB,CAAYiJ,GACX,MAAMqM,EAAgB,IAAIvD,EAAS,IAAK,IAAK,IAAK,KAC5C6O,EAAiB,IAAI7O,EAAS,IAAK,IAAK,GAAI,KAC5CgP,EAAiB,IAAIhP,EAAS,IAAK,IAAK,GAAI,KAC5C/H,EAAiB,IAAIiI,EAAe,mBAAoB,IAAM,IAAK,CAACqD,EAAKsL,EAAMG,IACrF/T,MAAMhD,EAAgBf,GACtB,MAAM4X,EAA0B,CAAC,IAAI5T,EAAkB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAMhE,IACtEwX,EAA0B,CAAC,IAAIvT,EAAkB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAMjE,IAEtEqJ,EAAiC,IAAIoC,EAAezU,KAAK0U,WAAY1U,KAAK+J,gBAAgB,GAC1F4S,EAAuB,IAAIvK,EAAeC,GAC1C0O,EAAU,IAAI1B,EACnBrf,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,IACAnF,EACA6W,EARyB,GAUzBjE,EACA3T,GAEKyX,EAAS,IAAIjB,EAClBxf,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,IACAnF,EACAyW,EACAxX,GAEKgY,EAAU,IAAIpB,EAAe5f,KAAK0U,WAAWxD,aAAahC,OAAQ,IAAK,IAAKnF,EAAgBf,GAClGhJ,KAAK0U,WAAW9C,aAAamP,GAC7B/gB,KAAK0U,WAAW9C,aAAa6O,GAC7BzgB,KAAK0U,WAAW9C,aAAaoP,GAE7B,MAAM9V,EAAa,IAAI2T,EACtB7e,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,IACAnF,EACAf,GAEDhJ,KAAK0U,WAAW7C,cAAc3G,EAC/B,EAGM,MAAM+V,UAAejB,EAC3B,WAAAjgB,CAAYiJ,GACX,MAAMqM,EAAgB,IAAIvD,EAAS,IAAK,IAAK,IAAK,KAC5C6O,EAAiB,IAAI7O,EAAS,IAAK,IAAK,GAAI,KAC5C/H,EAAiB,IAAIiI,EAAe,mBAAoB,IAAM,IAAK,CAACqD,EAAKsL,IAC/E5T,MAAMhD,EAAgBf,GAEtB,MAAMkY,EAAqB,CAC1B,IAAIzS,EAAU,EAAG,GAAG,EAAMzF,GAC1B,IAAIyF,EAAU,EAAG,GAAG,EAAMzF,GAC1B,IAAIyF,EAAU,EAAG,GAAG,EAAMzF,IAErBmY,EAAsB,CAC3B,IAAI1S,EAAU,EAAG,GAAG,EAAMzF,GAC1B,IAAIyF,EAAU,EAAG,GAAG,EAAMzF,GAC1B,IAAIyF,EAAU,EAAG,GAAG,EAAMzF,IAErBoY,EAAsB,CAC3B,IAAI3S,EAAU,EAAG,GAAG,EAAMzF,GAC1B,IAAIyF,EAAU,EAAG,GAAG,EAAMzF,GAC1B,IAAIyF,EAAU,EAAG,GAAG,EAAMzF,IAGrBqJ,EAAiC,IAAIoC,EAAezU,KAAK0U,WAAY1U,KAAK+J,gBAAgB,GAC1FsX,EAAkC,IAAI5M,EAAezU,KAAK0U,WAAY1U,KAAK+J,gBAAgB,GAC3FuX,EAAkC,IAAI7M,EAAezU,KAAK0U,WAAY1U,KAAK+J,gBAAgB,GAC3FwX,EAAwB,IAAInP,EAAeC,GAC3CmP,EAAwB,IAAIpP,EAAeiP,GAC3CI,EAAwB,IAAIrP,EAAekP,GAC3Cb,EAAS,IAAI5D,EAClB7c,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,IACAnF,EACA,CAAC,IAAIiD,EAAkB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAMhE,IAC5CkY,EACAK,EACAvY,GAEKgY,EAAU,IAAInE,EACnB7c,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,IACAnF,EACA,CAAC,IAAIiD,EAAkB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAMhE,IAC5CmY,EACAK,EACAxY,GAEK+X,EAAU,IAAIlE,EACnB7c,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,IACAnF,EACA,CAAC,IAAIiD,EAAkB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAMhE,IAC5CoY,EACAK,EACAzY,GAGDhJ,KAAK0U,WAAW9C,aAAa6O,GAC7BzgB,KAAK0U,WAAW9C,aAAaoP,GAC7BhhB,KAAK0U,WAAW9C,aAAamP,GAE7B,MAAM7V,EAAa,IAAI2T,EACtB7e,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,IACAnF,EACAf,GAEDhJ,KAAK0U,WAAW7C,cAAc3G,EAC/B,EAGM,MAAMwW,UAAe1B,EAC3B,WAAAjgB,CAAYiJ,GACX,MAAM2Y,EAAiB,IAAI7P,EAAS,EAAG,IAAK,IAAK,IAC3C6O,EAAiB,IAAI7O,EAAS,IAAK,IAAK,IAAK,IAE7CgP,EAAiB,IAAIhP,EAAS,EAAG,IAAK,IAAK,IAC3C8P,EAAiB,IAAI9P,EAAS,IAAK,IAAK,IAAK,IAC7C/H,EAAiB,IAAIiI,EAAe,mBAAoB,IAAM,IAAK,CAAC2P,EAAMhB,EAAMG,EAAMc,IAC5F7U,MAAMhD,EAAgBf,GAEtB,MAAM6Y,EAA2B,CAAC,IAAI5U,EAAkB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAMjE,IACvE8Y,EAAU,IAAItC,EACnBxf,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,GACAnF,EACA8X,EACA7Y,GAGK+Y,EAA2B,CAAC,IAAI9U,EAAkB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAMjE,IACvEgY,EAAU,IAAIxB,EACnBxf,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,IACAnF,EACAgY,EACA/Y,GAGKgZ,EAA2B,CAAC,IAAI/U,EAAkB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAMjE,IACvE+X,EAAU,IAAIvB,EACnBxf,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,IACAnF,EACAiY,EACAhZ,GAGKiZ,EAA2B,CAAC,IAAIhV,EAAkB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAMjE,IACvEkZ,EAAU,IAAI1C,EACnBxf,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,GACAnF,EACAkY,EACAjZ,GAGKmZ,EAA2B,CAAC,IAAIlV,EAAkB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAMjE,IACvEoZ,EAAU,IAAI5C,EACnBxf,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,IACAnF,EACAoY,EACAnZ,GAGDhJ,KAAK0U,WAAW9C,aAAakQ,GAC7B9hB,KAAK0U,WAAW9C,aAAaoP,GAC7BhhB,KAAK0U,WAAW9C,aAAamP,GAC7B/gB,KAAK0U,WAAW9C,aAAasQ,GAC7BliB,KAAK0U,WAAW9C,aAAawQ,GAE7B,MAAMlX,EAAa,IAAI2T,EACtB7e,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,IACAnF,EACAf,GAEDhJ,KAAK0U,WAAW7C,cAAc3G,EAC/B,EAGM,MAAMmX,WAAerC,EAC3B,WAAAjgB,CAAYiJ,GACX,MAAMqM,EAAgB,IAAIvD,EAAS,IAAK,IAAK,GAAI,KAC3C/H,EAAiB,IAAIiI,EAAe,mBAAoB,IAAM,IAAK,CAACqD,IAC1EtI,MAAMhD,EAAgBf,GACtB,MAAM4X,EAA0B,CAC/B,IAAI3T,EAAkB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAMjE,GAC3C,IAAIiE,EAAkB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAMjE,GAC3C,IAAIiE,EAAkB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAMjE,IAEtCsZ,EAA2B,CAChC,IAAIrV,EAAkB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAMjE,GAC3C,IAAIiE,EAAkB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAMjE,GAC3C,IAAIiE,EAAkB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAMjE,IAEtCuZ,EAA2B,CAChC,IAAItV,EAAkB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAMjE,GAC3C,IAAIiE,EAAkB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAMjE,GAC3C,IAAIiE,EAAkB,EAAG,EAAG,EAAG,EAAG,GAAG,EAAMjE,IAGtCkY,EAAqB,CAAC,IAAIxS,EAAS,EAAG,GAAG,EAAM1F,GAAe,IAAI0F,EAAS,EAAG,GAAG,EAAM1F,IACvFmY,EAAsB,CAAC,IAAIzS,EAAS,EAAG,GAAG,EAAM1F,GAAe,IAAI0F,EAAS,EAAG,GAAG,EAAM1F,IACxFoY,EAAsB,CAAC,IAAI1S,EAAS,EAAG,GAAG,EAAM1F,GAAe,IAAI0F,EAAS,EAAG,GAAG,EAAM1F,IAExFqJ,EAAiC,IAAIoC,EAAezU,KAAK0U,WAAY1U,KAAK+J,gBAAgB,GAC1FsX,EAAkC,IAAI5M,EAAezU,KAAK0U,WAAY1U,KAAK+J,gBAAgB,GAC3FuX,EAAkC,IAAI7M,EAAezU,KAAK0U,WAAY1U,KAAK+J,gBAAgB,GAC3FwX,EAAwB,IAAInP,EAAeC,GACjDkP,EAAWjP,iBAAmB,EAC9B,MAAMkP,EAAwB,IAAIpP,EAAeiP,GACjDG,EAAWlP,iBAAmB,GAC9B,MAAMmP,EAAwB,IAAIrP,EAAekP,GACjDG,EAAWnP,iBAAmB,GAC9B,MAAMmO,EAAS,IAAIX,EAClB9f,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,IACAnF,EACA6W,EACAM,EACAK,EACAvY,GAEKgY,EAAU,IAAIlB,EACnB9f,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,IACAnF,EACAuY,EACAnB,EACAK,EACAxY,GAEK+X,EAAU,IAAIjB,EACnB9f,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,IACAnF,EACAwY,EACAnB,EACAK,EACAzY,GAGDhJ,KAAK0U,WAAW9C,aAAa6O,GAC7BzgB,KAAK0U,WAAW9C,aAAaoP,GAC7BhhB,KAAK0U,WAAW9C,aAAamP,GAE7B,MAAM7V,EAAa,IAAI2T,EACtB7e,KAAK0U,WAAWxD,aAAahC,OAC7B,IACA,IACAnF,EACAf,GAEDhJ,KAAK0U,WAAW7C,cAAc3G,EAC/B,ECpboC,ICD9B,MAON,WAAAnL,CAAYyiB,GAHJ,KAAAC,YAAsB7a,KAAK6C,IAAwB,GAApBvK,OAAOgf,WAAkB,KAI/Dlf,KAAK0iB,UAAYF,EACjBxiB,KAAKgJ,aAAe,IAAIlJ,EACcE,KAAKgJ,aAAaxI,eAC3Ca,MAAK,KACjBrB,KAAKgJ,aAAaxG,qBAAqB,IAExCxC,KAAK2iB,kBAAoB,EACzB3iB,KAAK4iB,YAAc,IAAI3C,EAAOjgB,KAAKgJ,cACnChJ,KAAK6iB,YACL7iB,KAAK8iB,eACL9iB,KAAK+iB,iBACN,CAEO,SAAAF,GACN,MAAMG,EAA6B7R,SAAS8R,eAAe,eACvDD,IACHA,EAAOE,YAAc,WAAW,IAElC,CAEO,gBAAAC,GAEN,OADAnjB,KAAK4iB,YAAYjgB,OACT3C,KAAK2iB,mBACZ,KAAK,EAwBL,QACC3iB,KAAK4iB,YAAc,IAAI3C,EAAOjgB,KAAKgJ,cACnC,MAvBD,KAAK,EACJhJ,KAAK4iB,YAAc,IAAIzC,EAAOngB,KAAKgJ,cACnC,MACD,KAAK,EACJhJ,KAAK4iB,YAAc,IAAIrC,EAAOvgB,KAAKgJ,cACnC,MACD,KAAK,EACJhJ,KAAK4iB,YAAc,IAAIlC,EAAO1gB,KAAKgJ,cACnC,MACD,KAAK,EACJhJ,KAAK4iB,YAAc,IAAI/B,EAAO7gB,KAAKgJ,cACnC,MACD,KAAK,EACJhJ,KAAK4iB,YAAc,IAAI3B,EAAOjhB,KAAKgJ,cACnC,MACD,KAAK,EACJhJ,KAAK4iB,YAAc,IAAIlB,EAAO1hB,KAAKgJ,cACnC,MACD,KAAK,EACJhJ,KAAK4iB,YAAc,IAAIP,GAAOriB,KAAKgJ,cAMrChJ,KAAK4iB,YAAYvgB,OAClB,CAEQ,YAAAygB,GACP,MAAMM,EAEE,GAFFA,EAIC,GAEDC,EAAyBrjB,KAAKyiB,YAAcW,EAAcA,EAE1DvU,EAA+C,QAEnDxF,OAAO,CAAC,EAAGrJ,KAAK0iB,YAChBpZ,MAAM,CAAC,EAAG+Z,IACVC,OAAM,GAQFC,EAN8D,MAC3D,WACPC,OAAO,OACPC,KAAK,QAASzjB,KAAKyiB,aACnBgB,KAAK,SAAU,IAGfD,OAAO,KACPC,KAAK,YAAa,aAAaL,UAEjCG,EAAYC,OAAO,KAAKE,KAAK,MAAc7U,GAAO8U,MAAM3jB,KAAK0iB,WAAWkB,WAAW,MAAU,OAE7F,MAAMC,EAAoEN,EACxEC,OAAO,UACPC,KAAK,KAAM5U,EAAM7O,KAAK2iB,oBACtBc,KAAK,MAAO,IACZA,KAAK,IAAK,IACVK,MAAM,OAAQ,OACdA,MAAM,SAAU,aACZC,EAAmE,QAEvEC,GAAG,QAAS7F,IACZ,MAAMtX,EAAIsX,EAAMtX,EAAIuc,EACda,EAAQrc,KAAKuP,MAAMtI,EAAMqV,OAAOrd,IACtCgd,EAAOJ,KAAK,KAAM5U,EAAMoV,IACxBjkB,KAAKmkB,kBAAkBF,EAAM,IAG/BJ,EAAOH,KAAKK,EACb,CAEQ,eAAAhB,GACP,MAAMqB,EAAkE,MAAU,cAC5EC,EAAa,QAAyBhb,OAAO,CAAC,EAAGrJ,KAAK0iB,YAAYpZ,MAAM,CAAC,YAAa,eAC5F,IAAK,IAAI6C,EAAI,EAAGA,GAAKnM,KAAK0iB,UAAWvW,IAAK,CACzC,MAMMmY,EAN+DF,EACnEZ,OAAO,OACPC,KAAK,QAAS,0BACdO,GAAG,SAAS,IAAMhkB,KAAKmkB,kBAAkBhY,KAIzCqX,OAAO,OACPC,KAAK,QAAS,QACdA,KAAK,SAAU,QAEjBa,EACEd,OAAO,QACPC,KAAK,QAAS,QACdA,KAAK,SAAU,QACfA,KAAK,OAAQY,EAAWlY,IAC1BmY,EACEd,OAAO,QACPC,KAAK,IAAK,OACVA,KAAK,IAAK,OACVA,KAAK,oBAAqB,UAC1BA,KAAK,cAAe,UACpBc,KAAK,SAASpY,IACjB,CACAnM,KAAKmkB,kBAAkBnkB,KAAK2iB,kBAC7B,CAEQ,iBAAAwB,CAAkBF,GACzBjkB,KAAK2iB,kBAAoBsB,EACzB,MAAa,kBACXO,QAAQ,UAAU,CAACC,EAAGtY,IAAMA,EAAI,IAAM8X,IACtCO,QAAQ,YAAY,CAACC,EAAGtY,IAAMA,EAAI,IAAM8X,IAC1C,MAAU,UAAUR,KACnB,KACA,QAEEpa,OAAO,CAAC,EAAGrJ,KAAK0iB,YAChBpZ,MAAM,CAAC,EAAGtJ,KAAKyiB,YAAc,IAH/B,CAGoCwB,IAErCjkB,KAAKmjB,kBACN,GDvJsD,E","sources":["webpack://treads/./src/game/AudioManager.ts","webpack://treads/./src/game/tanks/Tank.ts","webpack://treads/./src/ui/PastelColorPalette.ts","webpack://treads/./src/game/BombFragment.ts","webpack://treads/./src/game/Ammunition.ts","webpack://treads/./src/game/Bomb.ts","webpack://treads/./src/game/GameRenderer.ts","webpack://treads/./src/game/GameCanvas.ts","webpack://treads/./src/game/Obstacle.ts","webpack://treads/./src/game/ObstacleCanvas.ts","webpack://treads/./src/game/navigation/Navigator.ts","webpack://treads/./src/game/navigation/AStarNavigator.ts","webpack://treads/./src/game/Node.ts","webpack://treads/./src/game/navigation/NavigationGrid.ts","webpack://treads/./src/game/navigation/SimpleNavigator.ts","webpack://treads/./src/game/navigation/SimplePathFinder.ts","webpack://treads/./src/game/Reticule.ts","webpack://treads/./src/game/tanks/EnemyTank.ts","webpack://treads/./src/game/tanks/BomberTank.ts","webpack://treads/./src/game/tanks/PlayerTank.ts","webpack://treads/./src/game/tanks/SimpleMovingTank.ts","webpack://treads/./src/game/navigation/StationaryNavigator.ts","webpack://treads/./src/game/tanks/StationaryRandomAimTank.ts","webpack://treads/./src/game/tanks/StationaryTank.ts","webpack://treads/./src/game/tanks/SuperBomberMovingTank.ts","webpack://treads/./src/game/Level.ts","webpack://treads/./src/index.ts","webpack://treads/./src/ui/LevelSelector.ts"],"sourcesContent":["import ammunitionExplode from '../assets/audio/ammunitionExplode.mp3';\nimport backgroundMusic from '../assets/audio/backgroundMusic.mp3';\nimport bombExplode from '../assets/audio/bombExplode.mp3';\nimport tankDestroy from '../assets/audio/tankDestroy.mp3';\nimport tankFire from '../assets/audio/tankFire.mp3';\n\nexport enum AudioFile {\n\tTANK_FIRE = 1,\n\tTANK_DESTROY = 2,\n\tBOMB_EXPLODE = 3,\n\tBACKGROUND_MUSIC = 4,\n\tAMMUNITION_EXPLODE = 5,\n}\n\nexport class AudioManager {\n\tprivate audioContext: AudioContext;\n\tprivate audioBuffers: Map<AudioFile, AudioBuffer>;\n\tprivate backgroundMusicSource: AudioBufferSourceNode | null;\n\n\tconstructor() {\n\t\tthis.audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();\n\t\tthis.audioBuffers = new Map();\n\t\tthis.backgroundMusicSource = null;\n\t}\n\n\tloadAllAudio(): Promise<void[]> {\n\t\tconst promises = [\n\t\t\tthis.loadAudio(AudioFile.TANK_FIRE, tankFire),\n\t\t\tthis.loadAudio(AudioFile.TANK_DESTROY, tankDestroy),\n\t\t\tthis.loadAudio(AudioFile.BOMB_EXPLODE, bombExplode),\n\t\t\tthis.loadAudio(AudioFile.BACKGROUND_MUSIC, backgroundMusic),\n\t\t\tthis.loadAudio(AudioFile.AMMUNITION_EXPLODE, ammunitionExplode),\n\t\t];\n\t\treturn Promise.all(promises);\n\t}\n\n\tloadAudio(audioFile: AudioFile, url: string): Promise<void> {\n\t\treturn fetch(url)\n\t\t\t.then((response) => response.arrayBuffer())\n\t\t\t.then((arrayBuffer) => this.audioContext.decodeAudioData(arrayBuffer))\n\t\t\t.then((audioBuffer) => {\n\t\t\t\tthis.audioBuffers.set(audioFile, audioBuffer);\n\t\t\t})\n\t\t\t.catch((error) => console.error(`Error loading audio file: ${url}`, error));\n\t}\n\n\tplay(audioFile: AudioFile): void {\n\t\tconst buffer = this.audioBuffers.get(audioFile);\n\t\tif (buffer) {\n\t\t\tconst source = this.audioContext.createBufferSource();\n\t\t\tsource.buffer = buffer;\n\t\t\tsource.connect(this.audioContext.destination);\n\t\t\tsource.start(0);\n\t\t} else {\n\t\t\tconsole.warn(`Audio buffer for ${audioFile} not found`);\n\t\t}\n\t}\n\n\tgetAudioContext(): AudioContext {\n\t\treturn this.audioContext;\n\t}\n\n\tplayBackgroundMusic(): void {\n\t\tconst buffer = this.audioBuffers.get(AudioFile.BACKGROUND_MUSIC);\n\t\tif (buffer) {\n\t\t\tthis.stopBackgroundMusic();\n\t\t\tthis.backgroundMusicSource = this.audioContext.createBufferSource();\n\t\t\tthis.backgroundMusicSource.buffer = buffer;\n\t\t\tthis.backgroundMusicSource.loop = true;\n\t\t\tthis.backgroundMusicSource.connect(this.audioContext.destination);\n\t\t\tthis.backgroundMusicSource.start(0);\n\t\t} else {\n\t\t\tconsole.warn(`Background music buffer not found`);\n\t\t}\n\t}\n\n\tstopBackgroundMusic(): void {\n\t\tif (this.backgroundMusicSource) {\n\t\t\tthis.backgroundMusicSource.stop(0);\n\t\t\tthis.backgroundMusicSource.disconnect();\n\t\t\tthis.backgroundMusicSource = null;\n\t\t}\n\t}\n}\n","import { Ammunition } from '../Ammunition';\nimport { AudioManager } from '../AudioManager';\nimport { Bomb } from '../Bomb';\nimport { BombFragment } from '../BombFragment';\nimport { ObstacleCanvas } from '../ObstacleCanvas';\nimport { Reticule } from '../Reticule';\n\nexport enum Direction {\n\tNORTH = 1,\n\tSOUTH = 2,\n\tEAST = 3,\n\tWEST = 4,\n\tNORTHEAST = 5,\n\tNORTHWEST = 6,\n\tSOUTHEAST = 7,\n\tSOUTHWEST = 8,\n\tUNKNOWN = 9,\n}\n\nexport class Tank {\n\tpublic xPosition: number;\n\tpublic yPosition: number;\n\tpublic xLeft: number;\n\tpublic xRight: number;\n\tpublic yTop: number;\n\tpublic yBottom: number;\n\tpublic speed: number;\n\tpublic size: number;\n\tpublic tankMidpoint: number;\n\tpublic color: string;\n\tpublic reticule: Reticule;\n\tpublic gunBarrellWidth = 7;\n\tpublic isDestroyed = false;\n\tpublic isExploding = false;\n\tpublic obstacleCanvas: ObstacleCanvas;\n\tpublic twoPi: number = 2 * Math.PI;\n\tpublic lastDirectionMoved: Direction = Direction.UNKNOWN;\n\tpublic wasLastMoveBlocked = false;\n\tpublic consecutiveDirectionMoves = 0;\n\tpublic audioManager: AudioManager;\n\tpublic aimAngle: number;\n\tpublic aimXPos: number;\n\tpublic aimYPos: number;\n\tpublic xOffset: number;\n\tpublic yOffset: number;\n\tpublic gunBarrellEndX: number;\n\tpublic gunBarrellEndY: number;\n\tpublic ammunition: Ammunition[] = [];\n\tpublic maxAmmunition: number;\n\tpublic bombs: Bomb[] = [];\n\tpublic maxBombs: number;\n\tpublic canvasWidth: number;\n\tpublic canvasHeight: number;\n\tprivate fragments: BombFragment[];\n\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\treticule: Reticule,\n\t\txPosition: number,\n\t\tyPosition: number,\n\t\tspeed: number,\n\t\tsize: number,\n\t\tcolor: string,\n\t\tobstacleCanvas: ObstacleCanvas,\n\t\tammunition: Ammunition[],\n\t\tbombs: Bomb[],\n\t\taudioManager: AudioManager\n\t) {\n\t\tthis.reticule = reticule;\n\t\tthis.xPosition = xPosition;\n\t\tthis.yPosition = yPosition;\n\t\tthis.xLeft = xPosition;\n\t\tthis.xRight = xPosition + size;\n\t\tthis.yTop = yPosition;\n\t\tthis.yBottom = yPosition + size;\n\t\tthis.speed = speed;\n\t\tthis.size = size;\n\t\tthis.color = color;\n\t\tthis.canvasWidth = canvas.width;\n\t\tthis.canvasHeight = canvas.height;\n\t\tthis.obstacleCanvas = obstacleCanvas;\n\t\tthis.tankMidpoint = this.size / 2;\n\t\tthis.ammunition = ammunition;\n\t\tthis.maxAmmunition = ammunition.length;\n\t\tthis.bombs = bombs;\n\t\tthis.maxBombs = bombs.length;\n\t\tthis.audioManager = audioManager;\n\t\tconst canvasRect: DOMRect = canvas.getBoundingClientRect();\n\t\tthis.xOffset = canvasRect.left;\n\t\tthis.yOffset = canvasRect.top;\n\t\t// Set the initital X and Y aim position to the center of the canvas\n\t\tthis.aimXPos = canvas.width / 2;\n\t\tthis.aimYPos = canvas.height / 2;\n\n\t\tconst dx: number = this.aimXPos - this.xPosition - this.tankMidpoint;\n\t\tconst dy: number = this.aimYPos - this.yPosition - this.tankMidpoint;\n\t\tlet theta = Math.atan2(dy, dx);\n\t\tif (theta < 0) {\n\t\t\ttheta += 2 * Math.PI;\n\t\t}\n\t\tthis.aimAngle = theta;\n\n\t\tthis.gunBarrellEndX = this.xPosition + this.tankMidpoint + Math.cos(this.aimAngle) * this.size;\n\t\tthis.gunBarrellEndY = this.yPosition + this.tankMidpoint + Math.sin(this.aimAngle) * this.size;\n\n\t\tthis.fragments = [];\n\t}\n\n\tpublic draw(context: CanvasRenderingContext2D): void {\n\t\tif (this.isDestroyed) {\n\t\t\tif (this.isExploding) {\n\t\t\t\tthis.updateExplosion(context);\n\t\t\t}\n\t\t\tcontext.strokeStyle = this.color;\n\t\t\tcontext.lineWidth = 5;\n\t\t\tcontext.setLineDash([]);\n\t\t\tconst xLength = 12;\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(this.xPosition + this.tankMidpoint - xLength, this.yPosition + this.tankMidpoint - xLength);\n\t\t\tcontext.lineTo(this.xPosition + this.tankMidpoint + xLength, this.yPosition + this.tankMidpoint + xLength);\n\t\t\tcontext.stroke();\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(this.xPosition + this.tankMidpoint - xLength, this.yPosition + this.tankMidpoint + xLength);\n\t\t\tcontext.lineTo(this.xPosition + this.tankMidpoint + xLength, this.yPosition + this.tankMidpoint - xLength);\n\t\t\tcontext.stroke();\n\t\t} else {\n\t\t\tcontext.fillStyle = this.color;\n\t\t\tcontext.fillRect(this.xPosition, this.yPosition, this.size, this.size);\n\n\t\t\tcontext.setLineDash([]);\n\t\t\tcontext.lineJoin = 'bevel';\n\t\t\tcontext.strokeStyle = 'black';\n\t\t\tcontext.lineWidth = 2;\n\t\t\tcontext.strokeRect(this.xPosition, this.yPosition, this.size, this.size);\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.arc(this.xPosition + this.tankMidpoint, this.yPosition + this.tankMidpoint, this.size / 3, 0, this.twoPi);\n\t\t\tcontext.stroke();\n\n\t\t\tthis.gunBarrellEndX = this.xPosition + this.tankMidpoint + Math.cos(this.aimAngle) * this.size;\n\t\t\tthis.gunBarrellEndY = this.yPosition + this.tankMidpoint + Math.sin(this.aimAngle) * this.size;\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(this.xPosition + this.tankMidpoint, this.yPosition + this.tankMidpoint);\n\t\t\tcontext.lineTo(this.gunBarrellEndX, this.gunBarrellEndY);\n\t\t\tcontext.lineWidth = this.gunBarrellWidth;\n\t\t\tcontext.stroke();\n\t\t}\n\t}\n\n\tpublic destroy(): void {\n\t\tthis.isDestroyed = true;\n\t\tthis.isExploding = true;\n\t\tthis.createFragments();\n\t\tsetTimeout((): void => {\n\t\t\tthis.isExploding = false;\n\t\t}, 1000);\n\t}\n\n\tcreateFragments(): void {\n\t\tconst fragmentCount = 50;\n\t\tfor (let i = 0; i < fragmentCount; i++) {\n\t\t\tconst angle = Math.random() * 2 * Math.PI;\n\t\t\tconst speed = Math.random() * 5 + 2;\n\t\t\tconst velocityX = Math.cos(angle) * speed;\n\t\t\tconst velocityY = Math.sin(angle) * speed;\n\t\t\tconst grayValue = Math.floor(Math.random() * 256);\n\t\t\tconst alphaValue = Math.random() * 0.5 + 0.5;\n\t\t\tconst fragmentColor = `rgba(${grayValue}, ${grayValue}, ${grayValue}, ${alphaValue})`;\n\t\t\tconst fragment = new BombFragment(\n\t\t\t\tthis.xPosition + this.tankMidpoint,\n\t\t\t\tthis.yPosition + this.tankMidpoint,\n\t\t\t\tMath.random() * 2 + 1,\n\t\t\t\tfragmentColor,\n\t\t\t\tvelocityX,\n\t\t\t\tvelocityY,\n\t\t\t\t10\n\t\t\t);\n\t\t\tthis.fragments.push(fragment);\n\t\t}\n\t}\n\n\tupdateExplosion(context: CanvasRenderingContext2D): void {\n\t\tthis.fragments.forEach((particle) => {\n\t\t\tparticle.update();\n\t\t\tparticle.draw(context);\n\t\t});\n\n\t\tthis.fragments = this.fragments.filter((particle) => particle.life > 0);\n\t}\n\n\tpublic updatePosition(\n\t\tcurrentTank: Tank,\n\t\tplayerTank: Tank,\n\t\tenemyTanks: Tank[],\n\t\tammunition: Ammunition[],\n\t\tbombs: Bomb[]\n\t): void {\n\t\treturn;\n\t}\n\n\tpublic aim(mouseXPos: number, mouseYpos: number, playerTank: Tank): void {\n\t\treturn;\n\t}\n\n\tpublic shoot(playerTank: Tank): void {\n\t\treturn;\n\t}\n\n\tpublic plantBomb(playerTank: Tank): void {\n\t\treturn;\n\t}\n\n\tpublic moveInLastDirectionMoved(): void {\n\t\tthis.moveInCardinalDirection(this.lastDirectionMoved);\n\t}\n\n\tpublic getRandomDirection<Direction>(): Direction[keyof Direction] {\n\t\tconst enumValues = Object.keys(Direction)\n\t\t\t.map((n) => Number.parseInt(n))\n\t\t\t.filter((n) => !Number.isNaN(n)) as unknown as Direction[keyof Direction][];\n\t\tconst randomIndex = Math.floor(Math.random() * enumValues.length);\n\t\tconst randomEnumValue = enumValues[randomIndex];\n\t\treturn randomEnumValue;\n\t}\n\n\tpublic moveInCardinalDirection(direction: Direction): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\t\tswitch (direction) {\n\t\t\tcase Direction.NORTH: {\n\t\t\t\tthis.moveNorth();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase Direction.SOUTH: {\n\t\t\t\tthis.moveSouth();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase Direction.EAST: {\n\t\t\t\tthis.moveEast();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase Direction.WEST: {\n\t\t\t\tthis.moveWest();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase Direction.NORTHEAST: {\n\t\t\t\tthis.moveNorthEast();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase Direction.NORTHWEST: {\n\t\t\t\tthis.moveNorthWest();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase Direction.SOUTHEAST: {\n\t\t\t\tthis.moveSouthEast();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase Direction.SOUTHWEST: {\n\t\t\t\tthis.moveSouthWest();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tconst enumValues = Object.values(Direction).filter((value) => typeof value === 'number') as Direction[];\n\t\t\t\tconst randomIndex = Math.floor(Math.random() * enumValues.length);\n\t\t\t\tthis.moveInCardinalDirection(enumValues[randomIndex]);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic moveNorth(): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.lastDirectionMoved == Direction.NORTH) {\n\t\t\tthis.consecutiveDirectionMoves += 1;\n\t\t} else {\n\t\t\tthis.consecutiveDirectionMoves = 0;\n\t\t}\n\t\tthis.lastDirectionMoved = Direction.NORTH;\n\t\tlet blocked = false;\n\t\tfor (const obstacle of this.obstacleCanvas.obstacles) {\n\t\t\tif (\n\t\t\t\tthis.yPosition - this.speed < obstacle.yTop + obstacle.height &&\n\t\t\t\tthis.yPosition > obstacle.yTop &&\n\t\t\t\tobstacle.xLeft < this.xPosition + this.size &&\n\t\t\t\tthis.xPosition < obstacle.xRight\n\t\t\t) {\n\t\t\t\tthis.yPosition = obstacle.yBottom;\n\t\t\t\tblocked = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!blocked) {\n\t\t\tthis.yPosition = Math.max(this.yPosition - this.speed, 0);\n\t\t} else {\n\t\t\tthis.wasLastMoveBlocked = true;\n\t\t}\n\t}\n\n\tpublic moveSouth(): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.lastDirectionMoved == Direction.SOUTH) {\n\t\t\tthis.consecutiveDirectionMoves += 1;\n\t\t} else {\n\t\t\tthis.consecutiveDirectionMoves = 0;\n\t\t}\n\t\tthis.lastDirectionMoved = Direction.SOUTH;\n\t\tlet blocked = false;\n\t\tfor (const obstacle of this.obstacleCanvas.obstacles) {\n\t\t\tif (\n\t\t\t\tthis.yPosition + this.speed + this.size > obstacle.yTop &&\n\t\t\t\tthis.yPosition < obstacle.yTop + obstacle.height &&\n\t\t\t\tobstacle.xLeft < this.xPosition + this.size &&\n\t\t\t\tthis.xPosition < obstacle.xRight\n\t\t\t) {\n\t\t\t\tthis.yPosition = obstacle.yTop - this.size;\n\t\t\t\tblocked = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!blocked) {\n\t\t\tthis.yPosition = Math.min(this.yPosition + this.speed, this.canvasHeight - this.size);\n\t\t} else {\n\t\t\tthis.wasLastMoveBlocked = true;\n\t\t}\n\t}\n\n\tpublic moveWest(): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.lastDirectionMoved == Direction.WEST) {\n\t\t\tthis.consecutiveDirectionMoves += 1;\n\t\t} else {\n\t\t\tthis.consecutiveDirectionMoves = 0;\n\t\t}\n\t\tthis.lastDirectionMoved = Direction.WEST;\n\t\tlet blocked = false;\n\t\tfor (const obstacle of this.obstacleCanvas.obstacles) {\n\t\t\tif (\n\t\t\t\tthis.xPosition - this.speed < obstacle.xRight &&\n\t\t\t\tthis.xPosition > obstacle.xLeft &&\n\t\t\t\tobstacle.yTop < this.yPosition + this.size &&\n\t\t\t\tthis.yPosition < obstacle.yBottom\n\t\t\t) {\n\t\t\t\tthis.xPosition = obstacle.xRight;\n\t\t\t\tblocked = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!blocked) {\n\t\t\tthis.xPosition = Math.max(this.xPosition - this.speed, 0);\n\t\t} else {\n\t\t\tthis.wasLastMoveBlocked = true;\n\t\t}\n\t}\n\n\tpublic moveEast(): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.lastDirectionMoved == Direction.EAST) {\n\t\t\tthis.consecutiveDirectionMoves += 1;\n\t\t} else {\n\t\t\tthis.consecutiveDirectionMoves = 0;\n\t\t}\n\t\tthis.lastDirectionMoved = Direction.EAST;\n\t\tlet blocked = false;\n\t\tfor (const obstacle of this.obstacleCanvas.obstacles) {\n\t\t\tif (\n\t\t\t\tthis.xPosition + this.speed + this.size > obstacle.xLeft &&\n\t\t\t\tthis.xPosition < obstacle.xLeft + obstacle.width &&\n\t\t\t\tobstacle.yTop < this.yPosition + this.size &&\n\t\t\t\tthis.yPosition < obstacle.yBottom\n\t\t\t) {\n\t\t\t\tthis.xPosition = obstacle.xLeft - this.size;\n\t\t\t\tblocked = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!blocked) {\n\t\t\tthis.xPosition = Math.min(this.xPosition + this.speed, this.canvasWidth - this.size);\n\t\t} else {\n\t\t\tthis.wasLastMoveBlocked = true;\n\t\t}\n\t}\n\n\tpublic moveNorthEast(): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.lastDirectionMoved == Direction.NORTHEAST) {\n\t\t\tthis.consecutiveDirectionMoves += 1;\n\t\t} else {\n\t\t\tthis.consecutiveDirectionMoves = 0;\n\t\t}\n\t\tthis.lastDirectionMoved = Direction.NORTHEAST;\n\t\tlet blockedNorth = false;\n\t\tlet blockedEast = false;\n\t\tfor (const obstacle of this.obstacleCanvas.obstacles) {\n\t\t\tif (\n\t\t\t\t!blockedNorth &&\n\t\t\t\tthis.yPosition - this.speed < obstacle.yTop + obstacle.height &&\n\t\t\t\tthis.yPosition > obstacle.yTop &&\n\t\t\t\tobstacle.xLeft < this.xPosition + this.size &&\n\t\t\t\tthis.xPosition < obstacle.xRight\n\t\t\t) {\n\t\t\t\tthis.yPosition = obstacle.yBottom;\n\t\t\t\tblockedNorth = true;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t!blockedEast &&\n\t\t\t\tthis.xPosition + this.speed + this.size > obstacle.xLeft &&\n\t\t\t\tthis.xPosition < obstacle.xLeft + obstacle.width &&\n\t\t\t\tobstacle.yTop < this.yPosition + this.size &&\n\t\t\t\tthis.yPosition < obstacle.yBottom\n\t\t\t) {\n\t\t\t\tthis.xPosition = obstacle.xLeft - this.size;\n\t\t\t\tblockedEast = true;\n\t\t\t}\n\t\t}\n\t\tif (blockedNorth && blockedEast) {\n\t\t\tthis.wasLastMoveBlocked = true;\n\t\t}\n\t\tif (!blockedNorth) {\n\t\t\tthis.yPosition = Math.max(this.yPosition - this.speed, 0);\n\t\t}\n\t\tif (!blockedEast) {\n\t\t\tthis.xPosition = Math.min(this.xPosition + this.speed, this.canvasWidth - this.size);\n\t\t}\n\t}\n\n\tpublic moveNorthWest(): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.lastDirectionMoved == Direction.NORTHWEST) {\n\t\t\tthis.consecutiveDirectionMoves += 1;\n\t\t} else {\n\t\t\tthis.consecutiveDirectionMoves = 0;\n\t\t}\n\t\tthis.lastDirectionMoved = Direction.NORTHWEST;\n\t\tlet blockedNorth = false;\n\t\tlet blockedWest = false;\n\t\tfor (const obstacle of this.obstacleCanvas.obstacles) {\n\t\t\tif (\n\t\t\t\t!blockedNorth &&\n\t\t\t\tthis.yPosition - this.speed < obstacle.yTop + obstacle.height &&\n\t\t\t\tthis.yPosition > obstacle.yTop &&\n\t\t\t\tobstacle.xLeft < this.xPosition + this.size &&\n\t\t\t\tthis.xPosition < obstacle.xRight\n\t\t\t) {\n\t\t\t\tthis.yPosition = obstacle.yBottom;\n\t\t\t\tblockedNorth = true;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t!blockedWest &&\n\t\t\t\tthis.xPosition - this.speed < obstacle.xRight &&\n\t\t\t\tthis.xPosition > obstacle.xLeft &&\n\t\t\t\tobstacle.yTop < this.yPosition + this.size &&\n\t\t\t\tthis.yPosition < obstacle.yBottom\n\t\t\t) {\n\t\t\t\tthis.xPosition = obstacle.xRight;\n\t\t\t\tblockedWest = true;\n\t\t\t}\n\t\t}\n\t\tif (blockedNorth && blockedWest) {\n\t\t\tthis.wasLastMoveBlocked = true;\n\t\t}\n\t\tif (!blockedNorth) {\n\t\t\tthis.yPosition = Math.max(this.yPosition - this.speed, 0);\n\t\t}\n\t\tif (!blockedWest) {\n\t\t\tthis.xPosition = Math.max(this.xPosition - this.speed, 0);\n\t\t}\n\t}\n\n\tpublic moveSouthEast(): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.lastDirectionMoved == Direction.SOUTHEAST) {\n\t\t\tthis.consecutiveDirectionMoves += 1;\n\t\t} else {\n\t\t\tthis.consecutiveDirectionMoves = 0;\n\t\t}\n\t\tthis.lastDirectionMoved = Direction.SOUTHEAST;\n\t\tlet blockedSouth = false;\n\t\tlet blockedEast = false;\n\t\tfor (const obstacle of this.obstacleCanvas.obstacles) {\n\t\t\tif (\n\t\t\t\t!blockedSouth &&\n\t\t\t\tthis.yPosition + this.speed + this.size > obstacle.yTop &&\n\t\t\t\tthis.yPosition < obstacle.yTop + obstacle.height &&\n\t\t\t\tobstacle.xLeft < this.xPosition + this.size &&\n\t\t\t\tthis.xPosition < obstacle.xRight\n\t\t\t) {\n\t\t\t\tthis.yPosition = obstacle.yTop - this.size;\n\t\t\t\tblockedSouth = true;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t!blockedEast &&\n\t\t\t\tthis.xPosition + this.speed + this.size > obstacle.xLeft &&\n\t\t\t\tthis.xPosition < obstacle.xLeft + obstacle.width &&\n\t\t\t\tobstacle.yTop < this.yPosition + this.size &&\n\t\t\t\tthis.yPosition < obstacle.yBottom\n\t\t\t) {\n\t\t\t\tthis.xPosition = obstacle.xLeft - this.size;\n\t\t\t\tblockedEast = true;\n\t\t\t}\n\t\t}\n\t\tif (blockedSouth && blockedEast) {\n\t\t\tthis.wasLastMoveBlocked = true;\n\t\t}\n\t\tif (!blockedSouth) {\n\t\t\tthis.yPosition = Math.min(this.yPosition + this.speed, this.canvasHeight - this.size);\n\t\t}\n\t\tif (!blockedEast) {\n\t\t\tthis.xPosition = Math.min(this.xPosition + this.speed, this.canvasWidth - this.size);\n\t\t}\n\t}\n\n\tpublic moveSouthWest(): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.lastDirectionMoved == Direction.SOUTHWEST) {\n\t\t\tthis.consecutiveDirectionMoves += 1;\n\t\t} else {\n\t\t\tthis.consecutiveDirectionMoves = 0;\n\t\t}\n\t\tthis.lastDirectionMoved = Direction.SOUTHWEST;\n\t\tlet blockedSouth = false;\n\t\tlet blockedWest = false;\n\t\tfor (const obstacle of this.obstacleCanvas.obstacles) {\n\t\t\tif (\n\t\t\t\t!blockedSouth &&\n\t\t\t\tthis.yPosition + this.speed + this.size > obstacle.yTop &&\n\t\t\t\tthis.yPosition < obstacle.yTop + obstacle.height &&\n\t\t\t\tobstacle.xLeft < this.xPosition + this.size &&\n\t\t\t\tthis.xPosition < obstacle.xRight\n\t\t\t) {\n\t\t\t\tthis.yPosition = obstacle.yTop - this.size;\n\t\t\t\tblockedSouth = true;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t!blockedWest &&\n\t\t\t\tthis.xPosition - this.speed < obstacle.xRight &&\n\t\t\t\tthis.xPosition > obstacle.xLeft &&\n\t\t\t\tobstacle.yTop < this.yPosition + this.size &&\n\t\t\t\tthis.yPosition < obstacle.yBottom\n\t\t\t) {\n\t\t\t\tthis.xPosition = obstacle.xRight;\n\t\t\t\tblockedWest = true;\n\t\t\t}\n\t\t}\n\t\tif (blockedSouth && blockedWest) {\n\t\t\tthis.wasLastMoveBlocked = true;\n\t\t}\n\t\tif (!blockedSouth) {\n\t\t\tthis.yPosition = Math.min(this.yPosition + this.speed, this.canvasHeight - this.size);\n\t\t}\n\t\tif (!blockedWest) {\n\t\t\tthis.xPosition = Math.max(this.xPosition - this.speed, 0);\n\t\t}\n\t}\n}\n","export class PastelColorPalette {\n\tpublic static readonly BABY_BLUE = '#ABDEE6';\n\tpublic static readonly LAVENDER_BLUSH = '#CBAACB';\n\tpublic static readonly PALE_YELLOW = '#FFFFB5';\n\tpublic static readonly PEACH_PUFF = '#FFCCB6';\n\tpublic static readonly BLUSH_PINK = '#F3B0C3';\n\tpublic static readonly LIGHT_AQUA = '#C6DBDA';\n\tpublic static readonly LIGHT_PINK = '#FEE1E8';\n\tpublic static readonly LIGHT_CORAL_PINK = '#FED7C3';\n\tpublic static readonly MINT_CREAM = '#F6EAC2';\n\tpublic static readonly PALE_LAVENDER = '#ECD5E3';\n\tpublic static readonly CORAL_ORANGE = '#FF968A';\n\tpublic static readonly SOFT_PEACH = '#FFAEA5';\n\tpublic static readonly LIGHT_SALMON_PINK = '#FFCFB5';\n\tpublic static readonly LIGHT_ROSE = '#FFD8BE';\n\tpublic static readonly SOFT_ORANGE = '#FFC8A2';\n\tpublic static readonly SOFT_TEAL = '#D4F0F0';\n\tpublic static readonly PALE_MINT = '#8FCACA';\n\tpublic static readonly LIGHT_SAGE = '#CCE2CB';\n\tpublic static readonly PALE_GREEN = '#B6CFB6';\n\tpublic static readonly MINT_GREEN = '#97C1A9';\n\tpublic static readonly SOFT_PEACH_PINK = '#FCB9AA';\n\tpublic static readonly PALE_PEACH = '#FFDBCC';\n\tpublic static readonly PALE_GRAY = '#ECE4E4';\n\tpublic static readonly PALE_AQUA = '#A2E1DB';\n\tpublic static readonly SOFT_CYAN = '#55CBCD';\n\tpublic static readonly LIGHT_LAVENDER = '#E3DFFF';\n\tpublic static readonly PALE_BLUE = '#D4F1F9';\n\tpublic static readonly LIGHT_MAUVE = '#DFC9F3';\n\tpublic static readonly LIGHT_LIME = '#E3F6C7';\n\tpublic static readonly LIGHT_GOLDENROD = '#FFF8C3';\n\tpublic static readonly PALE_ORANGE = '#FFDAB9';\n\tpublic static readonly LIGHT_YELLOW = '#FFF9DB';\n\tpublic static readonly LIGHT_IVORY = '#FDFD96';\n\tpublic static readonly LIGHT_TURQUOISE = '#AFF8D8';\n\tpublic static readonly LIGHT_SEA_GREEN = '#D9F9B1';\n\tpublic static readonly LIGHT_PERIWINKLE = '#C5C6E8';\n\tpublic static readonly LIGHT_VIOLET = '#E1C6FF';\n\tpublic static readonly LIGHT_LILAC = '#F2C3E8';\n\tpublic static readonly LIGHT_APRICOT = '#FFE5B4';\n\tpublic static readonly LIGHT_BUTTERSCOTCH = '#FFD27F';\n\tpublic static readonly LIGHT_MELON = '#FFB7A2';\n\tpublic static readonly LIGHT_TEA_GREEN = '#D1F2EB';\n\tpublic static readonly LIGHT_CRIMSON = '#FF7F7F';\n\tpublic static readonly LIGHT_PERSIAN_GREEN = '#00A8A8';\n\tpublic static readonly LIGHT_SKY_BLUE = '#87CEFA';\n\tpublic static readonly LIGHT_PASTEL_PURPLE = '#C3B1E1';\n\tpublic static readonly LIGHT_PASTEL_PINK = '#EFB8C8';\n\tpublic static readonly LIGHT_PASTEL_RED = '#FFA07A';\n\tpublic static readonly LIGHT_PASTEL_BLUE = '#ADD8E6';\n\tpublic static readonly LIGHT_PASTEL_GREEN = '#98FB98';\n\tpublic static readonly LIGHT_PASTEL_ORANGE = '#FFDAB9';\n\tpublic static readonly LIGHT_PASTEL_YELLOW = '#FFFACD';\n\tpublic static readonly PALE_BLACK = '#A9A9A9';\n\tpublic static readonly LIGHT_GRAY = '#D3D3D3';\n\tpublic static readonly GAINSBORO = '#DCDCDC';\n\tpublic static readonly PALE_SILVER = '#C0C0C0';\n\tpublic static readonly PALE_SMOKE = '#F5F5F5';\n\tpublic static readonly WHITE_SMOKE = '#F5F5F5';\n\tpublic static readonly OFF_WHITE = '#FAF9F6';\n\tpublic static readonly IVORY = '#FFFFF0';\n\tpublic static readonly ALABASTER = '#FAEBD7';\n\tpublic static readonly SEASHELL = '#FFF5EE';\n}\n","import { Tank } from './tanks/Tank';\n\nexport class BombFragment {\n\tpublic life: number;\n\n\tprivate x: number;\n\tprivate y: number;\n\tprivate fragmentRadius: number;\n\tprivate fragmentColor: string;\n\tprivate velocityX: number;\n\tprivate velocityY: number;\n\tprivate blastRadius: number;\n\n\tconstructor(x: number, y: number, radius: number, color: string, velocityX: number, velocityY: number, life: number) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.fragmentRadius = radius;\n\t\tthis.fragmentColor = color;\n\t\tthis.velocityX = velocityX;\n\t\tthis.velocityY = velocityY;\n\t\tthis.blastRadius = life;\n\t\tthis.life = life;\n\t}\n\n\tupdate(): void {\n\t\tthis.x += this.velocityX;\n\t\tthis.y += this.velocityY;\n\t\tthis.life -= 1;\n\t}\n\n\tdraw(context: CanvasRenderingContext2D): void {\n\t\tcontext.beginPath();\n\t\tcontext.arc(this.x, this.y, this.fragmentRadius * (this.life / this.blastRadius), 0, Math.PI * 2, false);\n\t\tcontext.fillStyle = this.fragmentColor;\n\t\tcontext.fill();\n\t\tcontext.closePath();\n\t}\n\n\tcheckHit(tank: Tank): boolean {\n\t\treturn (\n\t\t\tthis.x >= tank.xLeft && this.x <= tank.xRight && this.y >= tank.yTop && this.y <= tank.yBottom && this.life > 0\n\t\t);\n\t}\n}\n","import * as d3 from 'd3';\nimport { PastelColorPalette } from '../ui/PastelColorPalette';\nimport { AudioFile, AudioManager } from './AudioManager';\nimport { Bomb } from './Bomb';\nimport { BombFragment } from './BombFragment';\nimport { ObstacleCanvas } from './ObstacleCanvas';\nimport { Tank } from './tanks/Tank';\n\nexport class Ammunition {\n\tpublic xPosition: number;\n\tpublic yPosition: number;\n\tpublic xVelocity: number;\n\tpublic yVelocity: number;\n\tpublic theta: number;\n\tpublic bounces: number;\n\tpublic maxBounces: number;\n\tpublic speed: number;\n\tpublic canvasWidth: number;\n\tpublic canvasHeight: number;\n\tpublic isDestroyed: boolean;\n\tpublic audioManager: AudioManager;\n\tpublic isExploding: boolean = false;\n\tpublic radius: number = 4;\n\tpublic fragmentationRadius: number = 10;\n\tprivate fragments: BombFragment[] = [];\n\tprivate fragmentColorScale = d3\n\t\t.scaleLinear<string>()\n\t\t.domain([0, 0.5, 1])\n\t\t.range([PastelColorPalette.PALE_BLACK, PastelColorPalette.PALE_GRAY, PastelColorPalette.WHITE_SMOKE]);\n\n\tconstructor(\n\t\tstartX: number,\n\t\tstartY: number,\n\t\ttheta: number,\n\t\tspeed: number,\n\t\tmaxBounces: number,\n\t\tcanvasWidth: number,\n\t\tcanvasHeight: number,\n\t\tisDestroyed: boolean,\n\t\taudioManager: AudioManager\n\t) {\n\t\tthis.xPosition = startX;\n\t\tthis.yPosition = startY;\n\t\tthis.theta = theta;\n\t\tthis.speed = speed;\n\t\tthis.xVelocity = Math.cos(this.theta) * this.speed;\n\t\tthis.yVelocity = Math.sin(this.theta) * this.speed;\n\t\tthis.bounces = 0;\n\t\tthis.maxBounces = maxBounces;\n\t\tthis.canvasWidth = canvasWidth;\n\t\tthis.canvasHeight = canvasHeight;\n\t\tthis.isDestroyed = isDestroyed;\n\t\tthis.audioManager = audioManager;\n\t}\n\n\tupdatePosition(obstacleCanvas: ObstacleCanvas): void {\n\t\tif (this.isExploding) {\n\t\t\treturn;\n\t\t}\n\t\tthis.xPosition += this.xVelocity;\n\t\tthis.yPosition += this.yVelocity;\n\n\t\tif (this.xPosition <= 0 || this.xPosition > this.canvasWidth) {\n\t\t\tthis.xVelocity = -this.xVelocity;\n\t\t\tthis.bounces++;\n\t\t}\n\n\t\tif (this.yPosition <= 0 || this.yPosition > this.canvasHeight) {\n\t\t\tthis.yVelocity = -this.yVelocity;\n\t\t\tthis.bounces++;\n\t\t}\n\n\t\tobstacleCanvas.obstacles.forEach((obstacle) => {\n\t\t\tif (\n\t\t\t\tthis.xPosition > obstacle.xLeft &&\n\t\t\t\tthis.xPosition < obstacle.xRight &&\n\t\t\t\tthis.yPosition > obstacle.yTop &&\n\t\t\t\tthis.yPosition < obstacle.yBottom\n\t\t\t) {\n\t\t\t\tthis.bounces++;\n\t\t\t\tconst fromLeft = Math.abs(this.xPosition - obstacle.xLeft);\n\t\t\t\tconst fromRight = Math.abs(this.xPosition - obstacle.xRight);\n\t\t\t\tconst fromTop = Math.abs(this.yPosition - obstacle.yTop);\n\t\t\t\tconst fromBottom = Math.abs(this.yPosition - obstacle.yBottom);\n\t\t\t\tconst minDistance = Math.min(fromLeft, fromRight, fromTop, fromBottom);\n\n\t\t\t\tif (minDistance === fromTop) {\n\t\t\t\t\tthis.yPosition = obstacle.yTop - 1;\n\t\t\t\t\tthis.yVelocity = -this.yVelocity;\n\t\t\t\t} else if (minDistance === fromBottom) {\n\t\t\t\t\tthis.yPosition = obstacle.yBottom + 1;\n\t\t\t\t\tthis.yVelocity = -this.yVelocity;\n\t\t\t\t} else if (minDistance === fromLeft) {\n\t\t\t\t\tthis.xPosition = obstacle.xLeft - 1;\n\t\t\t\t\tthis.xVelocity = -this.xVelocity;\n\t\t\t\t} else if (minDistance === fromRight) {\n\t\t\t\t\tthis.xPosition = obstacle.xRight + 1;\n\t\t\t\t\tthis.xVelocity = -this.xVelocity;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (this.bounces > this.maxBounces) {\n\t\t\tthis.destroy();\n\t\t}\n\t}\n\n\tpublic destroy(): void {\n\t\tif (this.isDestroyed || this.isExploding) {\n\t\t\treturn;\n\t\t}\n\t\tthis.createFragments();\n\t\tthis.audioManager.play(AudioFile.AMMUNITION_EXPLODE);\n\t\tthis.isExploding = true;\n\t\tsetTimeout((): void => {\n\t\t\tthis.isExploding = false;\n\t\t\tthis.isDestroyed = true;\n\t\t}, 500);\n\t}\n\n\tcheckEnemyHit(enemyTanks: Tank[]): void {\n\t\tenemyTanks.forEach((enemyTank) => {\n\t\t\tif (enemyTank.isDestroyed) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tthis.xPosition > enemyTank.xLeft &&\n\t\t\t\tthis.xPosition < enemyTank.xRight &&\n\t\t\t\tthis.yPosition > enemyTank.yTop &&\n\t\t\t\tthis.yPosition < enemyTank.yBottom\n\t\t\t) {\n\t\t\t\tthis.destroy();\n\t\t\t\tenemyTank.destroy();\n\t\t\t\tthis.audioManager.play(AudioFile.TANK_DESTROY);\n\t\t\t\tconsole.log('Enemy hit!!!');\n\t\t\t}\n\t\t});\n\t}\n\n\tcheckPlayerHit(playerTank: Tank): void {\n\t\tif (playerTank.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tthis.xPosition > playerTank.xLeft &&\n\t\t\tthis.xPosition < playerTank.xRight &&\n\t\t\tthis.yPosition > playerTank.yTop &&\n\t\t\tthis.yPosition < playerTank.yBottom\n\t\t) {\n\t\t\tplayerTank.destroy();\n\t\t\tthis.destroy();\n\t\t\tconsole.log('Player Hit!!!');\n\t\t}\n\t}\n\n\tcheckAmmunitionCollision(ammunitions: Ammunition[]): void {\n\t\tfor (const ammunition of ammunitions) {\n\t\t\tif (ammunition !== this && !ammunition.isDestroyed) {\n\t\t\t\tconst dx = this.xPosition - ammunition.xPosition;\n\t\t\t\tconst dy = this.yPosition - ammunition.yPosition;\n\t\t\t\tconst distance = Math.sqrt(dx * dx + dy * dy);\n\t\t\t\tif (distance < this.radius + ammunition.radius) {\n\t\t\t\t\tthis.destroy();\n\t\t\t\t\tammunition.destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcheckBombCollision(bombs: Bomb[]): void {\n\t\tfor (const bomb of bombs) {\n\t\t\tif (!bomb.isDestroyed && !bomb.isExploding()) {\n\t\t\t\tconst dx = this.xPosition - bomb.xPosition;\n\t\t\t\tconst dy = this.yPosition - bomb.yPosition;\n\t\t\t\tconst distance = Math.sqrt(dx * dx + dy * dy);\n\t\t\t\tif (distance < this.radius + bomb.radius) {\n\t\t\t\t\tthis.destroy();\n\t\t\t\t\tbomb.destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treload(\n\t\tstartX: number,\n\t\tstartY: number,\n\t\ttheta: number,\n\t\tisDestroyed: boolean,\n\t\tcanvasWidth: number,\n\t\tcanvasHeight: number\n\t) {\n\t\tthis.xPosition = startX;\n\t\tthis.yPosition = startY;\n\t\tthis.theta = theta;\n\t\tthis.isDestroyed = isDestroyed;\n\t\tthis.xVelocity = Math.cos(this.theta) * this.speed;\n\t\tthis.yVelocity = Math.sin(this.theta) * this.speed;\n\t\tthis.canvasWidth = canvasWidth;\n\t\tthis.canvasHeight = canvasHeight;\n\t\tthis.bounces = 0;\n\t}\n\n\tdraw(context: CanvasRenderingContext2D): void {\n\t\tif (this.isExploding) {\n\t\t\tthis.updateExplosion(context);\n\t\t\treturn;\n\t\t}\n\n\t\tcontext.beginPath();\n\t\tcontext.arc(this.xPosition, this.yPosition, this.radius, 0, 2 * Math.PI);\n\t\tcontext.fillStyle = 'white';\n\t\tcontext.fill();\n\t\tcontext.lineWidth = 2;\n\t\tcontext.strokeStyle = 'black';\n\t\tcontext.stroke();\n\t\tcontext.closePath();\n\t}\n\n\tprivate updateExplosion(context: CanvasRenderingContext2D): void {\n\t\tthis.fragments.forEach((particle) => {\n\t\t\tparticle.update();\n\t\t\tparticle.draw(context);\n\t\t});\n\n\t\tthis.fragments = this.fragments.filter((particle) => particle.life > 0);\n\t}\n\n\tprivate createFragments(): void {\n\t\tconst fragmentCount = 15;\n\t\tfor (let i = 0; i < fragmentCount; i++) {\n\t\t\tconst angle = Math.random() * 2 * Math.PI;\n\t\t\tconst speed = Math.random() * 5 + 2;\n\t\t\tconst velocityX = Math.cos(angle) * speed;\n\t\t\tconst velocityY = Math.sin(angle) * speed;\n\t\t\tconst fragment = new BombFragment(\n\t\t\t\tthis.xPosition,\n\t\t\t\tthis.yPosition,\n\t\t\t\tMath.random() * 2 + 1,\n\t\t\t\tthis.fragmentColorScale(Math.random()),\n\t\t\t\tvelocityX,\n\t\t\t\tvelocityY,\n\t\t\t\tthis.fragmentationRadius\n\t\t\t);\n\t\t\tthis.fragments.push(fragment);\n\t\t}\n\t}\n\n\twillHitPlayerTank(obstacleCanvas: ObstacleCanvas, playerTank: Tank): boolean {\n\t\tlet predictedXPosition: number = this.xPosition;\n\t\tlet predictedYPosition: number = this.yPosition;\n\t\tlet predictedXVelocity: number = this.xVelocity;\n\t\tlet predictedYVelocity: number = this.yVelocity;\n\t\tlet predictedBounces = 0;\n\t\twhile (predictedBounces <= this.maxBounces) {\n\t\t\tpredictedXPosition += predictedXVelocity;\n\t\t\tpredictedYPosition += predictedYVelocity;\n\t\t\tif (predictedXPosition <= 0 || predictedXPosition > this.canvasWidth) {\n\t\t\t\tpredictedXVelocity = -predictedXVelocity;\n\t\t\t\tpredictedBounces++;\n\t\t\t}\n\t\t\tif (predictedYPosition <= 0 || predictedYPosition > this.canvasHeight) {\n\t\t\t\tpredictedYVelocity = -predictedYVelocity;\n\t\t\t\tpredictedBounces++;\n\t\t\t}\n\t\t\tobstacleCanvas.obstacles.forEach((obstacle) => {\n\t\t\t\tif (\n\t\t\t\t\tpredictedXPosition > obstacle.xLeft &&\n\t\t\t\t\tpredictedXPosition < obstacle.xRight &&\n\t\t\t\t\tpredictedYPosition > obstacle.yTop &&\n\t\t\t\t\tpredictedYPosition < obstacle.yBottom\n\t\t\t\t) {\n\t\t\t\t\tpredictedBounces++;\n\t\t\t\t\tpredictedXVelocity = -predictedXVelocity;\n\t\t\t\t\tpredictedYVelocity = -predictedYVelocity;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (\n\t\t\t\tpredictedXPosition > playerTank.xLeft &&\n\t\t\t\tpredictedXPosition < playerTank.xRight &&\n\t\t\t\tpredictedYPosition > playerTank.yTop &&\n\t\t\t\tpredictedYPosition < playerTank.yBottom\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n\nexport class PlayerAmmunition extends Ammunition {\n\tconstructor(\n\t\tstartX: number,\n\t\tstartY: number,\n\t\ttheta: number,\n\t\tcanvasWidth: number,\n\t\tcanvasHeight: number,\n\t\tisDestroyed: boolean,\n\t\taudioManager: AudioManager\n\t) {\n\t\tconst playerAmmunitionMaxBounces = 1;\n\t\tconst playerAmmunitionSpeed = 4;\n\t\tsuper(\n\t\t\tstartX,\n\t\t\tstartY,\n\t\t\ttheta,\n\t\t\tplayerAmmunitionSpeed,\n\t\t\tplayerAmmunitionMaxBounces,\n\t\t\tcanvasWidth,\n\t\t\tcanvasHeight,\n\t\t\tisDestroyed,\n\t\t\taudioManager\n\t\t);\n\t}\n}\n\nexport class BasicAIAmmunition extends Ammunition {\n\tconstructor(\n\t\tstartX: number,\n\t\tstartY: number,\n\t\ttheta: number,\n\t\tcanvasWidth: number,\n\t\tcanvasHeight: number,\n\t\tisDestroyed: boolean,\n\t\taudioManager: AudioManager\n\t) {\n\t\tconst BasicAIAmmunitionMaxBounces = 1;\n\t\tconst BasicAIAmmunitionSpeed = 4;\n\t\tsuper(\n\t\t\tstartX,\n\t\t\tstartY,\n\t\t\ttheta,\n\t\t\tBasicAIAmmunitionSpeed,\n\t\t\tBasicAIAmmunitionMaxBounces,\n\t\t\tcanvasWidth,\n\t\t\tcanvasHeight,\n\t\t\tisDestroyed,\n\t\t\taudioManager\n\t\t);\n\t}\n}\n\nexport class SuperAIAmmunition extends Ammunition {\n\tconstructor(\n\t\tstartX: number,\n\t\tstartY: number,\n\t\ttheta: number,\n\t\tcanvasWidth: number,\n\t\tcanvasHeight: number,\n\t\tisDestroyed: boolean,\n\t\taudioManager: AudioManager\n\t) {\n\t\tconst superAIAmmunitionMaxBounces = 2;\n\t\tconst superAIAmmunitionSpeed = 6;\n\t\tsuper(\n\t\t\tstartX,\n\t\t\tstartY,\n\t\t\ttheta,\n\t\t\tsuperAIAmmunitionSpeed,\n\t\t\tsuperAIAmmunitionMaxBounces,\n\t\t\tcanvasWidth,\n\t\t\tcanvasHeight,\n\t\t\tisDestroyed,\n\t\t\taudioManager\n\t\t);\n\t}\n}\n","import * as d3 from 'd3';\nimport { AudioFile, AudioManager } from './AudioManager';\nimport { BombFragment } from './BombFragment';\nimport { Tank } from './tanks/Tank';\n\nexport class Bomb {\n\tpublic xPosition: number;\n\tpublic yPosition: number;\n\tpublic blastRadius: number;\n\tpublic blastDelayMS: number;\n\tpublic isDestroyed: boolean;\n\tpublic fuseStartTime: number;\n\tpublic shouldFlashRed: boolean;\n\tpublic audioManager: AudioManager;\n\tpublic radius: number = 15;\n\n\tprotected fragments: BombFragment[] = [];\n\tprivate fragmentColorScale = d3.scaleLinear<string>().domain([0, 0.5, 1]).range(['red', 'yellow', 'orange']);\n\tprivate fuseTimeoutId: number | null = null;\n\n\tconstructor(startX: number, startY: number, blastRadius: number, isDestroyed: boolean, audioManager: AudioManager) {\n\t\tthis.xPosition = startX;\n\t\tthis.yPosition = startY;\n\t\tthis.blastRadius = blastRadius;\n\t\tthis.isDestroyed = isDestroyed;\n\t\tthis.audioManager = audioManager;\n\t\tthis.blastDelayMS = 6000;\n\t\tthis.fuseStartTime = 0;\n\t\tthis.shouldFlashRed = false;\n\t}\n\n\tpublic destroy(): void {\n\t\tif (this.isDestroyed || this.isExploding()) {\n\t\t\treturn;\n\t\t}\n\t\tthis.isDestroyed = true;\n\t\tthis.createFragments();\n\t\tthis.audioManager.play(AudioFile.BOMB_EXPLODE);\n\t\tif (this.fuseTimeoutId !== null) {\n\t\t\tclearTimeout(this.fuseTimeoutId);\n\t\t\tthis.fuseTimeoutId = null;\n\t\t}\n\t}\n\n\tpublic checkEnemyHit(enemyTanks: Tank[]): void {\n\t\tenemyTanks.forEach((enemyTank) => {\n\t\t\tif (enemyTank.isDestroyed) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfor (const fragment of this.fragments) {\n\t\t\t\tif (fragment.checkHit(enemyTank)) {\n\t\t\t\t\tenemyTank.destroy();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic checkPlayerHit(playerTank: Tank): void {\n\t\tif (playerTank.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\t\tfor (const fragment of this.fragments) {\n\t\t\tif (fragment.checkHit(playerTank)) {\n\t\t\t\tplayerTank.destroy();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic setFuse(): void {\n\t\tthis.fragments = [];\n\t\tthis.isDestroyed = false;\n\t\tthis.fuseStartTime = performance.now();\n\t\tthis.animateFuse();\n\t\tthis.fuseTimeoutId = window.setTimeout((): void => {\n\t\t\tthis.destroy();\n\t\t}, this.blastDelayMS);\n\t}\n\n\tpublic isTankInsideBlastRadius(tank: Tank): boolean {\n\t\tconst squareXCenter: number = tank.xPosition + tank.tankMidpoint;\n\t\tconst squareYCenter: number = tank.yPosition + tank.tankMidpoint;\n\t\tconst circleXCenter: number = this.xPosition;\n\t\tconst circleYCenter: number = this.yPosition;\n\t\tconst halfSideLength: number = tank.tankMidpoint;\n\t\tconst closestX: number = Math.max(\n\t\t\tsquareXCenter - halfSideLength,\n\t\t\tMath.min(circleXCenter, squareXCenter + halfSideLength)\n\t\t);\n\t\tconst closestY: number = Math.max(\n\t\t\tsquareYCenter - halfSideLength,\n\t\t\tMath.min(circleYCenter, squareYCenter + halfSideLength)\n\t\t);\n\t\tconst dx: number = closestX - circleXCenter;\n\t\tconst dy: number = closestY - circleYCenter;\n\t\tconst distance: number = Math.sqrt(dx * dx + dy * dy);\n\t\treturn distance <= this.blastRadius;\n\t}\n\n\tpublic isExploding(): boolean {\n\t\tconst isExploding: boolean = this.fragments.some((fragment) => fragment.life > 0);\n\t\treturn isExploding;\n\t}\n\n\tprotected updateExplosion(context: CanvasRenderingContext2D): void {\n\t\tthis.fragments.forEach((particle) => {\n\t\t\tparticle.update();\n\t\t\tparticle.draw(context);\n\t\t});\n\n\t\tthis.fragments = this.fragments.filter((particle) => particle.life > 0);\n\t}\n\n\tpublic draw(context: CanvasRenderingContext2D): void {\n\t\tconst isExploding: boolean = this.isExploding();\n\t\tif (isExploding) {\n\t\t\tthis.updateExplosion(context);\n\t\t\treturn;\n\t\t}\n\n\t\tcontext.beginPath();\n\t\tcontext.arc(this.xPosition, this.yPosition, this.radius, 0, 2 * Math.PI);\n\t\tcontext.fillStyle = this.shouldFlashRed ? 'red' : 'yellow';\n\t\tcontext.fill();\n\t\tcontext.lineWidth = 3;\n\t\tcontext.strokeStyle = 'black';\n\t\tcontext.stroke();\n\t\tcontext.closePath();\n\n\t\tcontext.beginPath();\n\t\tcontext.arc(this.xPosition, this.yPosition, 10, 0, 2 * Math.PI);\n\t\tcontext.lineWidth = 1.5;\n\t\tcontext.strokeStyle = 'black';\n\t\tcontext.stroke();\n\t\tcontext.closePath();\n\t}\n\n\tprivate animateFuse(): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\t\tconst elapsedTime = performance.now() - this.fuseStartTime;\n\t\tconst fractionElapsed = elapsedTime / this.blastDelayMS;\n\t\tconst flashThresholds = [0.25, 0.5, 0.625, 0.75, 0.8125, 0.875, 0.90625, 0.9375, 0.96875, 0.984375];\n\t\tthis.shouldFlashRed = flashThresholds.some(\n\t\t\t(threshold) => fractionElapsed > threshold && fractionElapsed < threshold + 0.01\n\t\t);\n\t\trequestAnimationFrame(() => this.animateFuse());\n\t}\n\n\tprivate createFragments(): void {\n\t\tconst fragmentCount = 50;\n\t\tfor (let i = 0; i < fragmentCount; i++) {\n\t\t\tconst angle = Math.random() * 2 * Math.PI;\n\t\t\tconst speed = Math.random() * 5 + 2;\n\t\t\tconst velocityX = Math.cos(angle) * speed;\n\t\t\tconst velocityY = Math.sin(angle) * speed;\n\t\t\tconst fragment = new BombFragment(\n\t\t\t\tthis.xPosition,\n\t\t\t\tthis.yPosition,\n\t\t\t\tMath.random() * 2 + 1,\n\t\t\t\tthis.fragmentColorScale(Math.random()),\n\t\t\t\tvelocityX,\n\t\t\t\tvelocityY,\n\t\t\t\tthis.blastRadius\n\t\t\t);\n\t\t\tthis.fragments.push(fragment);\n\t\t}\n\t}\n}\n\nexport class PlayerBomb extends Bomb {\n\tconstructor(startX: number, startY: number, isDestroyed: boolean, audioManager: AudioManager) {\n\t\tconst playerBombBlastRadius = 50;\n\t\tsuper(startX, startY, playerBombBlastRadius, isDestroyed, audioManager);\n\t}\n}\n\nexport class BasicBomb extends Bomb {\n\tconstructor(startX: number, startY: number, isDestroyed: boolean, audioManager: AudioManager) {\n\t\tconst basicBombBlastRadius = 50;\n\t\tsuper(startX, startY, basicBombBlastRadius, isDestroyed, audioManager);\n\t}\n}\n\nexport class SuperBomb extends Bomb {\n\tconstructor(startX: number, startY: number, isDestroyed: boolean, audioManager: AudioManager) {\n\t\tconst superBombBlastRadius = 100;\n\t\tsuper(startX, startY, superBombBlastRadius, isDestroyed, audioManager);\n\t}\n}\n\nexport class LoveBomb extends Bomb {\n\tconstructor(startX: number, startY: number, isDestroyed: boolean, audioManager: AudioManager) {\n\t\tconst loveBombBlastRadius = 80;\n\t\tsuper(startX, startY, loveBombBlastRadius, isDestroyed, audioManager);\n\t}\n\n\toverride draw(context: CanvasRenderingContext2D): void {\n\t\tconst isExploding = this.fragments.some((fragment: BombFragment) => {\n\t\t\treturn fragment.life > 0;\n\t\t});\n\t\tif (isExploding) {\n\t\t\tthis.updateExplosion(context);\n\t\t\treturn;\n\t\t}\n\n\t\tcontext.save();\n\t\tcontext.translate(this.xPosition, this.yPosition);\n\t\tcontext.scale(1, 1.3);\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(0, 0);\n\t\tcontext.bezierCurveTo(12, -12, 24, 0, 0, 24);\n\t\tcontext.bezierCurveTo(-24, 0, -12, -12, 0, 0);\n\t\tcontext.fillStyle = this.shouldFlashRed ? 'red' : '#FFC2D1';\n\t\tcontext.fill();\n\t\tcontext.lineWidth = 3;\n\t\tcontext.strokeStyle = 'black';\n\t\tcontext.stroke();\n\t\tcontext.closePath();\n\t\tcontext.restore();\n\t}\n}\n","import { Ammunition } from './Ammunition';\nimport { Bomb } from './Bomb';\nimport { Tank } from './tanks/Tank';\n\nexport class GameRenderer {\n\tpublic playerWin = false;\n\tpublic enemyWin = false;\n\n\tprivate context: CanvasRenderingContext2D | null;\n\n\tconstructor(public canvas: HTMLCanvasElement) {\n\t\tconst context = this.canvas.getContext('2d');\n\t\tif (!context) {\n\t\t\tthrow new Error('2d context not supported or canvas element not found.');\n\t\t}\n\t\tthis.context = context;\n\t}\n\n\tpublic initializeCanvas(width: number, height: number): void {\n\t\tthis.canvas.width = width;\n\t\tthis.canvas.height = height;\n\t}\n\n\trenderLevelOverScreen() {\n\t\tif (!this.context) {\n\t\t\tthrow new Error('2d context not supported or canvas element not found.');\n\t\t}\n\n\t\tconst message = this.playerWin ? 'Win' : this.enemyWin ? 'Lose' : '';\n\t\tif (message === '') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst fontSize = 100;\n\t\tthis.context.font = `${fontSize}px Arial`;\n\t\tthis.context.lineWidth = 5;\n\t\tthis.context.strokeStyle = this.playerWin ? 'green' : 'red';\n\t\tthis.context.fillStyle = this.playerWin ? 'green' : 'red';\n\n\t\tconst textWidth = this.context.measureText(message).width;\n\t\tconst x = (this.canvas.width - textWidth) / 2;\n\t\tconst y = this.canvas.height / 2 + fontSize / 2;\n\n\t\tthis.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\t\tthis.context.strokeText(message, x, y);\n\t\tthis.context.fillText(message, x, y);\n\t}\n\n\trender(progress: number, playerTank: Tank, enemyTanks: Tank[]): void {\n\t\tif (!this.context) {\n\t\t\tthrow new Error('2d context not supported or canvas element not found.');\n\t\t}\n\t\tthis.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n\t\tif (playerTank.isDestroyed) {\n\t\t\tthis.enemyWin = true;\n\t\t} else if (enemyTanks.every((tank) => tank.isDestroyed)) {\n\t\t\tthis.playerWin = true;\n\t\t}\n\t\tif (this.enemyWin || this.playerWin) {\n\t\t\tthis.renderLevelOverScreen();\n\t\t}\n\t\tconst allAmmunition: Ammunition[] = [\n\t\t\t...enemyTanks.flatMap((enemyTank) => enemyTank.ammunition),\n\t\t\t...playerTank.ammunition,\n\t\t];\n\t\tconst allBombs: Bomb[] = [...enemyTanks.flatMap((enemyTank) => enemyTank.bombs), ...playerTank.bombs];\n\t\tplayerTank.updatePosition(playerTank, playerTank, enemyTanks, allAmmunition, allBombs);\n\t\tplayerTank.aim(playerTank.aimXPos, playerTank.aimYPos, playerTank);\n\n\t\tenemyTanks.forEach((enemyTank) => {\n\t\t\tif (!enemyTank.isDestroyed) {\n\t\t\t\tenemyTank.updatePosition(enemyTank, playerTank, enemyTanks, allAmmunition, allBombs);\n\t\t\t\tenemyTank.aim(enemyTank.aimXPos, enemyTank.aimYPos, playerTank);\n\t\t\t\tenemyTank.shoot(playerTank);\n\t\t\t\tenemyTank.plantBomb(playerTank);\n\t\t\t}\n\t\t});\n\t\tenemyTanks.forEach((enemyTank) => {\n\t\t\tenemyTank.draw(this.context as CanvasRenderingContext2D);\n\t\t\tenemyTank.ammunition.forEach((ammunition) => {\n\t\t\t\tif (ammunition.isDestroyed) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tammunition.checkAmmunitionCollision(allAmmunition);\n\t\t\t\tammunition.checkBombCollision([...playerTank.bombs]);\n\t\t\t\tammunition.updatePosition(enemyTank.obstacleCanvas);\n\t\t\t\tammunition.checkPlayerHit(playerTank);\n\t\t\t\tammunition.draw(this.context as CanvasRenderingContext2D);\n\t\t\t});\n\t\t\tenemyTank.bombs.forEach((bomb) => {\n\t\t\t\tif (bomb.isDestroyed && !bomb.isExploding()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tbomb.checkPlayerHit(playerTank);\n\t\t\t\tbomb.draw(this.context as CanvasRenderingContext2D);\n\t\t\t});\n\t\t});\n\n\t\tplayerTank.draw(this.context as CanvasRenderingContext2D);\n\t\tif (!playerTank.isDestroyed) {\n\t\t\tplayerTank.reticule.draw(\n\t\t\t\tthis.context as CanvasRenderingContext2D,\n\t\t\t\tplayerTank.xPosition,\n\t\t\t\tplayerTank.yPosition,\n\t\t\t\tplayerTank.aimXPos,\n\t\t\t\tplayerTank.aimYPos\n\t\t\t);\n\t\t}\n\t\tplayerTank.ammunition.forEach((ammunition) => {\n\t\t\tif (ammunition.isDestroyed) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tammunition.checkAmmunitionCollision(allAmmunition);\n\t\t\tammunition.checkBombCollision(allBombs);\n\t\t\tammunition.updatePosition(playerTank.obstacleCanvas);\n\t\t\tammunition.checkEnemyHit(enemyTanks);\n\t\t\tammunition.checkPlayerHit(playerTank);\n\t\t\tammunition.draw(this.context as CanvasRenderingContext2D);\n\t\t});\n\t\tplayerTank.bombs.forEach((bomb) => {\n\t\t\tif (bomb.isDestroyed && !bomb.isExploding()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tbomb.checkEnemyHit(enemyTanks);\n\t\t\tbomb.checkPlayerHit(playerTank);\n\t\t\tbomb.draw(this.context as CanvasRenderingContext2D);\n\t\t});\n\t}\n}\n","import { GameRenderer } from './GameRenderer';\nimport { ObstacleCanvas } from './ObstacleCanvas';\nimport { Tank } from './tanks/Tank';\n\nexport class GameCanvas {\n\tpublic gameRenderer: GameRenderer;\n\tprivate playerTank: Tank | null = null;\n\tprivate enemyTanks: Tank[] = [];\n\tprivate lastRenderTime: number;\n\tpublic obstacleCanvas: ObstacleCanvas;\n\tpublic width: number;\n\tpublic height: number;\n\tpublic animationFrameID: number | null = null;\n\n\tconstructor(canvasSelector: string, width: number, height: number, obstacleCanvas: ObstacleCanvas) {\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.obstacleCanvas = obstacleCanvas;\n\t\tthis.animationFrameID = null;\n\t\tthis.gameRenderer = new GameRenderer(document.querySelector(canvasSelector) as HTMLCanvasElement);\n\t\tthis.gameRenderer.initializeCanvas(this.width, this.height);\n\t\tthis.lastRenderTime = 0;\n\t\twindow.addEventListener('resize', this.resizeCanvas.bind(this));\n\t}\n\n\tpublic start() {\n\t\tif (!this.animationFrameID) {\n\t\t\tthis.animationFrameID = requestAnimationFrame(this.gameLoop.bind(this));\n\t\t}\n\t}\n\n\tpublic stop() {\n\t\tif (this.animationFrameID) {\n\t\t\tcancelAnimationFrame(this.animationFrameID);\n\t\t\tthis.animationFrameID = null;\n\t\t}\n\t}\n\n\tprivate resizeCanvas(): void {}\n\n\tprivate gameLoop(timeStamp: number): void {\n\t\tif (this.playerTank != null) {\n\t\t\tconst progress = timeStamp - this.lastRenderTime;\n\t\t\tthis.gameRenderer.render(progress, this.playerTank, this.enemyTanks);\n\t\t\tthis.lastRenderTime = timeStamp;\n\t\t\tthis.animationFrameID = requestAnimationFrame(this.gameLoop.bind(this));\n\t\t}\n\t}\n\n\tpublic addEnemyTank(tank: Tank): void {\n\t\tthis.enemyTanks.push(tank);\n\t}\n\n\tpublic addPlayerTank(tank: Tank): void {\n\t\tthis.playerTank = tank;\n\t}\n}\n","export class Obstacle {\n\tpublic xLeft: number;\n\tpublic xRight: number;\n\tpublic yTop: number;\n\tpublic yBottom: number;\n\tpublic width: number;\n\tpublic height: number;\n\n\tconstructor(startX: number, startY: number, width: number, height: number) {\n\t\tthis.xLeft = startX;\n\t\tthis.yTop = startY;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.yBottom = this.yTop + this.height;\n\t\tthis.xRight = this.xLeft + this.width;\n\t}\n\n\tdraw(context: CanvasRenderingContext2D): void {\n\t\tcontext.beginPath();\n\t\tcontext.rect(this.xLeft, this.yTop, this.width, this.height);\n\t\tcontext.fillStyle = '#1d1c1a';\n\t\tcontext.fill();\n\t}\n}\n","import { Obstacle } from './Obstacle';\n\nexport class ObstacleCanvas {\n\tprivate obstacleCanvas: HTMLCanvasElement;\n\tpublic obstacles: Obstacle[] = [];\n\tpublic width: number;\n\tpublic height: number;\n\n\tconstructor(obstacleCanvasSelector: string, width: number, height: number, obstacles: Obstacle[]) {\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.obstacles = obstacles;\n\t\twindow.addEventListener('resize', this.resizeCanvas.bind(this));\n\t\tthis.obstacleCanvas = document.querySelector(obstacleCanvasSelector) as HTMLCanvasElement;\n\t\tthis.obstacleCanvas.width = width;\n\t\tthis.obstacleCanvas.height = height;\n\t\tobstacles.forEach((obstacle) => {\n\t\t\tobstacle.draw(this.obstacleCanvas.getContext('2d') as CanvasRenderingContext2D);\n\t\t});\n\t}\n\n\tpublic clearObstacles(): void {\n\t\tconst context = this.obstacleCanvas.getContext('2d');\n\t\tif (context) {\n\t\t\tcontext.clearRect(0, 0, this.obstacleCanvas.width, this.obstacleCanvas.height);\n\t\t}\n\t\tthis.obstacles = [];\n\t}\n\n\tprivate resizeCanvas(): void {}\n}\n","import { Ammunition } from '../Ammunition';\nimport { Bomb } from '../Bomb';\nimport { Tank } from '../tanks/Tank';\n\nexport abstract class Navigator {\n\tabstract aggressionFactor: number;\n\n\tabstract draw(context: CanvasRenderingContext2D): void;\n\n\tabstract updatePosition(\n\t\tcurrentTank: Tank,\n\t\tplayerTank: Tank,\n\t\tenemyTanks: Tank[],\n\t\tammunition: Ammunition[],\n\t\tbombs: Bomb[]\n\t): void;\n}\n","import { Ammunition } from '../Ammunition';\nimport { Bomb } from '../Bomb';\nimport { Node } from '../Node';\nimport { Direction, Tank } from '../tanks/Tank';\nimport { NavigationGrid } from './NavigationGrid';\nimport { Navigator } from './Navigator';\n\nexport class AStarNavigator extends Navigator {\n\tpublic aggressionFactor = 15;\n\tpublic pathRecaculationInterval = 60;\n\tprivate navigationGrid: NavigationGrid;\n\tprivate currentNode: Node | null = null;\n\tprivate path: Node[] | null = [];\n\n\tconstructor(navigationGrid: NavigationGrid) {\n\t\tsuper();\n\t\tthis.navigationGrid = navigationGrid;\n\t}\n\n\tpublic draw(context: CanvasRenderingContext2D): void {\n\t\tthis.navigationGrid.draw(context);\n\t}\n\n\tpublic updatePosition(\n\t\tcurrentTank: Tank,\n\t\tplayerTank: Tank,\n\t\tenemyTanks: Tank[],\n\t\tammunition: Ammunition[],\n\t\tbombs: Bomb[]\n\t): void {\n\t\tthis.pathRecaculationInterval -= 1;\n\t\tif (this.path == null || this.path.length == 0 || this.pathRecaculationInterval == 0) {\n\t\t\tthis.navigationGrid.reset();\n\t\t\tconst startNode: Node = this.navigationGrid.getNodeFromTank(currentTank);\n\t\t\tconst targetNode: Node = this.navigationGrid.getNodeFromTank(playerTank);\n\t\t\tconst destinationNode: Node = this.navigationGrid.getRandomNodeInRadiusOfTarget(\n\t\t\t\ttargetNode,\n\t\t\t\tthis.aggressionFactor\n\t\t\t);\n\t\t\tthis.path = this.navigationGrid.aStar(startNode, destinationNode);\n\t\t\tthis.pathRecaculationInterval = 60;\n\t\t\tif (this.path == null) {\n\t\t\t\tconsole.log(`Path is null`);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.currentNode = this.navigationGrid.getNodeFromTank(currentTank);\n\t\t\tconst dx = this.path[0].x - this.currentNode.x;\n\t\t\tconst dy = this.path[0].y - this.currentNode.y;\n\n\t\t\tif (currentTank.wasLastMoveBlocked && currentTank.consecutiveDirectionMoves > 2) {\n\t\t\t\tconst randomDirection: Direction = currentTank.getRandomDirection();\n\t\t\t\tcurrentTank.moveInCardinalDirection(randomDirection);\n\t\t\t\tcurrentTank.consecutiveDirectionMoves = 0;\n\t\t\t\tconst randomNumber: number = Math.random();\n\t\t\t\tif (dx === 1 && dy === 0) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tcurrentTank.moveSouthEast();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentTank.moveNorthEast();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === -1 && dy === 0) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tcurrentTank.moveNorthWest();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentTank.moveSouthWest();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === 0 && dy === 1) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tcurrentTank.moveSouthEast();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentTank.moveSouthWest();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === 0 && dy === -1) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tcurrentTank.moveNorthWest();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentTank.moveNorthEast();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === 1 && dy === 1) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tcurrentTank.moveSouth();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentTank.moveEast();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === 1 && dy === -1) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tcurrentTank.moveNorth();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentTank.moveEast();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === -1 && dy === 1) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tcurrentTank.moveSouth();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentTank.moveWest();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === -1 && dy === -1) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tcurrentTank.moveNorth();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentTank.moveWest();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (dx === 1 && dy === 0) {\n\t\t\t\t\tcurrentTank.moveEast();\n\t\t\t\t} else if (dx === -1 && dy === 0) {\n\t\t\t\t\tcurrentTank.moveWest();\n\t\t\t\t} else if (dx === 0 && dy === 1) {\n\t\t\t\t\tcurrentTank.moveSouth();\n\t\t\t\t} else if (dx === 0 && dy === -1) {\n\t\t\t\t\tcurrentTank.moveNorth();\n\t\t\t\t} else if (dx === 1 && dy === 1) {\n\t\t\t\t\tcurrentTank.moveSouthEast();\n\t\t\t\t} else if (dx === 1 && dy === -1) {\n\t\t\t\t\tcurrentTank.moveNorthEast();\n\t\t\t\t} else if (dx === -1 && dy === 1) {\n\t\t\t\t\tcurrentTank.moveSouthWest();\n\t\t\t\t} else if (dx === -1 && dy === -1) {\n\t\t\t\t\tcurrentTank.moveNorthWest();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.path[0].x == this.currentNode.x && this.path[0].y == this.currentNode.y) {\n\t\t\t\tthis.path.splice(0, 1);\n\t\t\t}\n\t\t}\n\n\t\tcurrentTank.xLeft = currentTank.xPosition;\n\t\tcurrentTank.xRight = currentTank.xPosition + currentTank.size;\n\t\tcurrentTank.yTop = currentTank.yPosition;\n\t\tcurrentTank.yBottom = currentTank.yPosition + currentTank.size;\n\t}\n}\n","export class Node {\n\tpublic x: number;\n\tpublic y: number;\n\tpublic g = 0;\n\tpublic h = 0;\n\tpublic f = 0;\n\tpublic walkable = true;\n\tpublic parent: Node | null = null;\n\n\tconstructor(x: number, y: number) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n}\n","import { GameCanvas } from '../GameCanvas';\nimport { Node } from '../Node';\nimport { ObstacleCanvas } from '../ObstacleCanvas';\nimport { Tank } from '../tanks/Tank';\n\nexport class NavigationGrid {\n\tpublic grid: Node[][] = [];\n\tpublic gridCellWidth = 30;\n\tpublic gridXLength: number;\n\tpublic gridYLength: number;\n\tpublic path: Node[] = [];\n\tpublic stationary: boolean;\n\tpublic color: string;\n\n\tconstructor(\n\t\tgameCanvas?: GameCanvas,\n\t\tobstacleCanvas?: ObstacleCanvas,\n\t\tstationary: boolean = true,\n\t\tcolor: string = 'gray'\n\t) {\n\t\tthis.color = color;\n\t\tif (!gameCanvas || !obstacleCanvas || stationary) {\n\t\t\tthis.gridXLength = 0;\n\t\t\tthis.gridYLength = 0;\n\t\t\tthis.stationary = true;\n\t\t\treturn;\n\t\t}\n\t\tthis.stationary = false;\n\t\tthis.gridXLength = Math.floor(gameCanvas.width / this.gridCellWidth);\n\t\tthis.gridYLength = Math.floor(gameCanvas.height / this.gridCellWidth);\n\t\tfor (let x = 0; x < this.gridXLength; x++) {\n\t\t\tthis.grid[x] = [];\n\t\t\tfor (let y = 0; y < this.gridYLength; y++) {\n\t\t\t\tthis.grid[x][y] = new Node(x, y);\n\t\t\t\tconst gridXLeft = x * this.gridCellWidth;\n\t\t\t\tconst gridXRight = gridXLeft + this.gridCellWidth;\n\t\t\t\tconst gridYTop = y * this.gridCellWidth;\n\t\t\t\tconst gridYBottom = gridYTop + this.gridCellWidth;\n\t\t\t\tthis.grid[x][y].walkable = !obstacleCanvas.obstacles.some(\n\t\t\t\t\t(obs) => gridXRight > obs.xLeft && gridXLeft < obs.xRight && gridYBottom > obs.yTop && gridYTop < obs.yBottom\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic draw(context: CanvasRenderingContext2D): void {\n\t\tcontext.lineWidth = 1;\n\t\tfor (let i = 0; i <= this.gridYLength; i++) {\n\t\t\tcontext.fillStyle = 'blue';\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(0, i * this.gridCellWidth);\n\t\t\tcontext.lineTo(this.gridXLength * this.gridCellWidth, i * this.gridCellWidth);\n\t\t\tcontext.stroke();\n\t\t}\n\t\tfor (let j = 0; j <= this.gridXLength; j++) {\n\t\t\tcontext.fillStyle = 'blue';\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(j * this.gridCellWidth, 0);\n\t\t\tcontext.lineTo(j * this.gridCellWidth, this.gridXLength * this.gridCellWidth);\n\t\t\tcontext.stroke();\n\t\t}\n\t\tcontext.fillStyle = this.color;\n\t\tthis.path?.forEach((value: Node, index: number, array: Node[]) => {\n\t\t\tcontext.beginPath();\n\t\t\tcontext.arc(\n\t\t\t\tvalue.x * this.gridCellWidth + this.gridCellWidth / 2,\n\t\t\t\tvalue.y * this.gridCellWidth + this.gridCellWidth / 2,\n\t\t\t\t5,\n\t\t\t\t0,\n\t\t\t\t2 * Math.PI\n\t\t\t);\n\t\t\tcontext.fill();\n\t\t});\n\t}\n\n\tpublic reset(): void {\n\t\tfor (let x = 0; x < this.gridXLength; x++) {\n\t\t\tfor (let y = 0; y < this.gridYLength; y++) {\n\t\t\t\tthis.grid[x][y].f = 0;\n\t\t\t\tthis.grid[x][y].g = 0;\n\t\t\t\tthis.grid[x][y].h = 0;\n\t\t\t\tthis.grid[x][y].parent = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetNodeFromTank(tank: Tank): Node {\n\t\tlet xGridCoordinate: number = Math.floor((tank.xPosition + tank.size / 2) / this.gridCellWidth);\n\t\tlet yGridCoordinate: number = Math.floor((tank.yPosition + tank.size / 2) / this.gridCellWidth);\n\t\txGridCoordinate = Math.max(0, Math.min(xGridCoordinate, this.gridXLength - 1));\n\t\tyGridCoordinate = Math.max(0, Math.min(yGridCoordinate, this.gridYLength - 1));\n\t\treturn this.grid[xGridCoordinate][yGridCoordinate];\n\t}\n\n\tgetRandomNodeInRadiusOfTarget(target: Node, radius: number): Node {\n\t\tconst candidateNodes: Node[] = [];\n\t\tfor (let x = 0; x < this.gridXLength; x++) {\n\t\t\tfor (let y = 0; y < this.gridYLength; y++) {\n\t\t\t\tconst node = this.grid[x][y];\n\t\t\t\tconst distance = Math.sqrt(Math.pow(node.x - target.x, 2) + Math.pow(node.y - target.y, 2));\n\t\t\t\tif (distance <= radius + 1 && distance >= radius - 1 && node.walkable) {\n\t\t\t\t\tcandidateNodes.push(node);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst randomIndex = Math.floor(Math.random() * candidateNodes.length);\n\t\treturn candidateNodes[randomIndex];\n\t}\n\n\taStar(start: Node, target: Node): Node[] | null {\n\t\tconst openSet: Node[] = [start];\n\t\tconst closedSet = new Set<Node>();\n\n\t\twhile (openSet.length > 0) {\n\t\t\tlet current: Node | null = openSet.sort((a, b) => a.f - b.f)[0];\n\n\t\t\tif (current.x === target.x && current.y === target.y) {\n\t\t\t\tconst path = [];\n\t\t\t\twhile (current !== null) {\n\t\t\t\t\tpath.unshift(current);\n\t\t\t\t\tcurrent = current.parent;\n\t\t\t\t}\n\t\t\t\treturn path;\n\t\t\t}\n\n\t\t\topenSet.splice(openSet.indexOf(current), 1);\n\t\t\tclosedSet.add(current);\n\n\t\t\tconst neighbors = this.getWalkableNeighbors(current);\n\n\t\t\tfor (const neighbor of neighbors) {\n\t\t\t\tif (closedSet.has(neighbor)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst tentativeG = current.g + (neighbor.x - current.x === 0 || neighbor.y - current.y === 0 ? 1 : Math.SQRT2);\n\t\t\t\tif (!openSet.includes(neighbor)) {\n\t\t\t\t\topenSet.push(neighbor);\n\t\t\t\t} else if (tentativeG >= neighbor.g) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tneighbor.parent = current;\n\t\t\t\tneighbor.g = tentativeG;\n\t\t\t\tneighbor.h = Math.round(Math.sqrt(Math.pow(neighbor.x - target.x, 2) + Math.pow(neighbor.y - target.y, 2)));\n\t\t\t\tneighbor.f = neighbor.g + neighbor.h;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetWalkableNeighbors(node: Node): Node[] {\n\t\t// Get the 8 nodes surrounding the current only if its walkable\n\t\tconst neighbors: Node[] = [];\n\t\tfor (let dx = -1; dx <= 1; dx++) {\n\t\t\tfor (let dy = -1; dy <= 1; dy++) {\n\t\t\t\tif (dx === 0 && dy === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tconst x = node.x + dx;\n\t\t\t\tconst y = node.y + dy;\n\t\t\t\tif (x >= 0 && y >= 0 && x < this.gridXLength && y < this.gridYLength && this.grid[x][y].walkable) {\n\t\t\t\t\tneighbors.push(this.grid[x][y]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn neighbors;\n\t}\n}\n","import { Ammunition } from '../Ammunition';\nimport { Bomb } from '../Bomb';\nimport { Node } from '../Node';\nimport { Tank } from '../tanks/Tank';\nimport { Navigator } from './Navigator';\nimport { SimplePathfinder } from './SimplePathFinder';\n\nexport class SimpleNavigator extends Navigator {\n\tpublic pathRecaculationInterval = 120;\n\tpublic aggressionFactor = 10;\n\tprivate simplePathFinder: SimplePathfinder;\n\tprivate currentNode: Node | null = null;\n\tprivate path: Node[] | null = [];\n\n\tconstructor(pathfinder: SimplePathfinder) {\n\t\tsuper();\n\t\tthis.simplePathFinder = pathfinder;\n\t}\n\n\tpublic draw(context: CanvasRenderingContext2D): void {\n\t\treturn;\n\t}\n\n\tupdatePosition(\n\t\tcurrentTank: Tank,\n\t\tplayerTank: Tank,\n\t\tenemyTanks: Tank[],\n\t\tammunition: Ammunition[],\n\t\tbombs: Bomb[]\n\t): void {\n\t\tthis.pathRecaculationInterval -= 1;\n\t\tif (this.path == null || this.path.length == 0 || this.pathRecaculationInterval == 0) {\n\t\t\tconst startNode: Node = this.simplePathFinder.getNodeFromTank(currentTank);\n\t\t\tconst targetNode: Node = this.simplePathFinder.getNodeFromTank(playerTank);\n\t\t\tconst destinationNode: Node = this.simplePathFinder.getRandomNodeInRadiusOfTarget(\n\t\t\t\ttargetNode,\n\t\t\t\tthis.aggressionFactor\n\t\t\t);\n\t\t\tthis.pathRecaculationInterval = 120;\n\t\t\tthis.path = this.simplePathFinder.findPath(startNode, destinationNode);\n\t\t} else {\n\t\t\tthis.currentNode = this.simplePathFinder.getNodeFromTank(currentTank);\n\t\t\tconst dx = this.path[0].x - this.currentNode.x;\n\t\t\tconst dy = this.path[0].y - this.currentNode.y;\n\n\t\t\tif (this.path && this.path.length > 1) {\n\t\t\t\tif (dx === 1 && dy === 0) {\n\t\t\t\t\tcurrentTank.moveEast();\n\t\t\t\t} else if (dx === -1 && dy === 0) {\n\t\t\t\t\tcurrentTank.moveWest();\n\t\t\t\t} else if (dx === 0 && dy === 1) {\n\t\t\t\t\tcurrentTank.moveSouth();\n\t\t\t\t} else if (dx === 0 && dy === -1) {\n\t\t\t\t\tcurrentTank.moveNorth();\n\t\t\t\t} else if (dx === 1 && dy === 1) {\n\t\t\t\t\tcurrentTank.moveSouthEast();\n\t\t\t\t} else if (dx === 1 && dy === -1) {\n\t\t\t\t\tcurrentTank.moveNorthEast();\n\t\t\t\t} else if (dx === -1 && dy === 1) {\n\t\t\t\t\tcurrentTank.moveSouthWest();\n\t\t\t\t} else if (dx === -1 && dy === -1) {\n\t\t\t\t\tcurrentTank.moveNorthWest();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.path[0].x == this.currentNode.x && this.path[0].y == this.currentNode.y) {\n\t\t\t\tthis.path.splice(0, 1);\n\t\t\t}\n\t\t}\n\n\t\tcurrentTank.xLeft = currentTank.xPosition;\n\t\tcurrentTank.xRight = currentTank.xPosition + currentTank.size;\n\t\tcurrentTank.yTop = currentTank.yPosition;\n\t\tcurrentTank.yBottom = currentTank.yPosition + currentTank.size;\n\t}\n}\n","import { GameCanvas } from '../GameCanvas';\nimport { Node } from '../Node';\nimport { ObstacleCanvas } from '../ObstacleCanvas';\nimport { Tank } from '../tanks/Tank';\n\nexport class SimplePathfinder {\n\tpublic grid: Node[][] = [];\n\tpublic gridCellWidth = 30;\n\tpublic gridXLength: number;\n\tpublic gridYLength: number;\n\tpublic path: Node[] = [];\n\tpublic stationary: boolean;\n\n\tconstructor(gameCanvas?: GameCanvas, obstacleCanvas?: ObstacleCanvas, stationary: boolean = true) {\n\t\tif (!gameCanvas || !obstacleCanvas || stationary) {\n\t\t\tthis.gridXLength = 0;\n\t\t\tthis.gridYLength = 0;\n\t\t\tthis.stationary = true;\n\t\t\treturn;\n\t\t}\n\t\tthis.stationary = false;\n\t\tthis.gridXLength = Math.floor(gameCanvas.width / this.gridCellWidth);\n\t\tthis.gridYLength = Math.floor(gameCanvas.height / this.gridCellWidth);\n\t\tfor (let x = 0; x < this.gridXLength; x++) {\n\t\t\tthis.grid[x] = [];\n\t\t\tfor (let y = 0; y < this.gridYLength; y++) {\n\t\t\t\tthis.grid[x][y] = new Node(x, y);\n\t\t\t\tconst gridXLeft = x * this.gridCellWidth;\n\t\t\t\tconst gridXRight = gridXLeft + this.gridCellWidth;\n\t\t\t\tconst gridYTop = y * this.gridCellWidth;\n\t\t\t\tconst gridYBottom = gridYTop + this.gridCellWidth;\n\t\t\t\tthis.grid[x][y].walkable = !obstacleCanvas.obstacles.some(\n\t\t\t\t\t(obs) => gridXRight > obs.xLeft && gridXLeft < obs.xRight && gridYBottom > obs.yTop && gridYTop < obs.yBottom\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tmoveTowardsGoal(currentPos: Node, goalPos: Node): Node {\n\t\tif (currentPos === goalPos) {\n\t\t\treturn currentPos;\n\t\t}\n\n\t\tconst possibleMoves = [\n\t\t\tnew Node(currentPos.x + 1, currentPos.y), // Move right\n\t\t\tnew Node(currentPos.x - 1, currentPos.y), // Move left\n\t\t\tnew Node(currentPos.x, currentPos.y + 1), // Move down\n\t\t\tnew Node(currentPos.x, currentPos.y - 1), // Move up\n\t\t];\n\n\t\tlet bestMove = currentPos;\n\t\tlet minDistance = Number.MAX_SAFE_INTEGER;\n\t\tfor (const move of possibleMoves) {\n\t\t\tif (this.isWithinBounds(move) && this.isWalkable(move)) {\n\t\t\t\tconst distance = Math.abs(move.x - goalPos.x) + Math.abs(move.y - goalPos.y);\n\t\t\t\tif (distance < minDistance) {\n\t\t\t\t\tminDistance = distance;\n\t\t\t\t\tbestMove = move;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn bestMove;\n\t}\n\n\tisWithinBounds(position: Node): boolean {\n\t\treturn 0 <= position.x && position.x < this.gridXLength && 0 <= position.y && position.y < this.gridYLength;\n\t}\n\n\tisWalkable(position: Node): boolean {\n\t\treturn this.grid[position.x][position.y].walkable;\n\t}\n\n\tfindPath(start: Node, goal: Node): Node[] {\n\t\tlet currentPos = start;\n\t\tconst path: Node[] = [currentPos];\n\t\tlet count: number = 10;\n\t\twhile (count > 0) {\n\t\t\tcurrentPos = this.moveTowardsGoal(currentPos, goal);\n\t\t\tpath.push(currentPos);\n\t\t\tcount--;\n\t\t}\n\t\treturn path;\n\t}\n\n\tgetNodeFromTank(tank: Tank): Node {\n\t\tlet xGridCoordinate: number = Math.floor((tank.xPosition + tank.size / 2) / this.gridCellWidth);\n\t\tlet yGridCoordinate: number = Math.floor((tank.yPosition + tank.size / 2) / this.gridCellWidth);\n\t\txGridCoordinate = Math.max(0, Math.min(xGridCoordinate, this.gridXLength - 1));\n\t\tyGridCoordinate = Math.max(0, Math.min(yGridCoordinate, this.gridYLength - 1));\n\t\treturn this.grid[xGridCoordinate][yGridCoordinate];\n\t}\n\n\tgetRandomNodeInRadiusOfTarget(target: Node, radius: number): Node {\n\t\tconst candidateNodes: Node[] = [];\n\t\tfor (let x = 0; x < this.gridXLength; x++) {\n\t\t\tfor (let y = 0; y < this.gridYLength; y++) {\n\t\t\t\tconst node = this.grid[x][y];\n\t\t\t\tconst distance = Math.sqrt(Math.pow(node.x - target.x, 2) + Math.pow(node.y - target.y, 2));\n\t\t\t\tif (distance <= radius + 1 && distance >= radius - 1 && node.walkable) {\n\t\t\t\t\tcandidateNodes.push(node);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst randomIndex = Math.floor(Math.random() * candidateNodes.length);\n\t\treturn candidateNodes[randomIndex];\n\t}\n}\n","export class Reticule {\n\tprotected color: string;\n\tprotected dashPattern: [number, number]; // [dashLengthInPixels, spaceLengthInPixels]\n\tprotected renderReticule: boolean;\n\tprotected tankSize: number;\n\tprotected reticuleWidth = 5;\n\n\tconstructor(dashPattern: [number, number], color: string, renderReticule: boolean, tankSize: number) {\n\t\tthis.color = color;\n\t\tthis.dashPattern = dashPattern;\n\t\tthis.renderReticule = renderReticule;\n\t\tthis.tankSize = tankSize;\n\t}\n\n\tpublic draw(\n\t\tcontext: CanvasRenderingContext2D,\n\t\ttankXPos: number,\n\t\ttankYPos: number,\n\t\tmouseXPos: number,\n\t\tmouseYpos: number\n\t): void {\n\t\tif (this.renderReticule) {\n\t\t\tcontext.strokeStyle = this.color;\n\t\t\tcontext.setLineDash(this.dashPattern);\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(tankXPos + this.tankSize / 2, tankYPos + this.tankSize / 2);\n\t\t\tcontext.lineTo(mouseXPos, mouseYpos);\n\t\t\tcontext.lineWidth = this.reticuleWidth;\n\t\t\tcontext.stroke();\n\t\t}\n\t}\n}\n\nexport class NoReticule extends Reticule {\n\tconstructor() {\n\t\tsuper([0, 0], 'blue', false, 0);\n\t}\n}\n\nexport class SimplePlayerReticule extends Reticule {\n\tconstructor(tankSize: number) {\n\t\tsuper([5, 5], 'blue', true, tankSize);\n\t}\n}\n\nexport class CustomColorReticule extends Reticule {\n\tconstructor(tankSize: number, color: string) {\n\t\tsuper([4, 1], color, true, tankSize);\n\t}\n}\n\nexport class AdjustingCustomColorReticule extends Reticule {\n\tprivate maxReticuleLength: number;\n\n\tconstructor(tankSize: number, color: string, maxReticuleLength: number) {\n\t\tsuper([1, 1], color, true, tankSize);\n\t\tthis.maxReticuleLength = maxReticuleLength;\n\t}\n\n\toverride draw(\n\t\tcontext: CanvasRenderingContext2D,\n\t\ttankXPosition: number,\n\t\ttankYPosition: number,\n\t\tmouseXPosition: number,\n\t\tmouseYPosition: number\n\t): void {\n\t\tconst xDist = mouseXPosition - tankXPosition;\n\t\tconst yDist = mouseYPosition - tankYPosition;\n\t\tconst distance = Math.sqrt(Math.pow(xDist, 2) + Math.pow(yDist, 2));\n\t\tconst distanceToMaxDistanceRatio = distance / this.maxReticuleLength;\n\t\tconst distanceToMaxDistanceRatioInverse = 1 - distanceToMaxDistanceRatio;\n\t\tconst dashLength = distanceToMaxDistanceRatio * 10 + 2;\n\t\tconst spaceLength = distanceToMaxDistanceRatioInverse * 10 + 5;\n\n\t\tif (this.renderReticule) {\n\t\t\tcontext.strokeStyle = this.color;\n\t\t\tcontext.setLineDash([dashLength, spaceLength]);\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(tankXPosition + this.tankSize / 2, tankYPosition + this.tankSize / 2);\n\t\t\tcontext.lineTo(mouseXPosition, mouseYPosition);\n\t\t\tcontext.lineWidth = this.reticuleWidth;\n\t\t\tcontext.stroke();\n\n\t\t\tcontext.setLineDash([]);\n\t\t\tconst xLength = 8;\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(mouseXPosition - xLength, mouseYPosition - xLength);\n\t\t\tcontext.lineTo(mouseXPosition + xLength, mouseYPosition + xLength);\n\t\t\tcontext.stroke();\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(mouseXPosition - xLength, mouseYPosition + xLength);\n\t\t\tcontext.lineTo(mouseXPosition + xLength, mouseYPosition - xLength);\n\t\t\tcontext.stroke();\n\t\t}\n\t}\n}\n","import { Ammunition } from '../Ammunition';\nimport { AudioManager } from '../AudioManager';\nimport { Bomb } from '../Bomb';\nimport { Node } from '../Node';\nimport { ObstacleCanvas } from '../ObstacleCanvas';\nimport { Reticule } from '../Reticule';\nimport { Navigator } from '../navigation/Navigator';\nimport { Tank } from './Tank';\n\nexport class EnemyTank extends Tank {\n\tpublic navigator: Navigator;\n\tpublic aggressionFactor = 15; // Distance tank should maintain from its target\n\tpublic path: Node[] | null = [];\n\tpublic pathRecaculationInterval = 60;\n\tpublic drawNavigation = false;\n\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\treticule: Reticule,\n\t\txPosition: number,\n\t\tyPosition: number,\n\t\tspeed: number,\n\t\tsize: number,\n\t\taggressionFactor: number,\n\t\tcolor: string,\n\t\tobstacleCanvas: ObstacleCanvas,\n\t\tammunition: Ammunition[],\n\t\tbombs: Bomb[],\n\t\taudioManager: AudioManager,\n\t\tnavigator: Navigator\n\t) {\n\t\tsuper(canvas, reticule, xPosition, yPosition, speed, size, color, obstacleCanvas, ammunition, bombs, audioManager);\n\t\tthis.aggressionFactor = aggressionFactor;\n\t\tthis.navigator = navigator;\n\t}\n\n\tpublic override draw(context: CanvasRenderingContext2D): void {\n\t\tif (this.drawNavigation) {\n\t\t\tthis.navigator.draw(context);\n\t\t}\n\t\tsuper.draw(context);\n\t}\n\n\tpublic override updatePosition(\n\t\tcurrentTank: Tank,\n\t\tplayerTank: Tank,\n\t\tenemyTanks: Tank[],\n\t\tammunition: Ammunition[],\n\t\tbombs: Bomb[]\n\t): void {\n\t\tthis.navigator.updatePosition(currentTank, playerTank, enemyTanks, ammunition, bombs);\n\t}\n}\n","import { PastelColorPalette } from '../../ui/PastelColorPalette';\nimport { Ammunition } from '../Ammunition';\nimport { AudioManager } from '../AudioManager';\nimport { Bomb } from '../Bomb';\nimport { ObstacleCanvas } from '../ObstacleCanvas';\nimport { NoReticule } from '../Reticule';\nimport { Navigator } from '../navigation/Navigator';\nimport { EnemyTank } from './EnemyTank';\nimport { Tank } from './Tank';\n\nexport class BomberTank extends EnemyTank {\n\tpublic minTimeBetweenShotsMS = 20000;\n\tpublic timeBetweenShotsIsElapsed = true;\n\tpublic minTimeBetweenBombPlantsMS = 1000;\n\tpublic timeBetweenPlantsIsElapsed = true;\n\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\txPosition: number,\n\t\tyPosition: number,\n\t\tobstacleCanvas: ObstacleCanvas,\n\t\tammunition: Ammunition[],\n\t\tbombs: Bomb[],\n\t\tnavigator: Navigator,\n\t\taudioManager: AudioManager\n\t) {\n\t\tconst bomberTankSpeed = 2;\n\t\tconst bomberTankSize = 30;\n\t\tconst bomberTankAggressionFactor = 4;\n\t\tconst bomberTankColor = PastelColorPalette.PALE_YELLOW;\n\t\tsuper(\n\t\t\tcanvas,\n\t\t\tnew NoReticule(),\n\t\t\txPosition,\n\t\t\tyPosition,\n\t\t\tbomberTankSpeed,\n\t\t\tbomberTankSize,\n\t\t\tbomberTankAggressionFactor,\n\t\t\tbomberTankColor,\n\t\t\tobstacleCanvas,\n\t\t\tammunition,\n\t\t\tbombs,\n\t\t\taudioManager,\n\t\t\tnavigator\n\t\t);\n\t}\n\n\tpublic override plantBomb(playerTank: Tank): void {\n\t\tif (this.timeBetweenPlantsIsElapsed && !this.isDestroyed) {\n\t\t\tconst availableBombIndex = this.bombs.findIndex((bomb) => bomb.isDestroyed && !bomb.isExploding());\n\t\t\tif (availableBombIndex !== -1) {\n\t\t\t\tthis.bombs[availableBombIndex].xPosition = this.xPosition + this.size / 2;\n\t\t\t\tthis.bombs[availableBombIndex].yPosition = this.yPosition + this.size / 2;\n\t\t\t\tconst willHitPlayerTank: boolean = this.bombs[availableBombIndex].isTankInsideBlastRadius(playerTank);\n\t\t\t\tif (willHitPlayerTank) {\n\t\t\t\t\tthis.bombs[availableBombIndex].setFuse();\n\t\t\t\t\tthis.timeBetweenPlantsIsElapsed = false;\n\t\t\t\t\tsetTimeout((): void => {\n\t\t\t\t\t\tthis.timeBetweenPlantsIsElapsed = true;\n\t\t\t\t\t}, this.minTimeBetweenBombPlantsMS);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tpublic override shoot(playerTank: Tank): void {\n\t\tif (this.timeBetweenShotsIsElapsed && !this.isDestroyed) {\n\t\t\tconst availableAmmunitionIndex = this.ammunition.findIndex((ammunition) => ammunition.isDestroyed);\n\t\t\tif (availableAmmunitionIndex !== -1) {\n\t\t\t\tthis.ammunition[availableAmmunitionIndex].reload(\n\t\t\t\t\tthis.gunBarrellEndX,\n\t\t\t\t\tthis.gunBarrellEndY,\n\t\t\t\t\tthis.aimAngle,\n\t\t\t\t\ttrue,\n\t\t\t\t\tthis.canvasWidth,\n\t\t\t\t\tthis.canvasHeight\n\t\t\t\t);\n\t\t\t\tconst willHitPlayerTank: boolean = this.ammunition[availableAmmunitionIndex].willHitPlayerTank(\n\t\t\t\t\tthis.obstacleCanvas,\n\t\t\t\t\tplayerTank\n\t\t\t\t);\n\t\t\t\tif (willHitPlayerTank) {\n\t\t\t\t\tthis.ammunition[availableAmmunitionIndex].isDestroyed = false;\n\t\t\t\t\tthis.timeBetweenShotsIsElapsed = false;\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.timeBetweenShotsIsElapsed = true;\n\t\t\t\t\t}, this.minTimeBetweenShotsMS);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tpublic override aim(mouseXPos: number, mouseYpos: number, playerTank: Tank): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst dx: number = playerTank.xPosition + playerTank.size / 2 - this.xPosition - this.tankMidpoint;\n\t\tconst dy: number = playerTank.yPosition + playerTank.size / 2 - this.yPosition - this.tankMidpoint;\n\t\tlet theta = Math.atan2(dy, dx);\n\t\tif (theta < 0) {\n\t\t\ttheta += 2 * Math.PI;\n\t\t}\n\t\tthis.aimAngle = theta;\n\t}\n}\n","import { KeyStates } from '../../utils/KeyStates';\nimport { Ammunition, PlayerAmmunition } from '../Ammunition';\nimport { AudioFile, AudioManager } from '../AudioManager';\nimport { Bomb, PlayerBomb } from '../Bomb';\nimport { ObstacleCanvas } from '../ObstacleCanvas';\nimport { AdjustingCustomColorReticule, Reticule } from '../Reticule';\nimport { Tank } from './Tank';\n\nexport class PlayerTank extends Tank {\n\tpublic keyStates: KeyStates = {\n\t\tArrowUp: false,\n\t\tArrowDown: false,\n\t\tArrowLeft: false,\n\t\tArrowRight: false,\n\t\tw: false,\n\t\ta: false,\n\t\ts: false,\n\t\td: false,\n\t\tW: false,\n\t\tA: false,\n\t\tS: false,\n\t\tD: false,\n\t};\n\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\treticule: Reticule,\n\t\txPosition: number,\n\t\tyPosition: number,\n\t\tspeed: number,\n\t\tsize: number,\n\t\tcolor: string,\n\t\tobstacleCanvas: ObstacleCanvas,\n\t\tammunition: Ammunition[],\n\t\tbombs: Bomb[],\n\t\taudioManager: AudioManager\n\t) {\n\t\tsuper(canvas, reticule, xPosition, yPosition, speed, size, color, obstacleCanvas, ammunition, bombs, audioManager);\n\n\t\tdocument.addEventListener('keydown', (event: KeyboardEvent) => {\n\t\t\tif (this.keyStates.hasOwnProperty(event.key)) {\n\t\t\t\tthis.keyStates[event.key] = true;\n\t\t\t}\n\t\t});\n\t\tdocument.addEventListener('keydown', (event: KeyboardEvent) => {\n\t\t\tif (event.code === 'Space') {\n\t\t\t\tthis.plantBomb(this);\n\t\t\t}\n\t\t});\n\t\tdocument.addEventListener('keyup', (event: KeyboardEvent) => {\n\t\t\tif (this.keyStates.hasOwnProperty(event.key)) {\n\t\t\t\tthis.keyStates[event.key] = false;\n\t\t\t}\n\t\t});\n\t\tdocument.addEventListener('mousemove', (event: MouseEvent) => {\n\t\t\tthis.aimXPos = event.clientX - this.xOffset;\n\t\t\tthis.aimYPos = event.clientY - this.yOffset;\n\t\t});\n\t\tdocument.addEventListener('click', (event: MouseEvent) => {\n\t\t\tif (canvas.contains(event.target as Node)) {\n\t\t\t\tthis.shoot(this);\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic override updatePosition(\n\t\tcurrentTank: Tank,\n\t\tplayerTank: Tank,\n\t\tenemyTanks: Tank[],\n\t\tammunition: Ammunition[],\n\t\tbombs: Bomb[]\n\t): void {\n\t\t// Move the tank\n\t\tif (this.up() && this.right()) {\n\t\t\tthis.moveNorthEast();\n\t\t} else if (this.up() && this.left()) {\n\t\t\tthis.moveNorthWest();\n\t\t} else if (this.down() && this.right()) {\n\t\t\tthis.moveSouthEast();\n\t\t} else if (this.down() && this.left()) {\n\t\t\tthis.moveSouthWest();\n\t\t} else if (this.up()) {\n\t\t\tthis.moveNorth();\n\t\t} else if (this.down()) {\n\t\t\tthis.moveSouth();\n\t\t} else if (this.left()) {\n\t\t\tthis.moveWest();\n\t\t} else if (this.right()) {\n\t\t\tthis.moveEast();\n\t\t}\n\n\t\tthis.xLeft = this.xPosition;\n\t\tthis.xRight = this.xPosition + this.size;\n\t\tthis.yTop = this.yPosition;\n\t\tthis.yBottom = this.yPosition + this.size;\n\t}\n\n\tpublic override plantBomb(playerTank: Tank): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\t\tconst availableBombIndex = this.bombs.findIndex((bomb) => bomb.isDestroyed && !bomb.isExploding());\n\t\tif (availableBombIndex !== -1) {\n\t\t\tthis.bombs[availableBombIndex].xPosition = this.xPosition + this.size / 2;\n\t\t\tthis.bombs[availableBombIndex].yPosition = this.yPosition + this.size / 2;\n\t\t\tthis.bombs[availableBombIndex].setFuse();\n\t\t}\n\t}\n\n\tpublic override aim(mouseXPos: number, mouseYpos: number, playerTank: Tank): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\t\tconst dx: number = mouseXPos - this.xPosition - this.tankMidpoint;\n\t\tconst dy: number = mouseYpos - this.yPosition - this.tankMidpoint;\n\t\tlet theta = Math.atan2(dy, dx);\n\t\tif (theta < 0) {\n\t\t\ttheta += 2 * Math.PI;\n\t\t}\n\t\tthis.aimAngle = theta;\n\t}\n\n\tpublic override shoot(playerTank: Tank): void {\n\t\tif (!this.isDestroyed) {\n\t\t\tconst availableAmmunitionIndex = this.ammunition.findIndex((ammunition) => ammunition.isDestroyed);\n\t\t\tif (availableAmmunitionIndex !== -1) {\n\t\t\t\tthis.audioManager.play(AudioFile.TANK_FIRE);\n\t\t\t\tthis.ammunition[availableAmmunitionIndex] = new PlayerAmmunition(\n\t\t\t\t\tthis.gunBarrellEndX,\n\t\t\t\t\tthis.gunBarrellEndY,\n\t\t\t\t\tthis.aimAngle,\n\t\t\t\t\tthis.canvasWidth,\n\t\t\t\t\tthis.canvasHeight,\n\t\t\t\t\tfalse,\n\t\t\t\t\tthis.audioManager\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tpublic up(): boolean {\n\t\treturn this.keyStates.ArrowUp || this.keyStates.w || this.keyStates.W;\n\t}\n\n\tpublic down(): boolean {\n\t\treturn this.keyStates.ArrowDown || this.keyStates.s || this.keyStates.S;\n\t}\n\n\tpublic left(): boolean {\n\t\treturn this.keyStates.ArrowLeft || this.keyStates.a || this.keyStates.A;\n\t}\n\n\tpublic right(): boolean {\n\t\treturn this.keyStates.ArrowRight || this.keyStates.d || this.keyStates.D;\n\t}\n}\n\nexport class DefaultPlayerTank extends PlayerTank {\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\txPos: number,\n\t\tyPos: number,\n\t\tobstacleCanvas: ObstacleCanvas,\n\t\taudioManager: AudioManager\n\t) {\n\t\tconst defaultPlayerTankSpeed = 2;\n\t\tconst defaultPlayerTankSize = 30;\n\t\tconst defaultPlayerTankColor = '#4f6d7a';\n\t\tconst ammunition: Ammunition[] = [\n\t\t\tnew PlayerAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew PlayerAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew PlayerAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew PlayerAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew PlayerAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t];\n\t\tconst bombs: Bomb[] = [new PlayerBomb(0, 0, true, audioManager), new PlayerBomb(0, 0, true, audioManager)];\n\t\tconst rect: DOMRect = canvas.getBoundingClientRect();\n\t\tconst viewportWidth: number = window.innerWidth;\n\t\tconst distanceFromLeft: number = rect.left;\n\t\tconst distanceFromRight: number = viewportWidth - rect.right;\n\t\tconst maxReticuleLength: number = canvas.width + Math.max(distanceFromLeft, distanceFromRight);\n\t\tsuper(\n\t\t\tcanvas,\n\t\t\tnew AdjustingCustomColorReticule(defaultPlayerTankSize, defaultPlayerTankColor, maxReticuleLength),\n\t\t\txPos,\n\t\t\tyPos,\n\t\t\tdefaultPlayerTankSpeed,\n\t\t\tdefaultPlayerTankSize,\n\t\t\tdefaultPlayerTankColor,\n\t\t\tobstacleCanvas,\n\t\t\tammunition,\n\t\t\tbombs,\n\t\t\taudioManager\n\t\t);\n\t}\n}\n","import { PastelColorPalette } from '../../ui/PastelColorPalette';\nimport { Ammunition } from '../Ammunition';\nimport { AudioManager } from '../AudioManager';\nimport { Bomb } from '../Bomb';\nimport { ObstacleCanvas } from '../ObstacleCanvas';\nimport { NoReticule } from '../Reticule';\nimport { Navigator } from '../navigation/Navigator';\nimport { EnemyTank } from './EnemyTank';\nimport { Tank } from './Tank';\n\nexport class SimpleMovingTank extends EnemyTank {\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\txPosition: number,\n\t\tyPosition: number,\n\t\tobstacleCanvas: ObstacleCanvas,\n\t\tammunition: Ammunition[],\n\t\tbombs: Bomb[],\n\t\tnavigator: Navigator,\n\t\taudioManager: AudioManager\n\t) {\n\t\tconst simpleMovingTankSpeed = 1.2;\n\t\tconst simpleMovingTankSize = 30;\n\t\tconst simpleMovingTankAggressionFactor = 15;\n\t\tconst simpleMovingTankColor = PastelColorPalette.CORAL_ORANGE;\n\t\tsuper(\n\t\t\tcanvas,\n\t\t\tnew NoReticule(),\n\t\t\txPosition,\n\t\t\tyPosition,\n\t\t\tsimpleMovingTankSpeed,\n\t\t\tsimpleMovingTankSize,\n\t\t\tsimpleMovingTankAggressionFactor,\n\t\t\tsimpleMovingTankColor,\n\t\t\tobstacleCanvas,\n\t\t\tammunition,\n\t\t\tbombs,\n\t\t\taudioManager,\n\t\t\tnavigator\n\t\t);\n\t}\n\n\tpublic override shoot(playerTank: Tank): void {\n\t\tconst availableAmmunitionIndex = this.ammunition.findIndex((ammunition) => ammunition.isDestroyed);\n\t\tif (availableAmmunitionIndex !== -1) {\n\t\t\tthis.ammunition[availableAmmunitionIndex].reload(\n\t\t\t\tthis.gunBarrellEndX,\n\t\t\t\tthis.gunBarrellEndY,\n\t\t\t\tthis.aimAngle,\n\t\t\t\ttrue,\n\t\t\t\tthis.canvasWidth,\n\t\t\t\tthis.canvasHeight\n\t\t\t);\n\t\t\tconst willHitPlayerTank: boolean = this.ammunition[availableAmmunitionIndex].willHitPlayerTank(\n\t\t\t\tthis.obstacleCanvas,\n\t\t\t\tplayerTank\n\t\t\t);\n\t\t\tif (willHitPlayerTank) {\n\t\t\t\tthis.ammunition[availableAmmunitionIndex].isDestroyed = false;\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tpublic override aim(mouseXPos: number, mouseYpos: number, playerTank: Tank): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst dx: number = playerTank.xPosition + playerTank.size / 2 - this.xPosition - this.tankMidpoint;\n\t\tconst dy: number = playerTank.yPosition + playerTank.size / 2 - this.yPosition - this.tankMidpoint;\n\t\tlet theta = Math.atan2(dy, dx);\n\t\tif (theta < 0) {\n\t\t\ttheta += 2 * Math.PI;\n\t\t}\n\t\tthis.aimAngle = theta;\n\t}\n}\n","import { Ammunition } from '../Ammunition';\nimport { Bomb } from '../Bomb';\nimport { Tank } from '../tanks/Tank';\nimport { Navigator } from './Navigator';\n\nexport class StationaryNavigator extends Navigator {\n\tpublic aggressionFactor: number = 0;\n\n\tpublic draw(context: CanvasRenderingContext2D): void {\n\t\treturn;\n\t}\n\n\tupdatePosition(\n\t\tcurrentTank: Tank,\n\t\tplayerTank: Tank,\n\t\tenemyTanks: Tank[],\n\t\tammunition: Ammunition[],\n\t\tbombs: Bomb[]\n\t): void {\n\t\treturn;\n\t}\n}\n","import { PastelColorPalette } from '../../ui/PastelColorPalette';\nimport { Ammunition } from '../Ammunition';\nimport { AudioManager } from '../AudioManager';\nimport { Bomb } from '../Bomb';\nimport { ObstacleCanvas } from '../ObstacleCanvas';\nimport { NoReticule } from '../Reticule';\nimport { Navigator } from '../navigation/Navigator';\nimport { StationaryNavigator } from '../navigation/StationaryNavigator';\nimport { EnemyTank } from './EnemyTank';\nimport { Tank } from './Tank';\n\nexport class StationaryRandomAimTank extends EnemyTank {\n\tpublic aimAngleChangeAmount = 0;\n\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\txPosition: number,\n\t\tyPosition: number,\n\t\tobstacleCanvas: ObstacleCanvas,\n\t\tammunition: Ammunition[],\n\t\taudioManager: AudioManager\n\t) {\n\t\tconst stationaryRandomAimTankSpeed = 0;\n\t\tconst stationaryRandomAimTankSize = 30;\n\t\tconst stationaryRandomAimTankAggressionFactor = 0;\n\t\tconst fastTankColor = PastelColorPalette.BABY_BLUE;\n\t\tconst bombs: Bomb[] = [];\n\t\tconst navigator: Navigator = new StationaryNavigator();\n\t\tsuper(\n\t\t\tcanvas,\n\t\t\tnew NoReticule(),\n\t\t\txPosition,\n\t\t\tyPosition,\n\t\t\tstationaryRandomAimTankSpeed,\n\t\t\tstationaryRandomAimTankSize,\n\t\t\tstationaryRandomAimTankAggressionFactor,\n\t\t\tfastTankColor,\n\t\t\tobstacleCanvas,\n\t\t\tammunition,\n\t\t\tbombs,\n\t\t\taudioManager,\n\t\t\tnavigator\n\t\t);\n\t}\n\n\tprivate getAngleChangeAmount(): number {\n\t\tconst max = 360;\n\t\tconst min = -360;\n\t\tconst randomAmount: number = Math.floor(Math.random() * (max - min + 1)) + min;\n\t\treturn randomAmount;\n\t}\n\n\tpublic override updatePosition(playerTank: Tank): void {\n\t\treturn;\n\t}\n\n\tpublic override shoot(playerTank: Tank): void {\n\t\tconst availableAmmunitionIndex = this.ammunition.findIndex((ammunition) => ammunition.isDestroyed);\n\t\tif (availableAmmunitionIndex !== -1) {\n\t\t\tthis.ammunition[availableAmmunitionIndex].reload(\n\t\t\t\tthis.gunBarrellEndX,\n\t\t\t\tthis.gunBarrellEndY,\n\t\t\t\tthis.aimAngle,\n\t\t\t\ttrue,\n\t\t\t\tthis.canvasWidth,\n\t\t\t\tthis.canvasHeight\n\t\t\t);\n\t\t\tconst willHitPlayerTank: boolean = this.ammunition[availableAmmunitionIndex].willHitPlayerTank(\n\t\t\t\tthis.obstacleCanvas,\n\t\t\t\tplayerTank\n\t\t\t);\n\t\t\tif (willHitPlayerTank) {\n\t\t\t\tthis.ammunition[availableAmmunitionIndex].isDestroyed = false;\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tpublic override aim(mouseXPos: number, mouseYpos: number, playerTank: Tank): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.aimAngleChangeAmount > 0) {\n\t\t\tthis.aimAngle += 0.01;\n\t\t\tthis.aimAngleChangeAmount -= 1;\n\t\t} else if (this.aimAngleChangeAmount < 0) {\n\t\t\tthis.aimAngle -= 0.01;\n\t\t\tthis.aimAngleChangeAmount += 1;\n\t\t} else {\n\t\t\tthis.aimAngleChangeAmount = this.getAngleChangeAmount();\n\t\t}\n\t}\n}\n","import { PastelColorPalette } from '../../ui/PastelColorPalette';\nimport { Ammunition, BasicAIAmmunition } from '../Ammunition';\nimport { AudioManager } from '../AudioManager';\nimport { Bomb } from '../Bomb';\nimport { ObstacleCanvas } from '../ObstacleCanvas';\nimport { NoReticule } from '../Reticule';\nimport { Navigator } from '../navigation/Navigator';\nimport { StationaryNavigator } from '../navigation/StationaryNavigator';\nimport { EnemyTank } from './EnemyTank';\nimport { Tank } from './Tank';\n\nexport class StationaryTank extends EnemyTank {\n\tminTimeBetweenShotsMS = 5000;\n\ttimeBetweenShotsIsElapsed = false;\n\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\txPosition: number,\n\t\tyPosition: number,\n\t\tobstacleCanvas: ObstacleCanvas,\n\t\taudioManager: AudioManager\n\t) {\n\t\tconst stationaryTankSpeed = 0;\n\t\tconst stationaryTankSize = 30;\n\t\tconst stationaryTankAggressionFactor = 0;\n\t\tconst stationaryTankColor = PastelColorPalette.PALE_GRAY;\n\t\tconst ammunition: Ammunition[] = [new BasicAIAmmunition(0, 0, 0, 0, 0, true, audioManager)];\n\t\tconst bombs: Bomb[] = [];\n\t\tconst navigator: Navigator = new StationaryNavigator();\n\t\tsuper(\n\t\t\tcanvas,\n\t\t\tnew NoReticule(),\n\t\t\txPosition,\n\t\t\tyPosition,\n\t\t\tstationaryTankSpeed,\n\t\t\tstationaryTankSize,\n\t\t\tstationaryTankAggressionFactor,\n\t\t\tstationaryTankColor,\n\t\t\tobstacleCanvas,\n\t\t\tammunition,\n\t\t\tbombs,\n\t\t\taudioManager,\n\t\t\tnavigator\n\t\t);\n\t\tsetTimeout(() => {\n\t\t\tthis.timeBetweenShotsIsElapsed = true;\n\t\t}, 1000);\n\t}\n\n\tpublic override updatePosition(playerTank: Tank): void {\n\t\treturn;\n\t}\n\n\tpublic override shoot(playerTank: Tank): void {\n\t\tif (!this.timeBetweenShotsIsElapsed || this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\t\tconst availableAmmunitionIndex = this.ammunition.findIndex((ammunition) => ammunition.isDestroyed);\n\t\tif (availableAmmunitionIndex !== -1) {\n\t\t\tthis.ammunition[availableAmmunitionIndex].reload(\n\t\t\t\tthis.gunBarrellEndX,\n\t\t\t\tthis.gunBarrellEndY,\n\t\t\t\tthis.aimAngle,\n\t\t\t\ttrue,\n\t\t\t\tthis.canvasWidth,\n\t\t\t\tthis.canvasHeight\n\t\t\t);\n\t\t\tconst willHitPlayerTank: boolean = this.ammunition[availableAmmunitionIndex].willHitPlayerTank(\n\t\t\t\tthis.obstacleCanvas,\n\t\t\t\tplayerTank\n\t\t\t);\n\t\t\tif (willHitPlayerTank) {\n\t\t\t\tthis.ammunition[availableAmmunitionIndex].isDestroyed = false;\n\t\t\t\tthis.timeBetweenShotsIsElapsed = false;\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.timeBetweenShotsIsElapsed = true;\n\t\t\t\t}, this.minTimeBetweenShotsMS);\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tpublic override aim(mouseXPos: number, mouseYpos: number, playerTank: Tank): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst dx: number = playerTank.xPosition + playerTank.size / 2 - this.xPosition - this.tankMidpoint;\n\t\tconst dy: number = playerTank.yPosition + playerTank.size / 2 - this.yPosition - this.tankMidpoint;\n\t\tlet theta = Math.atan2(dy, dx);\n\t\tif (theta < 0) {\n\t\t\ttheta += 2 * Math.PI;\n\t\t}\n\t\tthis.aimAngle = theta;\n\t}\n}\n","import { PastelColorPalette } from '../../ui/PastelColorPalette';\nimport { Ammunition } from '../Ammunition';\nimport { AudioManager } from '../AudioManager';\nimport { Bomb } from '../Bomb';\nimport { Navigator } from '../navigation/Navigator';\nimport { ObstacleCanvas } from '../ObstacleCanvas';\nimport { NoReticule } from '../Reticule';\nimport { EnemyTank } from './EnemyTank';\nimport { Tank } from './Tank';\n\nexport class SuperBomberMovingTank extends EnemyTank {\n\tpublic minTimeBetweenShotsMS = 1000;\n\tpublic timeBetweenShotsIsElapsed = false;\n\tpublic minTimeBetweenBombPlantsMS = 1000;\n\tpublic timeBetweenPlantsIsElapsed = true;\n\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\txPosition: number,\n\t\tyPosition: number,\n\t\tobstacleCanvas: ObstacleCanvas,\n\t\tammunition: Ammunition[],\n\t\tbombs: Bomb[],\n\t\tnavigator: Navigator,\n\t\taudioManager: AudioManager\n\t) {\n\t\tconst superBomberMovingTankSpeed = 2.2;\n\t\tconst superBomberMovingTankSize = 30;\n\t\tconst superBomberMovingTankAggressionFactor = 5;\n\t\tconst superBomberMovingTankColor = PastelColorPalette.BLUSH_PINK;\n\t\tsuper(\n\t\t\tcanvas,\n\t\t\tnew NoReticule(),\n\t\t\txPosition,\n\t\t\tyPosition,\n\t\t\tsuperBomberMovingTankSpeed,\n\t\t\tsuperBomberMovingTankSize,\n\t\t\tsuperBomberMovingTankAggressionFactor,\n\t\t\tsuperBomberMovingTankColor,\n\t\t\tobstacleCanvas,\n\t\t\tammunition,\n\t\t\tbombs,\n\t\t\taudioManager,\n\t\t\tnavigator\n\t\t);\n\t\tsetTimeout(() => {\n\t\t\tthis.timeBetweenShotsIsElapsed = true;\n\t\t}, 1000);\n\t}\n\n\tpublic override plantBomb(playerTank: Tank): void {\n\t\tif (this.timeBetweenPlantsIsElapsed && !this.isDestroyed) {\n\t\t\tconst availableBombIndex = this.bombs.findIndex((bomb) => bomb.isDestroyed && !bomb.isExploding());\n\t\t\tif (availableBombIndex !== -1) {\n\t\t\t\tthis.bombs[availableBombIndex].xPosition = this.xPosition + this.size / 2;\n\t\t\t\tthis.bombs[availableBombIndex].yPosition = this.yPosition + this.size / 2;\n\t\t\t\tconst willHitPlayerTank: boolean = this.bombs[availableBombIndex].isTankInsideBlastRadius(playerTank);\n\t\t\t\tif (willHitPlayerTank) {\n\t\t\t\t\tthis.bombs[availableBombIndex].setFuse();\n\t\t\t\t\tthis.timeBetweenPlantsIsElapsed = false;\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.timeBetweenPlantsIsElapsed = true;\n\t\t\t\t\t}, this.minTimeBetweenBombPlantsMS);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tpublic override shoot(playerTank: Tank): void {\n\t\tif (this.timeBetweenShotsIsElapsed && !this.isDestroyed) {\n\t\t\tconst availableAmmunitionIndex = this.ammunition.findIndex((ammunition) => ammunition.isDestroyed);\n\t\t\tif (availableAmmunitionIndex !== -1) {\n\t\t\t\tthis.ammunition[availableAmmunitionIndex].reload(\n\t\t\t\t\tthis.gunBarrellEndX,\n\t\t\t\t\tthis.gunBarrellEndY,\n\t\t\t\t\tthis.aimAngle,\n\t\t\t\t\ttrue,\n\t\t\t\t\tthis.canvasWidth,\n\t\t\t\t\tthis.canvasHeight\n\t\t\t\t);\n\t\t\t\tconst willHitPlayerTank: boolean = this.ammunition[availableAmmunitionIndex].willHitPlayerTank(\n\t\t\t\t\tthis.obstacleCanvas,\n\t\t\t\t\tplayerTank\n\t\t\t\t);\n\t\t\t\tif (willHitPlayerTank) {\n\t\t\t\t\tthis.ammunition[availableAmmunitionIndex].isDestroyed = false;\n\t\t\t\t\tthis.timeBetweenShotsIsElapsed = false;\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.timeBetweenShotsIsElapsed = true;\n\t\t\t\t\t}, this.minTimeBetweenShotsMS);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tpublic override aim(mouseXPos: number, mouseYpos: number, playerTank: Tank): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst dx: number = playerTank.xPosition + playerTank.size / 2 - this.xPosition - this.tankMidpoint;\n\t\tconst dy: number = playerTank.yPosition + playerTank.size / 2 - this.yPosition - this.tankMidpoint;\n\t\tlet theta = Math.atan2(dy, dx);\n\t\tif (theta < 0) {\n\t\t\ttheta += 2 * Math.PI;\n\t\t}\n\t\tthis.aimAngle = theta;\n\t}\n}\n","import { Ammunition, BasicAIAmmunition, SuperAIAmmunition } from './Ammunition';\nimport { AudioManager } from './AudioManager';\nimport { BasicBomb, Bomb, LoveBomb } from './Bomb';\nimport { GameCanvas } from './GameCanvas';\nimport { Obstacle } from './Obstacle';\nimport { ObstacleCanvas } from './ObstacleCanvas';\nimport { AStarNavigator } from './navigation/AStarNavigator';\nimport { NavigationGrid } from './navigation/NavigationGrid';\nimport { Navigator } from './navigation/Navigator';\nimport { SimpleNavigator } from './navigation/SimpleNavigator';\nimport { SimplePathfinder } from './navigation/SimplePathFinder';\nimport { BomberTank } from './tanks/BomberTank';\nimport { DefaultPlayerTank } from './tanks/PlayerTank';\nimport { SimpleMovingTank } from './tanks/SimpleMovingTank';\nimport { StationaryRandomAimTank } from './tanks/StationaryRandomAimTank';\nimport { StationaryTank } from './tanks/StationaryTank';\nimport { SuperBomberMovingTank } from './tanks/SuperBomberMovingTank';\n\nexport class Level {\n\tpublic gameCanvas: GameCanvas;\n\tpublic obstacleCanvas: ObstacleCanvas;\n\tpublic canvasWidth = 1000;\n\tpublic canvasHeight = 500;\n\tpublic audioManager: AudioManager;\n\n\tconstructor(obstacleCanvas: ObstacleCanvas, audioManager: AudioManager) {\n\t\tthis.obstacleCanvas = obstacleCanvas;\n\t\tthis.gameCanvas = new GameCanvas('#game-canvas', this.canvasWidth, this.canvasHeight, obstacleCanvas);\n\t\tthis.audioManager = audioManager;\n\t}\n\n\tpublic stop() {\n\t\tthis.gameCanvas.stop();\n\t}\n\n\tpublic start() {\n\t\tthis.gameCanvas.start();\n\t}\n}\n\nexport class Level1 extends Level {\n\tconstructor(audioManager: AudioManager) {\n\t\tconst obs: Obstacle = new Obstacle(300, 200, 40, 100);\n\t\tconst obstacleCanvas = new ObstacleCanvas('#obstacle-canvas', 1000, 500, [obs]);\n\t\tsuper(obstacleCanvas, audioManager);\n\t\tconst stationaryTank = new StationaryTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t900,\n\t\t\t240,\n\t\t\tobstacleCanvas,\n\t\t\taudioManager\n\t\t);\n\t\tthis.gameCanvas.addEnemyTank(stationaryTank);\n\n\t\tconst playerTank = new DefaultPlayerTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t100,\n\t\t\t250,\n\t\t\tobstacleCanvas,\n\t\t\taudioManager\n\t\t);\n\t\tthis.gameCanvas.addPlayerTank(playerTank);\n\t}\n}\n\nexport class Level2 extends Level {\n\tconstructor(audioManager: AudioManager) {\n\t\tconst obs: Obstacle = new Obstacle(300, 200, 40, 100);\n\t\tconst obstacleCanvas = new ObstacleCanvas('#obstacle-canvas', 1000, 500, [obs]);\n\t\tsuper(obstacleCanvas, audioManager);\n\n\t\tconst stationaryTank1 = new StationaryTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t800,\n\t\t\t100,\n\t\t\tobstacleCanvas,\n\t\t\taudioManager\n\t\t);\n\t\tconst stationaryTank2 = new StationaryTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t900,\n\t\t\t240,\n\t\t\tobstacleCanvas,\n\t\t\taudioManager\n\t\t);\n\t\tconst stationaryTank3 = new StationaryTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t800,\n\t\t\t400,\n\t\t\tobstacleCanvas,\n\t\t\taudioManager\n\t\t);\n\t\tthis.gameCanvas.addEnemyTank(stationaryTank1);\n\t\tthis.gameCanvas.addEnemyTank(stationaryTank2);\n\t\tthis.gameCanvas.addEnemyTank(stationaryTank3);\n\n\t\tconst playerTank = new DefaultPlayerTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t100,\n\t\t\t250,\n\t\t\tobstacleCanvas,\n\t\t\taudioManager\n\t\t);\n\t\tthis.gameCanvas.addPlayerTank(playerTank);\n\t}\n}\n\nexport class Level3 extends Level {\n\tconstructor(audioManager: AudioManager) {\n\t\tconst obs: Obstacle = new Obstacle(700, 150, 30, 250);\n\t\tconst obstacleCanvas = new ObstacleCanvas('#obstacle-canvas', 1000, 500, [obs]);\n\t\tsuper(obstacleCanvas, audioManager);\n\t\tconst superAmmo: Ammunition[] = [new SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager)];\n\t\tconst aiTank = new StationaryRandomAimTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t900,\n\t\t\t250,\n\t\t\tobstacleCanvas,\n\t\t\tsuperAmmo,\n\t\t\taudioManager\n\t\t);\n\t\tthis.gameCanvas.addEnemyTank(aiTank);\n\n\t\tconst playerTank = new DefaultPlayerTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t200,\n\t\t\t250,\n\t\t\tobstacleCanvas,\n\t\t\taudioManager\n\t\t);\n\t\tthis.gameCanvas.addPlayerTank(playerTank);\n\t}\n}\n\nexport class Level4 extends Level {\n\tconstructor(audioManager: AudioManager) {\n\t\tconst obs: Obstacle = new Obstacle(300, 130, 500, 35);\n\t\tconst obs2: Obstacle = new Obstacle(200, 330, 500, 35);\n\t\tconst obstacleCanvas = new ObstacleCanvas('#obstacle-canvas', 1000, 500, [obs, obs2]);\n\t\tsuper(obstacleCanvas, audioManager);\n\t\tconst basicAmmo: Ammunition[] = [new BasicAIAmmunition(0, 0, 0, 0, 0, true, audioManager)];\n\t\tconst basicBomb: Bomb[] = [];\n\t\tconst simplePathFinder: SimplePathfinder = new SimplePathfinder(this.gameCanvas, this.obstacleCanvas, false);\n\t\tconst navigator: Navigator = new SimpleNavigator(simplePathFinder);\n\t\tconst aiTank = new SimpleMovingTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t900,\n\t\t\t50,\n\t\t\tobstacleCanvas,\n\t\t\tbasicAmmo,\n\t\t\tbasicBomb,\n\t\t\tnavigator,\n\t\t\taudioManager\n\t\t);\n\t\tthis.gameCanvas.addEnemyTank(aiTank);\n\n\t\tconst playerTank = new DefaultPlayerTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t50,\n\t\t\t450,\n\t\t\tobstacleCanvas,\n\t\t\taudioManager\n\t\t);\n\t\tthis.gameCanvas.addPlayerTank(playerTank);\n\t}\n}\n\nexport class Level5 extends Level {\n\tconstructor(audioManager: AudioManager) {\n\t\tconst obs: Obstacle = new Obstacle(100, 100, 200, 100);\n\t\tconst obs2: Obstacle = new Obstacle(700, 100, 30, 100);\n\t\tconst obs3: Obstacle = new Obstacle(700, 350, 30, 100);\n\t\tconst obstacleCanvas = new ObstacleCanvas('#obstacle-canvas', 1000, 500, [obs, obs2, obs3]);\n\t\tsuper(obstacleCanvas, audioManager);\n\t\tconst basicAmmo: Ammunition[] = [new BasicAIAmmunition(0, 0, 0, 0, 0, true, audioManager)];\n\t\tconst superAmmo: Ammunition[] = [new SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager)];\n\t\tconst basicBomb: Bomb[] = [];\n\t\tconst navigationGrid: NavigationGrid = new NavigationGrid(this.gameCanvas, this.obstacleCanvas, false);\n\t\tconst navigator: Navigator = new AStarNavigator(navigationGrid);\n\t\tconst aiTank3 = new SimpleMovingTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t800,\n\t\t\t300,\n\t\t\tobstacleCanvas,\n\t\t\tbasicAmmo,\n\t\t\tbasicBomb,\n\t\t\tnavigator,\n\t\t\taudioManager\n\t\t);\n\t\tconst aiTank = new StationaryRandomAimTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t800,\n\t\t\t100,\n\t\t\tobstacleCanvas,\n\t\t\tsuperAmmo,\n\t\t\taudioManager\n\t\t);\n\t\tconst aiTank2 = new StationaryTank(this.gameCanvas.gameRenderer.canvas, 800, 200, obstacleCanvas, audioManager);\n\t\tthis.gameCanvas.addEnemyTank(aiTank3);\n\t\tthis.gameCanvas.addEnemyTank(aiTank);\n\t\tthis.gameCanvas.addEnemyTank(aiTank2);\n\n\t\tconst playerTank = new DefaultPlayerTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t200,\n\t\t\t250,\n\t\t\tobstacleCanvas,\n\t\t\taudioManager\n\t\t);\n\t\tthis.gameCanvas.addPlayerTank(playerTank);\n\t}\n}\n\nexport class Level6 extends Level {\n\tconstructor(audioManager: AudioManager) {\n\t\tconst obs: Obstacle = new Obstacle(100, 100, 200, 100);\n\t\tconst obs2: Obstacle = new Obstacle(700, 100, 30, 300);\n\t\tconst obstacleCanvas = new ObstacleCanvas('#obstacle-canvas', 1000, 500, [obs, obs2]);\n\t\tsuper(obstacleCanvas, audioManager);\n\n\t\tconst basicBombs: Bomb[] = [\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t];\n\t\tconst basicBombs2: Bomb[] = [\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t];\n\t\tconst basicBombs3: Bomb[] = [\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t];\n\n\t\tconst navigationGrid: NavigationGrid = new NavigationGrid(this.gameCanvas, this.obstacleCanvas, false);\n\t\tconst navigationGrid2: NavigationGrid = new NavigationGrid(this.gameCanvas, this.obstacleCanvas, false);\n\t\tconst navigationGrid3: NavigationGrid = new NavigationGrid(this.gameCanvas, this.obstacleCanvas, false);\n\t\tconst navigator1: Navigator = new AStarNavigator(navigationGrid);\n\t\tconst navigator2: Navigator = new AStarNavigator(navigationGrid2);\n\t\tconst navigator3: Navigator = new AStarNavigator(navigationGrid3);\n\t\tconst aiTank = new BomberTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t800,\n\t\t\t100,\n\t\t\tobstacleCanvas,\n\t\t\t[new BasicAIAmmunition(0, 0, 0, 0, 0, true, audioManager)],\n\t\t\tbasicBombs,\n\t\t\tnavigator1,\n\t\t\taudioManager\n\t\t);\n\t\tconst aiTank2 = new BomberTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t800,\n\t\t\t200,\n\t\t\tobstacleCanvas,\n\t\t\t[new BasicAIAmmunition(0, 0, 0, 0, 0, true, audioManager)],\n\t\t\tbasicBombs2,\n\t\t\tnavigator2,\n\t\t\taudioManager\n\t\t);\n\t\tconst aiTank3 = new BomberTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t800,\n\t\t\t300,\n\t\t\tobstacleCanvas,\n\t\t\t[new BasicAIAmmunition(0, 0, 0, 0, 0, true, audioManager)],\n\t\t\tbasicBombs3,\n\t\t\tnavigator3,\n\t\t\taudioManager\n\t\t);\n\n\t\tthis.gameCanvas.addEnemyTank(aiTank);\n\t\tthis.gameCanvas.addEnemyTank(aiTank2);\n\t\tthis.gameCanvas.addEnemyTank(aiTank3);\n\n\t\tconst playerTank = new DefaultPlayerTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t200,\n\t\t\t250,\n\t\t\tobstacleCanvas,\n\t\t\taudioManager\n\t\t);\n\t\tthis.gameCanvas.addPlayerTank(playerTank);\n\t}\n}\n\nexport class Level7 extends Level {\n\tconstructor(audioManager: AudioManager) {\n\t\tconst obs1: Obstacle = new Obstacle(0, 120, 400, 50);\n\t\tconst obs2: Obstacle = new Obstacle(600, 120, 400, 50);\n\n\t\tconst obs3: Obstacle = new Obstacle(0, 330, 400, 50);\n\t\tconst obs4: Obstacle = new Obstacle(600, 330, 400, 50);\n\t\tconst obstacleCanvas = new ObstacleCanvas('#obstacle-canvas', 1000, 500, [obs1, obs2, obs3, obs4]);\n\t\tsuper(obstacleCanvas, audioManager);\n\n\t\tconst superAmmo1: Ammunition[] = [new SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager)];\n\t\tconst aiTank1 = new StationaryRandomAimTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t900,\n\t\t\t50,\n\t\t\tobstacleCanvas,\n\t\t\tsuperAmmo1,\n\t\t\taudioManager\n\t\t);\n\n\t\tconst superAmmo2: Ammunition[] = [new SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager)];\n\t\tconst aiTank2 = new StationaryRandomAimTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t900,\n\t\t\t250,\n\t\t\tobstacleCanvas,\n\t\t\tsuperAmmo2,\n\t\t\taudioManager\n\t\t);\n\n\t\tconst superAmmo3: Ammunition[] = [new SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager)];\n\t\tconst aiTank3 = new StationaryRandomAimTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t900,\n\t\t\t430,\n\t\t\tobstacleCanvas,\n\t\t\tsuperAmmo3,\n\t\t\taudioManager\n\t\t);\n\n\t\tconst superAmmo4: Ammunition[] = [new SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager)];\n\t\tconst aiTank4 = new StationaryRandomAimTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t100,\n\t\t\t50,\n\t\t\tobstacleCanvas,\n\t\t\tsuperAmmo4,\n\t\t\taudioManager\n\t\t);\n\n\t\tconst superAmmo5: Ammunition[] = [new SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager)];\n\t\tconst aiTank5 = new StationaryRandomAimTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t100,\n\t\t\t250,\n\t\t\tobstacleCanvas,\n\t\t\tsuperAmmo5,\n\t\t\taudioManager\n\t\t);\n\n\t\tthis.gameCanvas.addEnemyTank(aiTank1);\n\t\tthis.gameCanvas.addEnemyTank(aiTank2);\n\t\tthis.gameCanvas.addEnemyTank(aiTank3);\n\t\tthis.gameCanvas.addEnemyTank(aiTank4);\n\t\tthis.gameCanvas.addEnemyTank(aiTank5);\n\n\t\tconst playerTank = new DefaultPlayerTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t100,\n\t\t\t430,\n\t\t\tobstacleCanvas,\n\t\t\taudioManager\n\t\t);\n\t\tthis.gameCanvas.addPlayerTank(playerTank);\n\t}\n}\n\nexport class Level8 extends Level {\n\tconstructor(audioManager: AudioManager) {\n\t\tconst obs: Obstacle = new Obstacle(700, 100, 30, 300);\n\t\tconst obstacleCanvas = new ObstacleCanvas('#obstacle-canvas', 1000, 500, [obs]);\n\t\tsuper(obstacleCanvas, audioManager);\n\t\tconst basicAmmo: Ammunition[] = [\n\t\t\tnew SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t];\n\t\tconst basicAmmo2: Ammunition[] = [\n\t\t\tnew SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t];\n\t\tconst basicAmmo3: Ammunition[] = [\n\t\t\tnew SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t];\n\n\t\tconst basicBombs: Bomb[] = [new LoveBomb(0, 0, true, audioManager), new LoveBomb(0, 0, true, audioManager)];\n\t\tconst basicBombs2: Bomb[] = [new LoveBomb(0, 0, true, audioManager), new LoveBomb(0, 0, true, audioManager)];\n\t\tconst basicBombs3: Bomb[] = [new LoveBomb(0, 0, true, audioManager), new LoveBomb(0, 0, true, audioManager)];\n\n\t\tconst navigationGrid: NavigationGrid = new NavigationGrid(this.gameCanvas, this.obstacleCanvas, false);\n\t\tconst navigationGrid2: NavigationGrid = new NavigationGrid(this.gameCanvas, this.obstacleCanvas, false);\n\t\tconst navigationGrid3: NavigationGrid = new NavigationGrid(this.gameCanvas, this.obstacleCanvas, false);\n\t\tconst navigator1: Navigator = new AStarNavigator(navigationGrid);\n\t\tnavigator1.aggressionFactor = 5;\n\t\tconst navigator2: Navigator = new AStarNavigator(navigationGrid2);\n\t\tnavigator2.aggressionFactor = 10;\n\t\tconst navigator3: Navigator = new AStarNavigator(navigationGrid3);\n\t\tnavigator3.aggressionFactor = 15;\n\t\tconst aiTank = new SuperBomberMovingTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t800,\n\t\t\t100,\n\t\t\tobstacleCanvas,\n\t\t\tbasicAmmo,\n\t\t\tbasicBombs,\n\t\t\tnavigator1,\n\t\t\taudioManager\n\t\t);\n\t\tconst aiTank2 = new SuperBomberMovingTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t800,\n\t\t\t200,\n\t\t\tobstacleCanvas,\n\t\t\tbasicAmmo2,\n\t\t\tbasicBombs2,\n\t\t\tnavigator2,\n\t\t\taudioManager\n\t\t);\n\t\tconst aiTank3 = new SuperBomberMovingTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t800,\n\t\t\t300,\n\t\t\tobstacleCanvas,\n\t\t\tbasicAmmo3,\n\t\t\tbasicBombs3,\n\t\t\tnavigator3,\n\t\t\taudioManager\n\t\t);\n\n\t\tthis.gameCanvas.addEnemyTank(aiTank);\n\t\tthis.gameCanvas.addEnemyTank(aiTank2);\n\t\tthis.gameCanvas.addEnemyTank(aiTank3);\n\n\t\tconst playerTank = new DefaultPlayerTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t200,\n\t\t\t250,\n\t\t\tobstacleCanvas,\n\t\t\taudioManager\n\t\t);\n\t\tthis.gameCanvas.addPlayerTank(playerTank);\n\t}\n}\n","import '../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport '../node_modules/bootstrap/dist/js/bootstrap.min.js';\nimport './css/style.css';\n\nimport { LevelSelector } from './ui/LevelSelector';\n\nconst levelSelector: LevelSelector = new LevelSelector(8);\n","import * as d3 from 'd3';\nimport packageJson from '../../package.json';\nimport { AudioManager } from '../game/AudioManager';\nimport { Level, Level1, Level2, Level3, Level4, Level5, Level6, Level7, Level8 } from '../game/Level';\n\nexport class LevelSelector {\n\tprivate numLevels: number;\n\tprivate activeLevelNumber: number;\n\tprivate activeLevel: Level;\n\tprivate sliderWidth: number = Math.min(window.innerWidth * 0.8, 600); // Responsive width\n\tprivate audioManager: AudioManager;\n\n\tconstructor(levels: number) {\n\t\tthis.numLevels = levels;\n\t\tthis.audioManager = new AudioManager();\n\t\tconst audioPromise: Promise<void[]> = this.audioManager.loadAllAudio();\n\t\taudioPromise.then((): void => {\n\t\t\tthis.audioManager.playBackgroundMusic();\n\t\t});\n\t\tthis.activeLevelNumber = 1;\n\t\tthis.activeLevel = new Level1(this.audioManager);\n\t\tthis.setHeader();\n\t\tthis.createSlider();\n\t\tthis.createJumbotron();\n\t}\n\n\tpublic setHeader() {\n\t\tconst header: HTMLElement | null = document.getElementById('main-header');\n\t\tif (header) {\n\t\t\theader.textContent = `Treads V${packageJson.version}`;\n\t\t}\n\t}\n\n\tpublic startActiveLevel() {\n\t\tthis.activeLevel.stop();\n\t\tswitch (this.activeLevelNumber) {\n\t\t\tcase 1:\n\t\t\t\tthis.activeLevel = new Level1(this.audioManager);\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tthis.activeLevel = new Level2(this.audioManager);\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tthis.activeLevel = new Level3(this.audioManager);\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tthis.activeLevel = new Level4(this.audioManager);\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tthis.activeLevel = new Level5(this.audioManager);\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\tthis.activeLevel = new Level6(this.audioManager);\n\t\t\t\tbreak;\n\t\t\tcase 7:\n\t\t\t\tthis.activeLevel = new Level7(this.audioManager);\n\t\t\t\tbreak;\n\t\t\tcase 8:\n\t\t\t\tthis.activeLevel = new Level8(this.audioManager);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.activeLevel = new Level1(this.audioManager);\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.activeLevel.start();\n\t}\n\n\tprivate createSlider(): void {\n\t\tconst margin: { top: number; right: number; bottom: number; left: number } = {\n\t\t\ttop: 10,\n\t\t\tright: 10,\n\t\t\tbottom: 20,\n\t\t\tleft: 10,\n\t\t};\n\t\tconst effectiveWidth: number = this.sliderWidth - margin.left - margin.right;\n\n\t\tconst scale: d3.ScaleLinear<number, number, never> = d3\n\t\t\t.scaleLinear()\n\t\t\t.domain([1, this.numLevels])\n\t\t\t.range([0, effectiveWidth])\n\t\t\t.clamp(true);\n\n\t\tconst svg: d3.Selection<SVGSVGElement, unknown, HTMLElement, any> = d3\n\t\t\t.select('#slider')\n\t\t\t.append('svg')\n\t\t\t.attr('width', this.sliderWidth)\n\t\t\t.attr('height', 50);\n\n\t\tconst sliderGroup: d3.Selection<SVGGElement, unknown, HTMLElement, any> = svg\n\t\t\t.append('g')\n\t\t\t.attr('transform', `translate(${margin.left}, 30)`);\n\n\t\tsliderGroup.append('g').call(d3.axisBottom(scale).ticks(this.numLevels).tickFormat(d3.format('1')));\n\n\t\tconst handle: d3.Selection<SVGCircleElement, unknown, HTMLElement, any> = sliderGroup\n\t\t\t.append('circle')\n\t\t\t.attr('cx', scale(this.activeLevelNumber))\n\t\t\t.attr('cy', -10)\n\t\t\t.attr('r', 10)\n\t\t\t.style('fill', 'red')\n\t\t\t.style('cursor', 'ew-resize');\n\t\tconst dragHandler: d3.DragBehavior<SVGCircleElement, unknown, unknown> = d3\n\t\t\t.drag<SVGCircleElement, unknown>()\n\t\t\t.on('drag', (event) => {\n\t\t\t\tconst x = event.x - margin.left; // Adjusting for the left margin\n\t\t\t\tconst level = Math.round(scale.invert(x));\n\t\t\t\thandle.attr('cx', scale(level));\n\t\t\t\tthis.updateActiveLevel(level);\n\t\t\t});\n\n\t\thandle.call(dragHandler);\n\t}\n\n\tprivate createJumbotron(): void {\n\t\tconst jumbotron: d3.Selection<d3.BaseType, unknown, HTMLElement, any> = d3.select('#jumbotron');\n\t\tconst colorScale = d3.scaleLinear<string>().domain([1, this.numLevels]).range(['lightblue', 'lightcoral']);\n\t\tfor (let i = 1; i <= this.numLevels; i++) {\n\t\t\tconst box: d3.Selection<HTMLDivElement, unknown, HTMLElement, any> = jumbotron\n\t\t\t\t.append('div')\n\t\t\t\t.attr('class', 'jumbotron-box inactive')\n\t\t\t\t.on('click', () => this.updateActiveLevel(i));\n\n\t\t\t// Example of how you can append an SVG to a jumbotron box.\n\t\t\tconst svg: d3.Selection<SVGSVGElement, unknown, HTMLElement, any> = box\n\t\t\t\t.append('svg')\n\t\t\t\t.attr('width', '100%')\n\t\t\t\t.attr('height', '100%');\n\n\t\t\tsvg\n\t\t\t\t.append('rect') // Placeholder for actual SVG content.\n\t\t\t\t.attr('width', '100%')\n\t\t\t\t.attr('height', '100%')\n\t\t\t\t.attr('fill', colorScale(i));\n\t\t\tsvg\n\t\t\t\t.append('text')\n\t\t\t\t.attr('x', '50%')\n\t\t\t\t.attr('y', '50%')\n\t\t\t\t.attr('dominant-baseline', 'middle')\n\t\t\t\t.attr('text-anchor', 'middle')\n\t\t\t\t.text(`Level ${i}`);\n\t\t}\n\t\tthis.updateActiveLevel(this.activeLevelNumber);\n\t}\n\n\tprivate updateActiveLevel(level: number): void {\n\t\tthis.activeLevelNumber = level;\n\t\td3.selectAll('.jumbotron-box')\n\t\t\t.classed('active', (_, i) => i + 1 === level)\n\t\t\t.classed('inactive', (_, i) => i + 1 !== level);\n\t\td3.select('circle').attr(\n\t\t\t'cx',\n\t\t\td3\n\t\t\t\t.scaleLinear()\n\t\t\t\t.domain([1, this.numLevels])\n\t\t\t\t.range([0, this.sliderWidth - 20])(level)\n\t\t);\n\t\tthis.startActiveLevel();\n\t}\n}\n"],"names":["AudioFile","Direction","AudioManager","constructor","this","audioContext","window","AudioContext","webkitAudioContext","audioBuffers","Map","backgroundMusicSource","loadAllAudio","promises","loadAudio","TANK_FIRE","TANK_DESTROY","BOMB_EXPLODE","BACKGROUND_MUSIC","AMMUNITION_EXPLODE","Promise","all","audioFile","url","fetch","then","response","arrayBuffer","decodeAudioData","audioBuffer","set","catch","error","console","play","buffer","get","source","createBufferSource","connect","destination","start","warn","getAudioContext","playBackgroundMusic","stopBackgroundMusic","loop","stop","disconnect","PastelColorPalette","BABY_BLUE","LAVENDER_BLUSH","PALE_YELLOW","PEACH_PUFF","BLUSH_PINK","LIGHT_AQUA","LIGHT_PINK","LIGHT_CORAL_PINK","MINT_CREAM","PALE_LAVENDER","CORAL_ORANGE","SOFT_PEACH","LIGHT_SALMON_PINK","LIGHT_ROSE","SOFT_ORANGE","SOFT_TEAL","PALE_MINT","LIGHT_SAGE","PALE_GREEN","MINT_GREEN","SOFT_PEACH_PINK","PALE_PEACH","PALE_GRAY","PALE_AQUA","SOFT_CYAN","LIGHT_LAVENDER","PALE_BLUE","LIGHT_MAUVE","LIGHT_LIME","LIGHT_GOLDENROD","PALE_ORANGE","LIGHT_YELLOW","LIGHT_IVORY","LIGHT_TURQUOISE","LIGHT_SEA_GREEN","LIGHT_PERIWINKLE","LIGHT_VIOLET","LIGHT_LILAC","LIGHT_APRICOT","LIGHT_BUTTERSCOTCH","LIGHT_MELON","LIGHT_TEA_GREEN","LIGHT_CRIMSON","LIGHT_PERSIAN_GREEN","LIGHT_SKY_BLUE","LIGHT_PASTEL_PURPLE","LIGHT_PASTEL_PINK","LIGHT_PASTEL_RED","LIGHT_PASTEL_BLUE","LIGHT_PASTEL_GREEN","LIGHT_PASTEL_ORANGE","LIGHT_PASTEL_YELLOW","PALE_BLACK","LIGHT_GRAY","GAINSBORO","PALE_SILVER","PALE_SMOKE","WHITE_SMOKE","OFF_WHITE","IVORY","ALABASTER","SEASHELL","BombFragment","x","y","radius","color","velocityX","velocityY","life","fragmentRadius","fragmentColor","blastRadius","update","draw","context","beginPath","arc","Math","PI","fillStyle","fill","closePath","checkHit","tank","xLeft","xRight","yTop","yBottom","Ammunition","startX","startY","theta","speed","maxBounces","canvasWidth","canvasHeight","isDestroyed","audioManager","isExploding","fragmentationRadius","fragments","fragmentColorScale","domain","range","xPosition","yPosition","xVelocity","cos","yVelocity","sin","bounces","updatePosition","obstacleCanvas","obstacles","forEach","obstacle","fromLeft","abs","fromRight","fromTop","fromBottom","minDistance","min","destroy","createFragments","setTimeout","checkEnemyHit","enemyTanks","enemyTank","log","checkPlayerHit","playerTank","checkAmmunitionCollision","ammunitions","ammunition","dx","dy","sqrt","checkBombCollision","bombs","bomb","reload","updateExplosion","lineWidth","strokeStyle","stroke","particle","filter","i","angle","random","fragment","push","willHitPlayerTank","predictedXPosition","predictedYPosition","predictedXVelocity","predictedYVelocity","predictedBounces","PlayerAmmunition","super","BasicAIAmmunition","SuperAIAmmunition","Bomb","fuseTimeoutId","blastDelayMS","fuseStartTime","shouldFlashRed","clearTimeout","setFuse","performance","now","animateFuse","isTankInsideBlastRadius","squareXCenter","tankMidpoint","squareYCenter","circleXCenter","circleYCenter","halfSideLength","max","some","fractionElapsed","threshold","requestAnimationFrame","PlayerBomb","BasicBomb","LoveBomb","save","translate","scale","moveTo","bezierCurveTo","restore","GameRenderer","canvas","playerWin","enemyWin","getContext","Error","initializeCanvas","width","height","renderLevelOverScreen","message","font","textWidth","measureText","fontSize","clearRect","strokeText","fillText","render","progress","every","allAmmunition","flatMap","allBombs","aim","aimXPos","aimYPos","shoot","plantBomb","reticule","GameCanvas","canvasSelector","animationFrameID","gameRenderer","document","querySelector","lastRenderTime","addEventListener","resizeCanvas","bind","gameLoop","cancelAnimationFrame","timeStamp","addEnemyTank","addPlayerTank","Obstacle","rect","ObstacleCanvas","obstacleCanvasSelector","clearObstacles","Navigator","AStarNavigator","navigationGrid","aggressionFactor","pathRecaculationInterval","currentNode","path","currentTank","length","reset","startNode","getNodeFromTank","targetNode","destinationNode","getRandomNodeInRadiusOfTarget","aStar","wasLastMoveBlocked","consecutiveDirectionMoves","randomDirection","getRandomDirection","moveInCardinalDirection","randomNumber","moveSouthEast","moveNorthEast","moveNorthWest","moveSouthWest","moveSouth","moveEast","moveNorth","moveWest","splice","size","Node","g","h","f","walkable","parent","NavigationGrid","gameCanvas","stationary","grid","gridCellWidth","gridXLength","gridYLength","floor","gridXLeft","gridXRight","gridYTop","gridYBottom","obs","lineTo","j","value","index","array","xGridCoordinate","yGridCoordinate","target","candidateNodes","node","distance","pow","openSet","closedSet","Set","current","sort","a","b","unshift","indexOf","add","neighbors","getWalkableNeighbors","neighbor","has","tentativeG","SQRT2","includes","round","SimpleNavigator","pathfinder","simplePathFinder","findPath","SimplePathfinder","moveTowardsGoal","currentPos","goalPos","possibleMoves","bestMove","Number","MAX_SAFE_INTEGER","move","isWithinBounds","isWalkable","position","goal","count","Reticule","dashPattern","renderReticule","tankSize","reticuleWidth","tankXPos","tankYPos","mouseXPos","mouseYpos","setLineDash","NoReticule","AdjustingCustomColorReticule","maxReticuleLength","tankXPosition","tankYPosition","mouseXPosition","mouseYPosition","xDist","yDist","distanceToMaxDistanceRatio","dashLength","spaceLength","xLength","Tank","gunBarrellWidth","twoPi","lastDirectionMoved","UNKNOWN","maxAmmunition","maxBombs","canvasRect","getBoundingClientRect","xOffset","left","yOffset","top","atan2","aimAngle","gunBarrellEndX","gunBarrellEndY","fillRect","lineJoin","strokeRect","grayValue","moveInLastDirectionMoved","enumValues","Object","keys","map","n","parseInt","isNaN","direction","NORTH","SOUTH","EAST","WEST","NORTHEAST","NORTHWEST","SOUTHEAST","SOUTHWEST","values","randomIndex","blocked","blockedNorth","blockedEast","blockedWest","blockedSouth","EnemyTank","navigator","drawNavigation","BomberTank","bomberTankColor","minTimeBetweenShotsMS","timeBetweenShotsIsElapsed","minTimeBetweenBombPlantsMS","timeBetweenPlantsIsElapsed","availableBombIndex","findIndex","availableAmmunitionIndex","PlayerTank","keyStates","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","w","s","d","W","A","S","D","event","hasOwnProperty","key","code","clientX","clientY","contains","up","right","down","DefaultPlayerTank","xPos","yPos","defaultPlayerTankColor","viewportWidth","innerWidth","distanceFromLeft","distanceFromRight","SimpleMovingTank","simpleMovingTankColor","StationaryNavigator","StationaryRandomAimTank","fastTankColor","aimAngleChangeAmount","getAngleChangeAmount","StationaryTank","stationaryTankColor","SuperBomberMovingTank","superBomberMovingTankColor","Level","Level1","stationaryTank","Level2","stationaryTank1","stationaryTank2","stationaryTank3","Level3","superAmmo","aiTank","Level4","obs2","basicAmmo","Level5","obs3","aiTank3","aiTank2","Level6","basicBombs","basicBombs2","basicBombs3","navigationGrid2","navigationGrid3","navigator1","navigator2","navigator3","Level7","obs1","obs4","superAmmo1","aiTank1","superAmmo2","superAmmo3","superAmmo4","aiTank4","superAmmo5","aiTank5","Level8","basicAmmo2","basicAmmo3","levels","sliderWidth","numLevels","activeLevelNumber","activeLevel","setHeader","createSlider","createJumbotron","header","getElementById","textContent","startActiveLevel","margin","effectiveWidth","clamp","sliderGroup","append","attr","call","ticks","tickFormat","handle","style","dragHandler","on","level","invert","updateActiveLevel","jumbotron","colorScale","svg","text","classed","_"],"sourceRoot":""}