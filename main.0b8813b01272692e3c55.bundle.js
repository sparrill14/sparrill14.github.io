"use strict";(self.webpackChunktreads=self.webpackChunktreads||[]).push([[792],{438:(t,s,i)=>{i.p;i(836);const e=i.p+"b522d2830ca0e8728583.mp3";var o,h=(o=function(t,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])},o(t,s)},function(t,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function i(){this.constructor=t}o(t,s),t.prototype=null===s?Object.create(s):(i.prototype=s.prototype,new i)}),n=function(){function t(t,s,i,o,h,n,a,r){this.xPos=t,this.yPos=s,this.theta=i,this.speed=o,this.xVelocity=Math.cos(this.theta)*this.speed,this.yVelocity=Math.sin(this.theta)*this.speed,this.bounces=0,this.maxBounces=h,this.canvasWidth=n,this.canvasHeight=a,this.isDestroyed=r,this.tankDestroyAudio=new Audio(e)}return t.prototype.updatePosition=function(t){var s=this;this.xPos+=this.xVelocity,this.yPos+=this.yVelocity,(this.xPos<=0||this.xPos>this.canvasWidth)&&(this.xVelocity=-this.xVelocity,this.bounces++),(this.yPos<=0||this.yPos>this.canvasHeight)&&(this.yVelocity=-this.yVelocity,this.bounces++),t.obstacles.forEach((function(t){if(s.xPos>t.xLeft&&s.xPos<t.xRight&&s.yPos>t.yTop&&s.yPos<t.yBottom){s.bounces++;var i=Math.abs(s.xPos-t.xLeft),e=Math.abs(s.xPos-t.xRight),o=Math.abs(s.yPos-t.yTop),h=Math.abs(s.yPos-t.yBottom),n=Math.min(i,e,o,h);n===o?(s.yPos=t.yTop-1,s.yVelocity=-s.yVelocity):n===h?(s.yPos=t.yBottom+1,s.yVelocity=-s.yVelocity):n===i?(s.xPos=t.xLeft-1,s.xVelocity=-s.xVelocity):n===e&&(s.xPos=t.xRight+1,s.xVelocity=-s.xVelocity)}})),this.bounces>this.maxBounces&&(this.isDestroyed=!0)},t.prototype.checkEnemyHit=function(t){var s=this;t.forEach((function(t){t.isDestroyed||s.xPos>t.xLeft&&s.xPos<t.xRight&&s.yPos>t.yTop&&s.yPos<t.yBottom&&(s.isDestroyed=!0,t.isDestroyed=!0,s.tankDestroyAudio.play(),console.log("Enemy hit!!!"))}))},t.prototype.checkPlayerHit=function(t){t.isDestroyed||this.xPos>t.xLeft&&this.xPos<t.xRight&&this.yPos>t.yTop&&this.yPos<t.yBottom&&(this.isDestroyed=!0,console.log("Player Hit!!!"))},t.prototype.draw=function(t){t.beginPath(),t.arc(this.xPos,this.yPos,3,0,2*Math.PI),t.fillStyle="white",t.fill(),t.lineWidth=2,t.strokeStyle="black",t.stroke(),t.closePath()},t.prototype.reload=function(t,s,i,e,o,h){this.xPos=t,this.yPos=s,this.theta=i,this.isDestroyed=e,this.xVelocity=Math.cos(this.theta)*this.speed,this.yVelocity=Math.sin(this.theta)*this.speed,this.canvasWidth=o,this.canvasHeight=h,this.bounces=0},t.prototype.willHitPlayerTank=function(t,s){for(var i=this.xPos,e=this.yPos,o=this.xVelocity,h=this.yVelocity,n=0;n<=this.maxBounces;)if(1==n&&console.log(1),e+=h,((i+=o)<=0||i>this.canvasWidth)&&(o=-o,n++),(e<=0||e>this.canvasHeight)&&(h=-h,n++),t.obstacles.forEach((function(t){i>t.xLeft&&i<t.xRight&&e>t.yTop&&e<t.yBottom&&(n++,o=-o,h=-h)})),i>s.xLeft&&i<s.xRight&&e>s.yTop&&e<s.yBottom)return!0;return!1},t}(),a=function(t){function s(s,i,e,o,h,n){return t.call(this,s,i,e,5,1,o,h,n)||this}return h(s,t),s}(n),r=function(t){function s(s,i,e,o,h,n){return t.call(this,s,i,e,10,0,o,h,n)||this}return h(s,t),s}(n),c=function(t){function s(s,i,e,o,h,n){return t.call(this,s,i,e,11,2,o,h,n)||this}return h(s,t),s}(n),y=function(){var t=function(s,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])},t(s,i)};return function(s,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=s}t(s,i),s.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}(),u=function(){function t(t,s,i,e){this.reticuleWidth=5,this.color=s,this.dashPattern=t,this.renderReticule=i,this.tankSize=e}return t.prototype.draw=function(t,s,i,e,o){this.renderReticule&&(t.strokeStyle=this.color,t.setLineDash(this.dashPattern),t.beginPath(),t.moveTo(s+this.tankSize/2,i+this.tankSize/2),t.lineTo(e,o),t.lineWidth=this.reticuleWidth,t.stroke())},t}(),l=function(t){function s(){return t.call(this,[0,0],"blue",!1,0)||this}return y(s,t),s}(u),p=(function(t){function s(s){return t.call(this,[5,5],"blue",!0,s)||this}y(s,t)}(u),function(t){function s(s,i){return t.call(this,[4,1],i,!0,s)||this}y(s,t)}(u),function(t){function s(s,i,e){var o=t.call(this,[1,1],i,!0,s)||this;return o.maxReticuleLength=e,o}return y(s,t),s.prototype.draw=function(t,s,i,e,o){var h=e-s,n=o-i,a=Math.sqrt(Math.pow(h,2)+Math.pow(n,2))/this.maxReticuleLength,r=10*a+2,c=10*(1-a)+5;if(this.renderReticule){t.strokeStyle=this.color,t.setLineDash([r,c]),t.beginPath(),t.moveTo(s+this.tankSize/2,i+this.tankSize/2),t.lineTo(e,o),t.lineWidth=this.reticuleWidth,t.stroke(),t.setLineDash([]);var y=10;t.beginPath(),t.moveTo(e-y,o-y),t.lineTo(e+y,o+y),t.stroke(),t.beginPath(),t.moveTo(e-y,o+y),t.lineTo(e+y,o-y),t.stroke()}},s}(u));const f=i.p+"bdf5203edd6a7217bbbb.mp3";var d=function(){var t=function(s,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])},t(s,i)};return function(s,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=s}t(s,i),s.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}(),P=function(){function t(t,s,i,e,o,h,n,a,r){this.gunBarrellWidth=7,this.isDestroyed=!1,this.twoPi=2*Math.PI,this.keyStates={ArrowUp:!1,ArrowDown:!1,ArrowLeft:!1,ArrowRight:!1,w:!1,a:!1,s:!1,d:!1,W:!1,A:!1,S:!1,D:!1},this.ammunition=[],this.reticule=s,this.xPos=i,this.yPos=e,this.xLeft=i,this.xRight=i+h,this.yTop=e,this.yBottom=e+h,this.speed=o,this.size=h,this.color=n,this.canvasWidth=t.width,this.canvasHeight=t.height,this.obstacleCanvas=a,this.tankMidpoint=this.size/2,this.ammunition=r,this.maxAmmunition=r.length,this.aimAngle=90;var c=t.getBoundingClientRect();this.xOffset=c.left,this.yOffset=c.top,this.aimXPos=t.width/2,this.aimYPos=t.height/2}return t.prototype.draw=function(t){if(!this.isDestroyed){t.fillStyle=this.color,t.fillRect(this.xPos,this.yPos,this.size,this.size),t.setLineDash([]),t.lineJoin="bevel",t.strokeStyle="black",t.lineWidth=2,t.strokeRect(this.xPos,this.yPos,this.size,this.size),t.beginPath(),t.arc(this.xPos+this.tankMidpoint,this.yPos+this.tankMidpoint,this.size/3,0,this.twoPi),t.stroke();var s=this.xPos+this.tankMidpoint+Math.cos(this.aimAngle)*this.size,i=this.yPos+this.tankMidpoint+Math.sin(this.aimAngle)*this.size;t.beginPath(),t.moveTo(this.xPos+this.tankMidpoint,this.yPos+this.tankMidpoint),t.lineTo(s,i),t.lineWidth=this.gunBarrellWidth,t.stroke()}},t.prototype.updatePosition=function(){this.up()&&this.right()?this.moveNorthEast():this.up()&&this.left()?this.moveNorthWest():this.down()&&this.right()?this.moveSouthEast():this.down()&&this.left()?this.moveSouthWest():this.up()?this.moveNorth():this.down()?this.moveSouth():this.left()?this.moveWest():this.right()&&this.moveEast(),this.xLeft=this.xPos,this.xRight=this.xPos+this.size,this.yTop=this.yPos,this.yBottom=this.yPos+this.size},t.prototype.aim=function(t,s,i){if(!this.isDestroyed){var e,o;o=t-this.xPos-this.tankMidpoint,e=s-this.yPos-this.tankMidpoint;var h=Math.atan2(e,o);h<0&&(h+=2*Math.PI),this.aimAngle=h}},t.prototype.shoot=function(t){},t.prototype.moveNorth=function(){for(var t=!1,s=0;s<this.obstacleCanvas.obstacles.length;s++){var i=this.obstacleCanvas.obstacles[s];this.yPos-this.speed<i.yTop+i.height&&this.yPos>i.yTop&&i.xLeft<this.xPos+this.size&&this.xPos<i.xRight&&(this.yPos=i.yBottom,t=!0)}t||(this.yPos=Math.max(this.yPos-this.speed,0))},t.prototype.moveSouth=function(){for(var t=!1,s=0;s<this.obstacleCanvas.obstacles.length;s++){var i=this.obstacleCanvas.obstacles[s];this.yPos+this.speed+this.size>i.yTop&&this.yPos<i.yTop+i.height&&i.xLeft<this.xPos+this.size&&this.xPos<i.xRight&&(this.yPos=i.yTop-this.size,t=!0)}t||(this.yPos=Math.min(this.yPos+this.speed,this.canvasHeight-this.size))},t.prototype.moveWest=function(){for(var t=!1,s=0;s<this.obstacleCanvas.obstacles.length;s++){var i=this.obstacleCanvas.obstacles[s];this.xPos-this.speed<i.xRight&&this.xPos>i.xLeft&&i.yTop<this.yPos+this.size&&this.yPos<i.yBottom&&(this.xPos=i.xRight,t=!0)}t||(this.xPos=Math.max(this.xPos-this.speed,0))},t.prototype.moveEast=function(){for(var t=!1,s=0;s<this.obstacleCanvas.obstacles.length;s++){var i=this.obstacleCanvas.obstacles[s];this.xPos+this.speed+this.size>i.xLeft&&this.xPos<i.xLeft+i.width&&i.yTop<this.yPos+this.size&&this.yPos<i.yBottom&&(this.xPos=i.xLeft-this.size,t=!0)}t||(this.xPos=Math.min(this.xPos+this.speed,this.canvasWidth-this.size))},t.prototype.moveNorthEast=function(){for(var t=!1,s=!1,i=0;i<this.obstacleCanvas.obstacles.length;i++){var e=this.obstacleCanvas.obstacles[i];this.yPos-this.speed<e.yTop+e.height&&this.yPos>e.yTop&&e.xLeft<this.xPos+this.size&&this.xPos<e.xRight&&(this.yPos=e.yBottom,t=!0),this.xPos+this.speed+this.size>e.xLeft&&this.xPos<e.xLeft+e.width&&e.yTop<this.yPos+this.size&&this.yPos<e.yBottom&&(this.xPos=e.xLeft-this.size,s=!0)}t||(this.yPos=Math.max(this.yPos-this.speed,0)),s||(this.xPos=Math.min(this.xPos+this.speed,this.canvasWidth-this.size))},t.prototype.moveNorthWest=function(){for(var t=!1,s=!1,i=0;i<this.obstacleCanvas.obstacles.length;i++){var e=this.obstacleCanvas.obstacles[i];this.yPos-this.speed<e.yTop+e.height&&this.yPos>e.yTop&&e.xLeft<this.xPos+this.size&&this.xPos<e.xRight&&(this.yPos=e.yBottom,t=!0),this.xPos-this.speed<e.xRight&&this.xPos>e.xLeft&&e.yTop<this.yPos+this.size&&this.yPos<e.yBottom&&(this.xPos=e.xRight,s=!0)}t||(this.yPos=Math.max(this.yPos-this.speed,0)),s||(this.xPos=Math.max(this.xPos-this.speed,0))},t.prototype.moveSouthEast=function(){for(var t=!1,s=!1,i=0;i<this.obstacleCanvas.obstacles.length;i++){var e=this.obstacleCanvas.obstacles[i];this.yPos+this.speed+this.size>e.yTop&&this.yPos<e.yTop+e.height&&e.xLeft<this.xPos+this.size&&this.xPos<e.xRight&&(this.yPos=e.yTop-this.size,t=!0),this.xPos+this.speed+this.size>e.xLeft&&this.xPos<e.xLeft+e.width&&e.yTop<this.yPos+this.size&&this.yPos<e.yBottom&&(this.xPos=e.xLeft-this.size,s=!0)}t||(this.yPos=Math.min(this.yPos+this.speed,this.canvasHeight-this.size)),s||(this.xPos=Math.min(this.xPos+this.speed,this.canvasWidth-this.size))},t.prototype.moveSouthWest=function(){for(var t=!1,s=!1,i=0;i<this.obstacleCanvas.obstacles.length;i++){var e=this.obstacleCanvas.obstacles[i];this.yPos+this.speed+this.size>e.yTop&&this.yPos<e.yTop+e.height&&e.xLeft<this.xPos+this.size&&this.xPos<e.xRight&&(this.yPos=e.yTop-this.size,t=!0),this.xPos-this.speed<e.xRight&&this.xPos>e.xLeft&&e.yTop<this.yPos+this.size&&this.yPos<e.yBottom&&(this.xPos=e.xRight,s=!0)}t||(this.yPos=Math.min(this.yPos+this.speed,this.canvasHeight-this.size)),s||(this.xPos=Math.max(this.xPos-this.speed,0))},t.prototype.up=function(){return this.keyStates.ArrowUp||this.keyStates.w||this.keyStates.W},t.prototype.down=function(){return this.keyStates.ArrowDown||this.keyStates.s||this.keyStates.S},t.prototype.left=function(){return this.keyStates.ArrowLeft||this.keyStates.a||this.keyStates.A},t.prototype.right=function(){return this.keyStates.ArrowRight||this.keyStates.d||this.keyStates.D},t}(),x=function(t){function s(s,i,e,o,h,n,r,c,y){var u=t.call(this,s,i,e,o,h,n,r,c,y)||this;return u.tankFireAudio=new Audio(f),document.addEventListener("keydown",(function(t){u.keyStates.hasOwnProperty(t.key)&&(u.keyStates[t.key]=!0)})),document.addEventListener("keyup",(function(t){u.keyStates.hasOwnProperty(t.key)&&(u.keyStates[t.key]=!1)})),s.addEventListener("mousemove",(function(t){u.aimXPos=t.clientX-u.xOffset,u.aimYPos=t.clientY-u.yOffset})),s.addEventListener("click",(function(t){var i=u.ammunition.findIndex((function(t){return t.isDestroyed}));-1!==i&&(u.tankFireAudio.play(),u.ammunition[i]=new a(u.xPos+u.size/2,u.yPos+u.size/2,u.aimAngle,s.width,s.height,!1))})),u}return d(s,t),s.prototype.aim=function(t,s,i){if(!this.isDestroyed){var e,o;o=t-this.xPos-this.tankMidpoint,e=s-this.yPos-this.tankMidpoint;var h=Math.atan2(e,o);h<0&&(h+=2*Math.PI),this.aimAngle=h}},s.prototype.shoot=function(t){},s}(P),m=function(t){function s(s,i,e,o,h,n,a,r,c){return t.call(this,s,i,e,o,h,n,a,r,c)||this}return d(s,t),s}(P),v=function(t){function s(s,i,e,o){var h=this,n=[new r(0,0,0,0,0,!0)];return h=t.call(this,s,new l,i,e,0,30,"#935217",o,n)||this,setInterval((function(){if(!h.isDestroyed){var t=h.ammunition.findIndex((function(t){return t.isDestroyed}));-1!==t&&(h.ammunition[t]=new r(h.xPos+h.size/2,h.yPos+h.size/2,h.aimAngle,h.canvasWidth,h.canvasHeight,!1))}}),5e3),h}return d(s,t),s.prototype.shoot=function(t){},s.prototype.aim=function(t,s,i){if(!this.isDestroyed){var e,o;o=i.xPos+i.size/2-this.xPos-this.tankMidpoint,e=i.yPos+i.size/2-this.yPos-this.tankMidpoint;var h=Math.atan2(e,o);h<0&&(h+=2*Math.PI),this.aimAngle=h}},s}(m),g=function(t){function s(s,i,e,o,h){var n=this;return(n=t.call(this,s,new l,i,e,0,30,"#ffce47",o,h)||this).aimAngleChangeAmount=0,n}return d(s,t),s.prototype.getAngleChangeAmount=function(){return Math.floor(721*Math.random())+-360},s.prototype.shoot=function(t){var s=this.ammunition.findIndex((function(t){return t.isDestroyed}));-1!==s&&(this.ammunition[s].reload(this.xPos+this.size/2,this.yPos+this.size/2,this.aimAngle,!0,this.canvasWidth,this.canvasHeight),this.ammunition[s].willHitPlayerTank(this.obstacleCanvas,t)&&(this.ammunition[s].isDestroyed=!1))},s.prototype.aim=function(t,s,i){this.isDestroyed||(this.aimAngleChangeAmount>0?(this.aimAngle+=.01,this.aimAngleChangeAmount-=1):this.aimAngleChangeAmount<0?(this.aimAngle-=.01,this.aimAngleChangeAmount+=1):this.aimAngleChangeAmount=this.getAngleChangeAmount())},s}(m),w=function(t){function s(s,i,e,o){var h="#6384a1",n=[new a(0,0,0,0,0,!0),new a(0,0,0,0,0,!0),new a(0,0,0,0,0,!0),new a(0,0,0,0,0,!0),new a(0,0,0,0,0,!0)];return t.call(this,s,new p(30,h,s.width),i,e,2,30,h,o,n)||this}return d(s,t),s}(x),b=function(){function t(t){this.canvas=t;var s=this.canvas.getContext("2d");if(!s)throw new Error("2d context not supported or canvas element not found.");this.context=s}return t.prototype.initializeCanvas=function(t,s){this.canvas.width=t,this.canvas.height=s},t.prototype.render=function(t,s,i){var e=this;if(!this.context)throw new Error("2d context not supported or canvas element not found.");this.context.clearRect(0,0,this.canvas.width,this.canvas.height),s.updatePosition(),s.aim(s.aimXPos,s.aimYPos,s),i.forEach((function(t){t.updatePosition(),t.aim(t.aimXPos,t.aimYPos,s),t.shoot(s)})),i.forEach((function(t){t.draw(e.context),t.reticule.draw(e.context,t.xPos,t.yPos,t.aimXPos,t.aimYPos),t.ammunition.forEach((function(i){i.isDestroyed||(i.updatePosition(t.obstacleCanvas),i.checkPlayerHit(s),i.draw(e.context))}))})),s.draw(this.context),s.reticule.draw(this.context,s.xPos,s.yPos,s.aimXPos,s.aimYPos),s.ammunition.forEach((function(t){t.isDestroyed||(t.updatePosition(s.obstacleCanvas),t.checkEnemyHit(i),t.draw(e.context))}))},t}(),k=function(){function t(t,s,i,e){this.enemyTanks=[],this.width=s,this.height=i,this.obstacleCanvas=e,this.gameRenderer=new b(document.querySelector(t)),this.gameRenderer.initializeCanvas(this.width,this.height),this.lastRenderTime=0,window.addEventListener("resize",this.resizeCanvas.bind(this)),this.playerTank=new w(this.gameRenderer.canvas,200,250,e),requestAnimationFrame(this.gameLoop.bind(this))}return t.prototype.resizeCanvas=function(){},t.prototype.gameLoop=function(t){var s=t-this.lastRenderTime;this.gameRenderer.render(s,this.playerTank,this.enemyTanks),this.lastRenderTime=t,requestAnimationFrame(this.gameLoop.bind(this))},t.prototype.addEnemyTank=function(t){this.enemyTanks.push(t)},t}(),z=function(){function t(t,s,i,e){this.xLeft=t,this.yTop=s,this.width=i,this.height=e,this.yBottom=this.yTop+this.height,this.xRight=this.xLeft+this.width}return t.prototype.draw=function(t){t.beginPath(),t.rect(this.xLeft,this.yTop,this.width,this.height),t.fillStyle="black",t.fill()},t}(),T=new(function(){function t(t,s,i,e){var o=this;this.obstacles=[],this.width=s,this.height=i,this.obstacles=e,window.addEventListener("resize",this.resizeCanvas.bind(this)),this.obstacleCanvas=document.querySelector(t),this.obstacleCanvas.width=s,this.obstacleCanvas.height=i,e.forEach((function(t){t.draw(o.obstacleCanvas.getContext("2d"))}))}return t.prototype.resizeCanvas=function(){},t}())("#obstacle-canvas",1e3,500,[new z(100,100,200,100),new z(700,100,30,100),new z(700,350,30,100)]),A=new k("#game-canvas",1e3,500,T),M=new v(A.gameRenderer.canvas,800,200,T),C=[new r(0,0,0,0,0,!0)],L=[new c(0,0,0,0,0,!0)],R=new g(A.gameRenderer.canvas,800,100,T,L),S=new g(A.gameRenderer.canvas,800,300,T,C);A.addEnemyTank(R),A.addEnemyTank(M),A.addEnemyTank(S)}},t=>{t.O(0,[96],(()=>{return s=438,t(t.s=s);var s}));t.O()}]);
//# sourceMappingURL=main.0b8813b01272692e3c55.bundle.js.map