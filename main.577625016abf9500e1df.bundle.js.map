{"version":3,"file":"main.577625016abf9500e1df.bundle.js","mappings":"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","sources":["webpack://treads/./src/assets/computer.ico","webpack://treads/./src/game/AudioManager.ts","webpack://treads/./src/game/tanks/Tank.ts","webpack://treads/./src/game/Ammunition.ts","webpack://treads/./src/game/Bomb.ts","webpack://treads/./src/game/GameRenderer.ts","webpack://treads/./src/game/GameCanvas.ts","webpack://treads/./src/game/NavigationGrid.ts","webpack://treads/./src/game/Obstacle.ts","webpack://treads/./src/game/ObstacleCanvas.ts","webpack://treads/./src/game/Reticule.ts","webpack://treads/./src/game/tanks/EnemyTank.ts","webpack://treads/./src/game/tanks/BomberTank.ts","webpack://treads/./src/game/tanks/PlayerTank.ts","webpack://treads/./src/game/tanks/SimpleMovingTank.ts","webpack://treads/./src/game/tanks/StationaryRandomAimTank.ts","webpack://treads/./src/game/tanks/StationaryTank.ts","webpack://treads/./src/game/tanks/SuperBomberMovingTank.ts","webpack://treads/./src/game/Level.ts","webpack://treads/./src/index.ts","webpack://treads/./src/ui/LevelSelector.ts"],"sourcesContent":["export default __webpack_public_path__ + \"assets/computer.ico\";","import backgroundMusic from '../assets/audio/backgroundMusic.mp3';\nimport bombExplode from '../assets/audio/bombExplode.mp3';\nimport tankDestroy from '../assets/audio/tankDestroy.mp3';\nimport tankFire from '../assets/audio/tankFire.mp3';\n\nexport enum AudioFile {\n\tTANK_FIRE = 1,\n\tTANK_DESTROY = 2,\n\tBOMB_EXPLODE = 3,\n\tBACKGROUND_MUSIC = 4,\n}\n\nexport class AudioManager {\n\tprivate audioContext: AudioContext;\n\tprivate audioBuffers: Map<AudioFile, AudioBuffer>;\n\tprivate backgroundMusicSource: AudioBufferSourceNode | null;\n\n\tconstructor() {\n\t\tthis.audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();\n\t\tthis.audioBuffers = new Map();\n\t\tthis.backgroundMusicSource = null;\n\t}\n\n\tloadAllAudio(): Promise<void[]> {\n\t\tconst promises = [\n\t\t\tthis.loadAudio(AudioFile.TANK_FIRE, tankFire),\n\t\t\tthis.loadAudio(AudioFile.TANK_DESTROY, tankDestroy),\n\t\t\tthis.loadAudio(AudioFile.BOMB_EXPLODE, bombExplode),\n\t\t\tthis.loadAudio(AudioFile.BACKGROUND_MUSIC, backgroundMusic),\n\t\t];\n\t\treturn Promise.all(promises);\n\t}\n\n\tloadAudio(audioFile: AudioFile, url: string): Promise<void> {\n\t\treturn fetch(url)\n\t\t\t.then((response) => response.arrayBuffer())\n\t\t\t.then((arrayBuffer) => this.audioContext.decodeAudioData(arrayBuffer))\n\t\t\t.then((audioBuffer) => {\n\t\t\t\tthis.audioBuffers.set(audioFile, audioBuffer);\n\t\t\t})\n\t\t\t.catch((error) => console.error(`Error loading audio file: ${url}`, error));\n\t}\n\n\tplay(audioFile: AudioFile): void {\n\t\tconst buffer = this.audioBuffers.get(audioFile);\n\t\tif (buffer) {\n\t\t\tconst source = this.audioContext.createBufferSource();\n\t\t\tsource.buffer = buffer;\n\t\t\tsource.connect(this.audioContext.destination);\n\t\t\tsource.start(0);\n\t\t} else {\n\t\t\tconsole.warn(`Audio buffer for ${audioFile} not found`);\n\t\t}\n\t}\n\n\tgetAudioContext(): AudioContext {\n\t\treturn this.audioContext;\n\t}\n\n\tplayBackgroundMusic(): void {\n\t\tconst buffer = this.audioBuffers.get(AudioFile.BACKGROUND_MUSIC);\n\t\tif (buffer) {\n\t\t\tthis.stopBackgroundMusic();\n\t\t\tthis.backgroundMusicSource = this.audioContext.createBufferSource();\n\t\t\tthis.backgroundMusicSource.buffer = buffer;\n\t\t\tthis.backgroundMusicSource.loop = true;\n\t\t\tthis.backgroundMusicSource.connect(this.audioContext.destination);\n\t\t\tthis.backgroundMusicSource.start(0);\n\t\t} else {\n\t\t\tconsole.warn(`Background music buffer not found`);\n\t\t}\n\t}\n\n\tstopBackgroundMusic(): void {\n\t\tif (this.backgroundMusicSource) {\n\t\t\tthis.backgroundMusicSource.stop(0);\n\t\t\tthis.backgroundMusicSource.disconnect();\n\t\t\tthis.backgroundMusicSource = null;\n\t\t}\n\t}\n}\n","import { KeyStates } from '../../utils/KeyStates';\nimport { Ammunition } from '../Ammunition';\nimport { AudioManager } from '../AudioManager';\nimport { Bomb } from '../Bomb';\nimport { ObstacleCanvas } from '../ObstacleCanvas';\nimport { Reticule } from '../Reticule';\n\nexport enum Direction {\n\tNORTH = 1,\n\tSOUTH = 2,\n\tEAST = 3,\n\tWEST = 4,\n\tNORTHEAST = 5,\n\tNORTHWEST = 6,\n\tSOUTHEAST = 7,\n\tSOUTHWEST = 8,\n\tUNKNOWN = 9,\n}\n\nexport class Tank {\n\tpublic xPos: number;\n\tpublic yPos: number;\n\tpublic xLeft: number;\n\tpublic xRight: number;\n\tpublic yTop: number;\n\tpublic yBottom: number;\n\tpublic speed: number;\n\tpublic size: number;\n\tpublic tankMidpoint: number;\n\tpublic color: string;\n\tpublic reticule: Reticule;\n\tpublic gunBarrellWidth = 7;\n\tpublic isDestroyed = false;\n\tpublic obstacleCanvas: ObstacleCanvas;\n\tpublic twoPi: number = 2 * Math.PI;\n\tpublic lastDirectionMoved: Direction = Direction.UNKNOWN;\n\tpublic wasLastMoveBlocked = false;\n\tpublic consecutiveDirectionMoves = 0;\n\tpublic audioManager: AudioManager;\n\tpublic aimAngle: number;\n\tpublic aimXPos: number;\n\tpublic aimYPos: number;\n\tpublic xOffset: number;\n\tpublic yOffset: number;\n\tpublic ammunition: Ammunition[] = [];\n\tpublic maxAmmunition: number;\n\tpublic bombs: Bomb[] = [];\n\tpublic maxBombs: number;\n\tpublic canvasWidth: number;\n\tpublic canvasHeight: number;\n\n\tpublic keyStates: KeyStates = {\n\t\tArrowUp: false,\n\t\tArrowDown: false,\n\t\tArrowLeft: false,\n\t\tArrowRight: false,\n\t\tw: false,\n\t\ta: false,\n\t\ts: false,\n\t\td: false,\n\t\tW: false,\n\t\tA: false,\n\t\tS: false,\n\t\tD: false,\n\t};\n\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\treticule: Reticule,\n\t\txPos: number,\n\t\tyPos: number,\n\t\tspeed: number,\n\t\tsize: number,\n\t\tcolor: string,\n\t\tobstacleCanvas: ObstacleCanvas,\n\t\tammunition: Ammunition[],\n\t\tbombs: Bomb[],\n\t\taudioManager: AudioManager\n\t) {\n\t\tthis.reticule = reticule;\n\t\tthis.xPos = xPos;\n\t\tthis.yPos = yPos;\n\t\tthis.xLeft = xPos;\n\t\tthis.xRight = xPos + size;\n\t\tthis.yTop = yPos;\n\t\tthis.yBottom = yPos + size;\n\t\tthis.speed = speed;\n\t\tthis.size = size;\n\t\tthis.color = color;\n\t\tthis.canvasWidth = canvas.width;\n\t\tthis.canvasHeight = canvas.height;\n\t\tthis.obstacleCanvas = obstacleCanvas;\n\t\tthis.tankMidpoint = this.size / 2;\n\t\tthis.ammunition = ammunition;\n\t\tthis.maxAmmunition = ammunition.length;\n\t\tthis.bombs = bombs;\n\t\tthis.maxBombs = bombs.length;\n\t\tthis.audioManager = audioManager;\n\n\t\tthis.aimAngle = 90;\n\t\tconst canvasRect: DOMRect = canvas.getBoundingClientRect();\n\t\tthis.xOffset = canvasRect.left;\n\t\tthis.yOffset = canvasRect.top;\n\t\t// Set the initital X and Y aim position to the center of the canvas\n\t\tthis.aimXPos = canvas.width / 2;\n\t\tthis.aimYPos = canvas.height / 2;\n\t}\n\n\tpublic draw(context: CanvasRenderingContext2D): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\tcontext.fillStyle = this.color;\n\t\tcontext.fillRect(this.xPos, this.yPos, this.size, this.size);\n\n\t\tcontext.setLineDash([]);\n\t\tcontext.lineJoin = 'bevel';\n\t\tcontext.strokeStyle = 'black';\n\t\tcontext.lineWidth = 2;\n\t\tcontext.strokeRect(this.xPos, this.yPos, this.size, this.size);\n\n\t\tcontext.beginPath();\n\t\tcontext.arc(this.xPos + this.tankMidpoint, this.yPos + this.tankMidpoint, this.size / 3, 0, this.twoPi);\n\t\tcontext.stroke();\n\n\t\tconst endX = this.xPos + this.tankMidpoint + Math.cos(this.aimAngle) * this.size;\n\t\tconst endY = this.yPos + this.tankMidpoint + Math.sin(this.aimAngle) * this.size;\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(this.xPos + this.tankMidpoint, this.yPos + this.tankMidpoint);\n\t\tcontext.lineTo(endX, endY);\n\t\tcontext.lineWidth = this.gunBarrellWidth;\n\t\tcontext.stroke();\n\t}\n\n\tpublic updatePosition(playerTank: Tank): void {\n\t\t// Move the tank\n\t\tif (this.up() && this.right()) {\n\t\t\tthis.moveNorthEast();\n\t\t} else if (this.up() && this.left()) {\n\t\t\tthis.moveNorthWest();\n\t\t} else if (this.down() && this.right()) {\n\t\t\tthis.moveSouthEast();\n\t\t} else if (this.down() && this.left()) {\n\t\t\tthis.moveSouthWest();\n\t\t} else if (this.up()) {\n\t\t\tthis.moveNorth();\n\t\t} else if (this.down()) {\n\t\t\tthis.moveSouth();\n\t\t} else if (this.left()) {\n\t\t\tthis.moveWest();\n\t\t} else if (this.right()) {\n\t\t\tthis.moveEast();\n\t\t}\n\n\t\tthis.xLeft = this.xPos;\n\t\tthis.xRight = this.xPos + this.size;\n\t\tthis.yTop = this.yPos;\n\t\tthis.yBottom = this.yPos + this.size;\n\t}\n\n\tpublic aim(mouseXPos: number, mouseYpos: number, playerTank: Tank): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst dx: number = mouseXPos - this.xPos - this.tankMidpoint;\n\t\tconst dy: number = mouseYpos - this.yPos - this.tankMidpoint;\n\t\tlet theta = Math.atan2(dy, dx);\n\t\tif (theta < 0) {\n\t\t\ttheta += 2 * Math.PI;\n\t\t}\n\t\tthis.aimAngle = theta;\n\t}\n\n\tpublic shoot(playerTank: Tank): void {\n\t\treturn;\n\t}\n\n\tpublic plantBomb(playerTank: Tank): void {\n\t\tif (!this.isDestroyed) {\n\t\t\tconst availableBombIndex = this.bombs.findIndex((bomb) => bomb.isDestroyed);\n\t\t\tif (availableBombIndex !== -1) {\n\t\t\t\tthis.bombs[availableBombIndex].xPos = this.xPos + this.size / 2;\n\t\t\t\tthis.bombs[availableBombIndex].yPos = this.yPos + this.size / 2;\n\t\t\t\tthis.bombs[availableBombIndex].isDestroyed = false;\n\t\t\t\tthis.bombs[availableBombIndex].setFuse();\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tpublic moveInLastDirectionMoved(): void {\n\t\tthis.moveInCardinalDirection(this.lastDirectionMoved);\n\t}\n\n\tpublic getRandomDirection<Direction>(): Direction[keyof Direction] {\n\t\tconst enumValues = Object.keys(Direction)\n\t\t\t.map((n) => Number.parseInt(n))\n\t\t\t.filter((n) => !Number.isNaN(n)) as unknown as Direction[keyof Direction][];\n\t\tconst randomIndex = Math.floor(Math.random() * enumValues.length);\n\t\tconst randomEnumValue = enumValues[randomIndex];\n\t\treturn randomEnumValue;\n\t}\n\n\tpublic moveInCardinalDirection(direction: Direction): void {\n\t\tswitch (direction) {\n\t\t\tcase Direction.NORTH: {\n\t\t\t\tthis.moveNorth();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase Direction.SOUTH: {\n\t\t\t\tthis.moveSouth();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase Direction.EAST: {\n\t\t\t\tthis.moveEast();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase Direction.WEST: {\n\t\t\t\tthis.moveWest();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase Direction.NORTHEAST: {\n\t\t\t\tthis.moveNorthEast();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase Direction.NORTHWEST: {\n\t\t\t\tthis.moveNorthWest();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase Direction.SOUTHEAST: {\n\t\t\t\tthis.moveSouthEast();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase Direction.SOUTHWEST: {\n\t\t\t\tthis.moveSouthWest();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tconst enumValues = Object.values(Direction).filter((value) => typeof value === 'number') as Direction[];\n\t\t\t\tconst randomIndex = Math.floor(Math.random() * enumValues.length);\n\t\t\t\tthis.moveInCardinalDirection(enumValues[randomIndex]);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic moveNorth(): void {\n\t\tif (this.lastDirectionMoved == Direction.NORTH) {\n\t\t\tthis.consecutiveDirectionMoves += 1;\n\t\t} else {\n\t\t\tthis.consecutiveDirectionMoves = 0;\n\t\t}\n\t\tthis.lastDirectionMoved = Direction.NORTH;\n\t\tlet blocked = false;\n\t\tfor (const obstacle of this.obstacleCanvas.obstacles) {\n\t\t\tif (\n\t\t\t\tthis.yPos - this.speed < obstacle.yTop + obstacle.height &&\n\t\t\t\tthis.yPos > obstacle.yTop &&\n\t\t\t\tobstacle.xLeft < this.xPos + this.size &&\n\t\t\t\tthis.xPos < obstacle.xRight\n\t\t\t) {\n\t\t\t\tthis.yPos = obstacle.yBottom;\n\t\t\t\tblocked = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!blocked) {\n\t\t\tthis.yPos = Math.max(this.yPos - this.speed, 0);\n\t\t} else {\n\t\t\tthis.wasLastMoveBlocked = true;\n\t\t}\n\t}\n\n\tpublic moveSouth(): void {\n\t\tif (this.lastDirectionMoved == Direction.SOUTH) {\n\t\t\tthis.consecutiveDirectionMoves += 1;\n\t\t} else {\n\t\t\tthis.consecutiveDirectionMoves = 0;\n\t\t}\n\t\tthis.lastDirectionMoved = Direction.SOUTH;\n\t\tlet blocked = false;\n\t\tfor (const obstacle of this.obstacleCanvas.obstacles) {\n\t\t\tif (\n\t\t\t\tthis.yPos + this.speed + this.size > obstacle.yTop &&\n\t\t\t\tthis.yPos < obstacle.yTop + obstacle.height &&\n\t\t\t\tobstacle.xLeft < this.xPos + this.size &&\n\t\t\t\tthis.xPos < obstacle.xRight\n\t\t\t) {\n\t\t\t\tthis.yPos = obstacle.yTop - this.size;\n\t\t\t\tblocked = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!blocked) {\n\t\t\tthis.yPos = Math.min(this.yPos + this.speed, this.canvasHeight - this.size);\n\t\t} else {\n\t\t\tthis.wasLastMoveBlocked = true;\n\t\t}\n\t}\n\n\tpublic moveWest(): void {\n\t\tif (this.lastDirectionMoved == Direction.WEST) {\n\t\t\tthis.consecutiveDirectionMoves += 1;\n\t\t} else {\n\t\t\tthis.consecutiveDirectionMoves = 0;\n\t\t}\n\t\tthis.lastDirectionMoved = Direction.WEST;\n\t\tlet blocked = false;\n\t\tfor (const obstacle of this.obstacleCanvas.obstacles) {\n\t\t\tif (\n\t\t\t\tthis.xPos - this.speed < obstacle.xRight &&\n\t\t\t\tthis.xPos > obstacle.xLeft &&\n\t\t\t\tobstacle.yTop < this.yPos + this.size &&\n\t\t\t\tthis.yPos < obstacle.yBottom\n\t\t\t) {\n\t\t\t\tthis.xPos = obstacle.xRight;\n\t\t\t\tblocked = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!blocked) {\n\t\t\tthis.xPos = Math.max(this.xPos - this.speed, 0);\n\t\t} else {\n\t\t\tthis.wasLastMoveBlocked = true;\n\t\t}\n\t}\n\n\tpublic moveEast(): void {\n\t\tif (this.lastDirectionMoved == Direction.EAST) {\n\t\t\tthis.consecutiveDirectionMoves += 1;\n\t\t} else {\n\t\t\tthis.consecutiveDirectionMoves = 0;\n\t\t}\n\t\tthis.lastDirectionMoved = Direction.EAST;\n\t\tlet blocked = false;\n\t\tfor (const obstacle of this.obstacleCanvas.obstacles) {\n\t\t\tif (\n\t\t\t\tthis.xPos + this.speed + this.size > obstacle.xLeft &&\n\t\t\t\tthis.xPos < obstacle.xLeft + obstacle.width &&\n\t\t\t\tobstacle.yTop < this.yPos + this.size &&\n\t\t\t\tthis.yPos < obstacle.yBottom\n\t\t\t) {\n\t\t\t\tthis.xPos = obstacle.xLeft - this.size;\n\t\t\t\tblocked = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!blocked) {\n\t\t\tthis.xPos = Math.min(this.xPos + this.speed, this.canvasWidth - this.size);\n\t\t} else {\n\t\t\tthis.wasLastMoveBlocked = true;\n\t\t}\n\t}\n\n\tpublic moveNorthEast(): void {\n\t\tif (this.lastDirectionMoved == Direction.NORTHEAST) {\n\t\t\tthis.consecutiveDirectionMoves += 1;\n\t\t} else {\n\t\t\tthis.consecutiveDirectionMoves = 0;\n\t\t}\n\t\tthis.lastDirectionMoved = Direction.NORTHEAST;\n\t\tlet blockedNorth = false;\n\t\tlet blockedEast = false;\n\t\tfor (const obstacle of this.obstacleCanvas.obstacles) {\n\t\t\tif (\n\t\t\t\t!blockedNorth &&\n\t\t\t\tthis.yPos - this.speed < obstacle.yTop + obstacle.height &&\n\t\t\t\tthis.yPos > obstacle.yTop &&\n\t\t\t\tobstacle.xLeft < this.xPos + this.size &&\n\t\t\t\tthis.xPos < obstacle.xRight\n\t\t\t) {\n\t\t\t\tthis.yPos = obstacle.yBottom;\n\t\t\t\tblockedNorth = true;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t!blockedEast &&\n\t\t\t\tthis.xPos + this.speed + this.size > obstacle.xLeft &&\n\t\t\t\tthis.xPos < obstacle.xLeft + obstacle.width &&\n\t\t\t\tobstacle.yTop < this.yPos + this.size &&\n\t\t\t\tthis.yPos < obstacle.yBottom\n\t\t\t) {\n\t\t\t\tthis.xPos = obstacle.xLeft - this.size;\n\t\t\t\tblockedEast = true;\n\t\t\t}\n\t\t}\n\t\tif (blockedNorth && blockedEast) {\n\t\t\tthis.wasLastMoveBlocked = true;\n\t\t}\n\t\tif (!blockedNorth) {\n\t\t\tthis.yPos = Math.max(this.yPos - this.speed, 0);\n\t\t}\n\t\tif (!blockedEast) {\n\t\t\tthis.xPos = Math.min(this.xPos + this.speed, this.canvasWidth - this.size);\n\t\t}\n\t}\n\n\tpublic moveNorthWest(): void {\n\t\tif (this.lastDirectionMoved == Direction.NORTHWEST) {\n\t\t\tthis.consecutiveDirectionMoves += 1;\n\t\t} else {\n\t\t\tthis.consecutiveDirectionMoves = 0;\n\t\t}\n\t\tthis.lastDirectionMoved = Direction.NORTHWEST;\n\t\tlet blockedNorth = false;\n\t\tlet blockedWest = false;\n\t\tfor (const obstacle of this.obstacleCanvas.obstacles) {\n\t\t\tif (\n\t\t\t\t!blockedNorth &&\n\t\t\t\tthis.yPos - this.speed < obstacle.yTop + obstacle.height &&\n\t\t\t\tthis.yPos > obstacle.yTop &&\n\t\t\t\tobstacle.xLeft < this.xPos + this.size &&\n\t\t\t\tthis.xPos < obstacle.xRight\n\t\t\t) {\n\t\t\t\tthis.yPos = obstacle.yBottom;\n\t\t\t\tblockedNorth = true;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t!blockedWest &&\n\t\t\t\tthis.xPos - this.speed < obstacle.xRight &&\n\t\t\t\tthis.xPos > obstacle.xLeft &&\n\t\t\t\tobstacle.yTop < this.yPos + this.size &&\n\t\t\t\tthis.yPos < obstacle.yBottom\n\t\t\t) {\n\t\t\t\tthis.xPos = obstacle.xRight;\n\t\t\t\tblockedWest = true;\n\t\t\t}\n\t\t}\n\t\tif (blockedNorth && blockedWest) {\n\t\t\tthis.wasLastMoveBlocked = true;\n\t\t}\n\t\tif (!blockedNorth) {\n\t\t\tthis.yPos = Math.max(this.yPos - this.speed, 0);\n\t\t}\n\t\tif (!blockedWest) {\n\t\t\tthis.xPos = Math.max(this.xPos - this.speed, 0);\n\t\t}\n\t}\n\n\tpublic moveSouthEast(): void {\n\t\tif (this.lastDirectionMoved == Direction.SOUTHEAST) {\n\t\t\tthis.consecutiveDirectionMoves += 1;\n\t\t} else {\n\t\t\tthis.consecutiveDirectionMoves = 0;\n\t\t}\n\t\tthis.lastDirectionMoved = Direction.SOUTHEAST;\n\t\tlet blockedSouth = false;\n\t\tlet blockedEast = false;\n\t\tfor (const obstacle of this.obstacleCanvas.obstacles) {\n\t\t\tif (\n\t\t\t\t!blockedSouth &&\n\t\t\t\tthis.yPos + this.speed + this.size > obstacle.yTop &&\n\t\t\t\tthis.yPos < obstacle.yTop + obstacle.height &&\n\t\t\t\tobstacle.xLeft < this.xPos + this.size &&\n\t\t\t\tthis.xPos < obstacle.xRight\n\t\t\t) {\n\t\t\t\tthis.yPos = obstacle.yTop - this.size;\n\t\t\t\tblockedSouth = true;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t!blockedEast &&\n\t\t\t\tthis.xPos + this.speed + this.size > obstacle.xLeft &&\n\t\t\t\tthis.xPos < obstacle.xLeft + obstacle.width &&\n\t\t\t\tobstacle.yTop < this.yPos + this.size &&\n\t\t\t\tthis.yPos < obstacle.yBottom\n\t\t\t) {\n\t\t\t\tthis.xPos = obstacle.xLeft - this.size;\n\t\t\t\tblockedEast = true;\n\t\t\t}\n\t\t}\n\t\tif (blockedSouth && blockedEast) {\n\t\t\tthis.wasLastMoveBlocked = true;\n\t\t}\n\t\tif (!blockedSouth) {\n\t\t\tthis.yPos = Math.min(this.yPos + this.speed, this.canvasHeight - this.size);\n\t\t}\n\t\tif (!blockedEast) {\n\t\t\tthis.xPos = Math.min(this.xPos + this.speed, this.canvasWidth - this.size);\n\t\t}\n\t}\n\n\tpublic moveSouthWest(): void {\n\t\tif (this.lastDirectionMoved == Direction.SOUTHWEST) {\n\t\t\tthis.consecutiveDirectionMoves += 1;\n\t\t} else {\n\t\t\tthis.consecutiveDirectionMoves = 0;\n\t\t}\n\t\tthis.lastDirectionMoved = Direction.SOUTHWEST;\n\t\tlet blockedSouth = false;\n\t\tlet blockedWest = false;\n\t\tfor (const obstacle of this.obstacleCanvas.obstacles) {\n\t\t\tif (\n\t\t\t\t!blockedSouth &&\n\t\t\t\tthis.yPos + this.speed + this.size > obstacle.yTop &&\n\t\t\t\tthis.yPos < obstacle.yTop + obstacle.height &&\n\t\t\t\tobstacle.xLeft < this.xPos + this.size &&\n\t\t\t\tthis.xPos < obstacle.xRight\n\t\t\t) {\n\t\t\t\tthis.yPos = obstacle.yTop - this.size;\n\t\t\t\tblockedSouth = true;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t!blockedWest &&\n\t\t\t\tthis.xPos - this.speed < obstacle.xRight &&\n\t\t\t\tthis.xPos > obstacle.xLeft &&\n\t\t\t\tobstacle.yTop < this.yPos + this.size &&\n\t\t\t\tthis.yPos < obstacle.yBottom\n\t\t\t) {\n\t\t\t\tthis.xPos = obstacle.xRight;\n\t\t\t\tblockedWest = true;\n\t\t\t}\n\t\t}\n\t\tif (blockedSouth && blockedWest) {\n\t\t\tthis.wasLastMoveBlocked = true;\n\t\t}\n\t\tif (!blockedSouth) {\n\t\t\tthis.yPos = Math.min(this.yPos + this.speed, this.canvasHeight - this.size);\n\t\t}\n\t\tif (!blockedWest) {\n\t\t\tthis.xPos = Math.max(this.xPos - this.speed, 0);\n\t\t}\n\t}\n\n\tpublic up(): boolean {\n\t\treturn this.keyStates.ArrowUp || this.keyStates.w || this.keyStates.W;\n\t}\n\n\tpublic down(): boolean {\n\t\treturn this.keyStates.ArrowDown || this.keyStates.s || this.keyStates.S;\n\t}\n\n\tpublic left(): boolean {\n\t\treturn this.keyStates.ArrowLeft || this.keyStates.a || this.keyStates.A;\n\t}\n\n\tpublic right(): boolean {\n\t\treturn this.keyStates.ArrowRight || this.keyStates.d || this.keyStates.D;\n\t}\n}\n","import { AudioFile, AudioManager } from './AudioManager';\nimport { ObstacleCanvas } from './ObstacleCanvas';\nimport { Tank } from './tanks/Tank';\n\nexport class Ammunition {\n\tpublic xPos: number;\n\tpublic yPos: number;\n\tpublic xVelocity: number;\n\tpublic yVelocity: number;\n\tpublic theta: number;\n\tpublic bounces: number;\n\tpublic maxBounces: number;\n\tpublic speed: number;\n\tpublic canvasWidth: number;\n\tpublic canvasHeight: number;\n\tpublic isDestroyed: boolean;\n\tpublic audioManager: AudioManager;\n\n\tconstructor(\n\t\tstartX: number,\n\t\tstartY: number,\n\t\ttheta: number,\n\t\tspeed: number,\n\t\tmaxBounces: number,\n\t\tcanvasWidth: number,\n\t\tcanvasHeight: number,\n\t\tisDestroyed: boolean,\n\t\taudioManager: AudioManager\n\t) {\n\t\tthis.xPos = startX;\n\t\tthis.yPos = startY;\n\t\tthis.theta = theta;\n\t\tthis.speed = speed;\n\t\tthis.xVelocity = Math.cos(this.theta) * this.speed;\n\t\tthis.yVelocity = Math.sin(this.theta) * this.speed;\n\t\tthis.bounces = 0;\n\t\tthis.maxBounces = maxBounces;\n\t\tthis.canvasWidth = canvasWidth;\n\t\tthis.canvasHeight = canvasHeight;\n\t\tthis.isDestroyed = isDestroyed;\n\t\tthis.audioManager = audioManager;\n\t}\n\n\tupdatePosition(obstacleCanvas: ObstacleCanvas): void {\n\t\tthis.xPos += this.xVelocity;\n\t\tthis.yPos += this.yVelocity;\n\n\t\tif (this.xPos <= 0 || this.xPos > this.canvasWidth) {\n\t\t\tthis.xVelocity = -this.xVelocity;\n\t\t\tthis.bounces++;\n\t\t}\n\n\t\tif (this.yPos <= 0 || this.yPos > this.canvasHeight) {\n\t\t\tthis.yVelocity = -this.yVelocity;\n\t\t\tthis.bounces++;\n\t\t}\n\n\t\tobstacleCanvas.obstacles.forEach((obstacle) => {\n\t\t\tif (\n\t\t\t\tthis.xPos > obstacle.xLeft &&\n\t\t\t\tthis.xPos < obstacle.xRight &&\n\t\t\t\tthis.yPos > obstacle.yTop &&\n\t\t\t\tthis.yPos < obstacle.yBottom\n\t\t\t) {\n\t\t\t\tthis.bounces++;\n\t\t\t\tconst fromLeft = Math.abs(this.xPos - obstacle.xLeft);\n\t\t\t\tconst fromRight = Math.abs(this.xPos - obstacle.xRight);\n\t\t\t\tconst fromTop = Math.abs(this.yPos - obstacle.yTop);\n\t\t\t\tconst fromBottom = Math.abs(this.yPos - obstacle.yBottom);\n\t\t\t\tconst minDistance = Math.min(fromLeft, fromRight, fromTop, fromBottom);\n\n\t\t\t\tif (minDistance === fromTop) {\n\t\t\t\t\tthis.yPos = obstacle.yTop - 1;\n\t\t\t\t\tthis.yVelocity = -this.yVelocity;\n\t\t\t\t} else if (minDistance === fromBottom) {\n\t\t\t\t\tthis.yPos = obstacle.yBottom + 1;\n\t\t\t\t\tthis.yVelocity = -this.yVelocity;\n\t\t\t\t} else if (minDistance === fromLeft) {\n\t\t\t\t\tthis.xPos = obstacle.xLeft - 1;\n\t\t\t\t\tthis.xVelocity = -this.xVelocity;\n\t\t\t\t} else if (minDistance === fromRight) {\n\t\t\t\t\tthis.xPos = obstacle.xRight + 1;\n\t\t\t\t\tthis.xVelocity = -this.xVelocity;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (this.bounces > this.maxBounces) {\n\t\t\tthis.isDestroyed = true;\n\t\t}\n\t}\n\n\tcheckEnemyHit(enemyTanks: Tank[]): void {\n\t\tenemyTanks.forEach((enemyTank) => {\n\t\t\tif (enemyTank.isDestroyed) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tthis.xPos > enemyTank.xLeft &&\n\t\t\t\tthis.xPos < enemyTank.xRight &&\n\t\t\t\tthis.yPos > enemyTank.yTop &&\n\t\t\t\tthis.yPos < enemyTank.yBottom\n\t\t\t) {\n\t\t\t\tthis.isDestroyed = true;\n\t\t\t\tenemyTank.isDestroyed = true;\n\t\t\t\tthis.audioManager.play(AudioFile.TANK_DESTROY);\n\t\t\t\tconsole.log('Enemy hit!!!');\n\t\t\t}\n\t\t});\n\t}\n\n\tcheckPlayerHit(playerTank: Tank): void {\n\t\tif (playerTank.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tthis.xPos > playerTank.xLeft &&\n\t\t\tthis.xPos < playerTank.xRight &&\n\t\t\tthis.yPos > playerTank.yTop &&\n\t\t\tthis.yPos < playerTank.yBottom\n\t\t) {\n\t\t\tplayerTank.isDestroyed = true;\n\t\t\tplayerTank.isDestroyed = true;\n\t\t\tthis.isDestroyed = true;\n\t\t\tconsole.log('Player Hit!!!');\n\t\t}\n\t}\n\n\treload(\n\t\tstartX: number,\n\t\tstartY: number,\n\t\ttheta: number,\n\t\tisDestroyed: boolean,\n\t\tcanvasWidth: number,\n\t\tcanvasHeight: number\n\t) {\n\t\tthis.xPos = startX;\n\t\tthis.yPos = startY;\n\t\tthis.theta = theta;\n\t\tthis.isDestroyed = isDestroyed;\n\t\tthis.xVelocity = Math.cos(this.theta) * this.speed;\n\t\tthis.yVelocity = Math.sin(this.theta) * this.speed;\n\t\tthis.canvasWidth = canvasWidth;\n\t\tthis.canvasHeight = canvasHeight;\n\t\tthis.bounces = 0;\n\t}\n\n\tdraw(context: CanvasRenderingContext2D): void {\n\t\tcontext.beginPath();\n\t\tcontext.arc(this.xPos, this.yPos, 4, 0, 2 * Math.PI);\n\t\tcontext.fillStyle = 'white';\n\t\tcontext.fill();\n\t\tcontext.lineWidth = 2;\n\t\tcontext.strokeStyle = 'black';\n\t\tcontext.stroke();\n\t\tcontext.closePath();\n\t}\n\n\twillHitPlayerTank(obstacleCanvas: ObstacleCanvas, playerTank: Tank): boolean {\n\t\tlet predictedXPosition: number = this.xPos;\n\t\tlet predictedYPosition: number = this.yPos;\n\t\tlet predictedXVelocity: number = this.xVelocity;\n\t\tlet predictedYVelocity: number = this.yVelocity;\n\t\tlet predictedBounces = 0;\n\t\twhile (predictedBounces <= this.maxBounces) {\n\t\t\tpredictedXPosition += predictedXVelocity;\n\t\t\tpredictedYPosition += predictedYVelocity;\n\t\t\tif (predictedXPosition <= 0 || predictedXPosition > this.canvasWidth) {\n\t\t\t\tpredictedXVelocity = -predictedXVelocity;\n\t\t\t\tpredictedBounces++;\n\t\t\t}\n\t\t\tif (predictedYPosition <= 0 || predictedYPosition > this.canvasHeight) {\n\t\t\t\tpredictedYVelocity = -predictedYVelocity;\n\t\t\t\tpredictedBounces++;\n\t\t\t}\n\t\t\tobstacleCanvas.obstacles.forEach((obstacle) => {\n\t\t\t\tif (\n\t\t\t\t\tpredictedXPosition > obstacle.xLeft &&\n\t\t\t\t\tpredictedXPosition < obstacle.xRight &&\n\t\t\t\t\tpredictedYPosition > obstacle.yTop &&\n\t\t\t\t\tpredictedYPosition < obstacle.yBottom\n\t\t\t\t) {\n\t\t\t\t\tpredictedBounces++;\n\t\t\t\t\tpredictedXVelocity = -predictedXVelocity;\n\t\t\t\t\tpredictedYVelocity = -predictedYVelocity;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (\n\t\t\t\tpredictedXPosition > playerTank.xLeft &&\n\t\t\t\tpredictedXPosition < playerTank.xRight &&\n\t\t\t\tpredictedYPosition > playerTank.yTop &&\n\t\t\t\tpredictedYPosition < playerTank.yBottom\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n\nexport class PlayerAmmunition extends Ammunition {\n\tconstructor(\n\t\tstartX: number,\n\t\tstartY: number,\n\t\ttheta: number,\n\t\tcanvasWidth: number,\n\t\tcanvasHeight: number,\n\t\tisDestroyed: boolean,\n\t\taudioManager: AudioManager\n\t) {\n\t\tconst playerAmmunitionMaxBounces = 1;\n\t\tconst playerAmmunitionSpeed = 4;\n\t\tsuper(\n\t\t\tstartX,\n\t\t\tstartY,\n\t\t\ttheta,\n\t\t\tplayerAmmunitionSpeed,\n\t\t\tplayerAmmunitionMaxBounces,\n\t\t\tcanvasWidth,\n\t\t\tcanvasHeight,\n\t\t\tisDestroyed,\n\t\t\taudioManager\n\t\t);\n\t}\n}\n\nexport class BasicAIAmmunition extends Ammunition {\n\tconstructor(\n\t\tstartX: number,\n\t\tstartY: number,\n\t\ttheta: number,\n\t\tcanvasWidth: number,\n\t\tcanvasHeight: number,\n\t\tisDestroyed: boolean,\n\t\taudioManager: AudioManager\n\t) {\n\t\tconst BasicAIAmmunitionMaxBounces = 0;\n\t\tconst BasicAIAmmunitionSpeed = 4;\n\t\tsuper(\n\t\t\tstartX,\n\t\t\tstartY,\n\t\t\ttheta,\n\t\t\tBasicAIAmmunitionSpeed,\n\t\t\tBasicAIAmmunitionMaxBounces,\n\t\t\tcanvasWidth,\n\t\t\tcanvasHeight,\n\t\t\tisDestroyed,\n\t\t\taudioManager\n\t\t);\n\t}\n}\n\nexport class SuperAIAmmunition extends Ammunition {\n\tconstructor(\n\t\tstartX: number,\n\t\tstartY: number,\n\t\ttheta: number,\n\t\tcanvasWidth: number,\n\t\tcanvasHeight: number,\n\t\tisDestroyed: boolean,\n\t\taudioManager: AudioManager\n\t) {\n\t\tconst superAIAmmunitionMaxBounces = 2;\n\t\tconst superAIAmmunitionSpeed = 6;\n\t\tsuper(\n\t\t\tstartX,\n\t\t\tstartY,\n\t\t\ttheta,\n\t\t\tsuperAIAmmunitionSpeed,\n\t\t\tsuperAIAmmunitionMaxBounces,\n\t\t\tcanvasWidth,\n\t\t\tcanvasHeight,\n\t\t\tisDestroyed,\n\t\t\taudioManager\n\t\t);\n\t}\n}\n","import { AudioFile, AudioManager } from './AudioManager';\nimport { Tank } from './tanks/Tank';\n\nclass BombFragment {\n\tpublic x: number;\n\tpublic y: number;\n\tpublic fragmentRadius: number;\n\tpublic fragmentColor: string;\n\tpublic velocityX: number;\n\tpublic velocityY: number;\n\tpublic blastRadius: number;\n\tpublic life: number;\n\n\tconstructor(x: number, y: number, radius: number, color: string, velocityX: number, velocityY: number, life: number) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.fragmentRadius = radius;\n\t\tthis.fragmentColor = color;\n\t\tthis.velocityX = velocityX;\n\t\tthis.velocityY = velocityY;\n\t\tthis.blastRadius = life;\n\t\tthis.life = life;\n\t}\n\n\tupdate(): void {\n\t\tthis.x += this.velocityX;\n\t\tthis.y += this.velocityY;\n\t\tthis.life -= 1;\n\t}\n\n\tdraw(context: CanvasRenderingContext2D): void {\n\t\tcontext.beginPath();\n\t\tcontext.arc(this.x, this.y, this.fragmentRadius * (this.life / this.blastRadius), 0, Math.PI * 2, false);\n\t\tcontext.fillStyle = this.fragmentColor;\n\t\tcontext.fill();\n\t\tcontext.closePath();\n\t}\n}\n\nexport class Bomb {\n\tpublic xPos: number;\n\tpublic yPos: number;\n\tpublic blastRadius: number;\n\tpublic blastDelayMS: number;\n\tpublic isDestroyed: boolean;\n\tpublic isExploding: boolean;\n\tpublic fuseStartTime: number;\n\tpublic shouldFlashRed: boolean;\n\tpublic audioManager: AudioManager;\n\n\tprivate fragments: BombFragment[];\n\n\tconstructor(startX: number, startY: number, blastRadius: number, isDestroyed: boolean, audioManager: AudioManager) {\n\t\tthis.xPos = startX;\n\t\tthis.yPos = startY;\n\t\tthis.blastRadius = blastRadius;\n\t\tthis.isDestroyed = isDestroyed;\n\t\tthis.audioManager = audioManager;\n\t\tthis.blastDelayMS = 5000;\n\t\tthis.fuseStartTime = 0;\n\t\tthis.shouldFlashRed = false;\n\t\tthis.isExploding = false;\n\t\tthis.fragments = [];\n\t}\n\n\tcheckEnemyHit(enemyTanks: Tank[]): void {\n\t\tenemyTanks.forEach((enemyTank) => {\n\t\t\tif (enemyTank.isDestroyed) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.isExploding) {\n\t\t\t\tif (\n\t\t\t\t\tthis.isExploding &&\n\t\t\t\t\tthis.isPointInsideBlastRadius(\n\t\t\t\t\t\tenemyTank.xPos + enemyTank.tankMidpoint,\n\t\t\t\t\t\tenemyTank.yPos + enemyTank.tankMidpoint\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tenemyTank.isDestroyed = true;\n\t\t\t\t\tconsole.log('Enemy hit with bomb!!!');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tcheckPlayerHit(playerTank: Tank): void {\n\t\tif (playerTank.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tthis.isExploding &&\n\t\t\t(this.isPointInsideBlastRadius(playerTank.xLeft, playerTank.yTop) ||\n\t\t\t\tthis.isPointInsideBlastRadius(playerTank.xRight, playerTank.yTop) ||\n\t\t\t\tthis.isPointInsideBlastRadius(playerTank.xLeft, playerTank.yBottom) ||\n\t\t\t\tthis.isPointInsideBlastRadius(playerTank.xRight, playerTank.yBottom) ||\n\t\t\t\tthis.isPointInsideBlastRadius(playerTank.xPos, playerTank.yPos))\n\t\t) {\n\t\t\tplayerTank.isDestroyed = true;\n\t\t\tconsole.log('Player Hit with bomb!!!');\n\t\t}\n\t}\n\n\tsetFuse(): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\t\tthis.fuseStartTime = performance.now();\n\t\tthis.animateFuse();\n\t\tsetTimeout((): void => {\n\t\t\tthis.createFragments();\n\t\t\tthis.audioManager.play(AudioFile.BOMB_EXPLODE);\n\t\t\tthis.isExploding = true;\n\t\t\tsetTimeout((): void => {\n\t\t\t\tthis.isExploding = false;\n\t\t\t\tthis.isDestroyed = true;\n\t\t\t}, 1000);\n\t\t}, this.blastDelayMS);\n\t}\n\n\tprivate animateFuse(): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\t\tconst elapsedTime = performance.now() - this.fuseStartTime;\n\t\tconst remainingTime = this.blastDelayMS - elapsedTime;\n\t\tif (remainingTime <= 0) {\n\t\t\tthis.isDestroyed = true;\n\t\t\treturn;\n\t\t}\n\t\tconst fractionElapsed = elapsedTime / this.blastDelayMS;\n\t\tconst flashThresholds = [0.25, 0.5, 0.625, 0.75, 0.8125, 0.875, 0.90625, 0.9375, 0.96875, 0.984375];\n\t\tthis.shouldFlashRed = flashThresholds.some(\n\t\t\t(threshold) => fractionElapsed > threshold && fractionElapsed < threshold + 0.01\n\t\t);\n\t\trequestAnimationFrame(() => this.animateFuse());\n\t}\n\n\tisPointInsideBlastRadius(x: number, y: number): boolean {\n\t\tconst dx = x - this.xPos;\n\t\tconst dy = y - this.yPos;\n\t\treturn Math.sqrt(dx * dx + dy * dy) <= this.blastRadius;\n\t}\n\n\tcreateFragments(): void {\n\t\tconst fargmentCount = 50;\n\t\tfor (let i = 0; i < fargmentCount; i++) {\n\t\t\tconst angle = Math.random() * 2 * Math.PI;\n\t\t\tconst speed = Math.random() * 5 + 2;\n\t\t\tconst velocityX = Math.cos(angle) * speed;\n\t\t\tconst velocityY = Math.sin(angle) * speed;\n\t\t\tconst fragment = new BombFragment(\n\t\t\t\tthis.xPos,\n\t\t\t\tthis.yPos,\n\t\t\t\tMath.random() * 2 + 1,\n\t\t\t\t'rgba(255, 69, 0, 1)',\n\t\t\t\tvelocityX,\n\t\t\t\tvelocityY,\n\t\t\t\tthis.blastRadius\n\t\t\t);\n\t\t\tthis.fragments.push(fragment);\n\t\t}\n\t}\n\n\tdraw(context: CanvasRenderingContext2D): void {\n\t\tif (this.isExploding) {\n\t\t\tthis.drawExplosion(context);\n\t\t\treturn;\n\t\t}\n\n\t\tcontext.beginPath();\n\t\tcontext.arc(this.xPos, this.yPos, 15, 0, 2 * Math.PI);\n\t\tcontext.fillStyle = this.shouldFlashRed ? 'red' : 'yellow';\n\t\tcontext.fill();\n\t\tcontext.lineWidth = 3;\n\t\tcontext.strokeStyle = 'black';\n\t\tcontext.stroke();\n\t\tcontext.closePath();\n\n\t\tcontext.beginPath();\n\t\tcontext.arc(this.xPos, this.yPos, 10, 0, 2 * Math.PI);\n\t\tcontext.lineWidth = 1.5;\n\t\tcontext.strokeStyle = 'black';\n\t\tcontext.stroke();\n\t\tcontext.closePath();\n\t}\n\n\tdrawExplosion(context: CanvasRenderingContext2D): void {\n\t\tthis.fragments.forEach((particle) => {\n\t\t\tparticle.update();\n\t\t\tparticle.draw(context);\n\t\t});\n\n\t\tthis.fragments = this.fragments.filter((particle) => particle.life > 0);\n\t}\n}\n\nexport class PlayerBomb extends Bomb {\n\tconstructor(startX: number, startY: number, isDestroyed: boolean, audioManager: AudioManager) {\n\t\tconst playerBombBlastRadius = 50;\n\t\tsuper(startX, startY, playerBombBlastRadius, isDestroyed, audioManager);\n\t}\n}\n\nexport class BasicBomb extends Bomb {\n\tconstructor(startX: number, startY: number, isDestroyed: boolean, audioManager: AudioManager) {\n\t\tconst basicBombBlastRadius = 80;\n\t\tsuper(startX, startY, basicBombBlastRadius, isDestroyed, audioManager);\n\t}\n}\n\nexport class SuperBomb extends Bomb {\n\tconstructor(startX: number, startY: number, isDestroyed: boolean, audioManager: AudioManager) {\n\t\tconst superBombBlastRadius = 20;\n\t\tsuper(startX, startY, superBombBlastRadius, isDestroyed, audioManager);\n\t}\n}\n","import { Tank } from './tanks/Tank';\n\nexport class GameRenderer {\n\tpublic playerWin = false;\n\tpublic enemyWin = false;\n\n\tprivate context: CanvasRenderingContext2D | null;\n\n\tconstructor(public canvas: HTMLCanvasElement) {\n\t\tconst context = this.canvas.getContext('2d');\n\t\tif (!context) {\n\t\t\tthrow new Error('2d context not supported or canvas element not found.');\n\t\t}\n\t\tthis.context = context;\n\t}\n\n\tpublic initializeCanvas(width: number, height: number): void {\n\t\tthis.canvas.width = width;\n\t\tthis.canvas.height = height;\n\t}\n\n\trenderLevelOverScreen() {\n\t\tif (!this.context) {\n\t\t\tthrow new Error('2d context not supported or canvas element not found.');\n\t\t}\n\n\t\tconst message = this.playerWin ? 'Win' : this.enemyWin ? 'Lose' : '';\n\t\tif (message === '') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst fontSize = 100;\n\t\tthis.context.font = `${fontSize}px Arial`;\n\t\tthis.context.lineWidth = 5;\n\t\tthis.context.strokeStyle = this.playerWin ? 'green' : 'red';\n\t\tthis.context.fillStyle = this.playerWin ? 'green' : 'red';\n\n\t\tconst textWidth = this.context.measureText(message).width;\n\t\tconst x = (this.canvas.width - textWidth) / 2;\n\t\tconst y = this.canvas.height / 2 + fontSize / 2;\n\n\t\tthis.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\t\tthis.context.strokeText(message, x, y);\n\t\tthis.context.fillText(message, x, y);\n\t}\n\n\trender(progress: number, playerTank: Tank, enemyTanks: Tank[]): void {\n\t\tif (!this.context) {\n\t\t\tthrow new Error('2d context not supported or canvas element not found.');\n\t\t}\n\t\tthis.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n\t\tif (playerTank.isDestroyed) {\n\t\t\tthis.enemyWin = true;\n\t\t} else if (enemyTanks.every((tank) => tank.isDestroyed)) {\n\t\t\tthis.playerWin = true;\n\t\t} else {\n\t\t\tplayerTank.updatePosition(playerTank);\n\t\t\tplayerTank.aim(playerTank.aimXPos, playerTank.aimYPos, playerTank);\n\n\t\t\tenemyTanks.forEach((enemyTank) => {\n\t\t\t\tenemyTank.updatePosition(playerTank);\n\t\t\t\tenemyTank.aim(enemyTank.aimXPos, enemyTank.aimYPos, playerTank);\n\t\t\t\tenemyTank.shoot(playerTank);\n\t\t\t\tenemyTank.plantBomb(playerTank);\n\t\t\t});\n\n\t\t\tenemyTanks.forEach((enemyTank) => {\n\t\t\t\tenemyTank.draw(this.context as CanvasRenderingContext2D);\n\t\t\t\tenemyTank.reticule.draw(\n\t\t\t\t\tthis.context as CanvasRenderingContext2D,\n\t\t\t\t\tenemyTank.xPos,\n\t\t\t\t\tenemyTank.yPos,\n\t\t\t\t\tenemyTank.aimXPos,\n\t\t\t\t\tenemyTank.aimYPos\n\t\t\t\t);\n\t\t\t\tenemyTank.ammunition.forEach((ammunition) => {\n\t\t\t\t\tif (ammunition.isDestroyed) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tammunition.updatePosition(enemyTank.obstacleCanvas);\n\t\t\t\t\tammunition.checkPlayerHit(playerTank);\n\t\t\t\t\tammunition.draw(this.context as CanvasRenderingContext2D);\n\t\t\t\t});\n\t\t\t\tenemyTank.bombs.forEach((bomb) => {\n\t\t\t\t\tif (bomb.isDestroyed && !bomb.isExploding) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbomb.checkPlayerHit(playerTank);\n\t\t\t\t\tbomb.draw(this.context as CanvasRenderingContext2D);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tplayerTank.draw(this.context as CanvasRenderingContext2D);\n\t\t\tplayerTank.reticule.draw(\n\t\t\t\tthis.context as CanvasRenderingContext2D,\n\t\t\t\tplayerTank.xPos,\n\t\t\t\tplayerTank.yPos,\n\t\t\t\tplayerTank.aimXPos,\n\t\t\t\tplayerTank.aimYPos\n\t\t\t);\n\t\t\tplayerTank.ammunition.forEach((ammunition) => {\n\t\t\t\tif (ammunition.isDestroyed) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tammunition.updatePosition(playerTank.obstacleCanvas);\n\t\t\t\tammunition.checkEnemyHit(enemyTanks);\n\t\t\t\tammunition.draw(this.context as CanvasRenderingContext2D);\n\t\t\t});\n\t\t\tplayerTank.bombs.forEach((bomb) => {\n\t\t\t\tif (bomb.isDestroyed && !bomb.isExploding) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tbomb.checkEnemyHit(enemyTanks);\n\t\t\t\tbomb.draw(this.context as CanvasRenderingContext2D);\n\t\t\t});\n\t\t}\n\t}\n}\n","import { GameRenderer } from './GameRenderer';\nimport { ObstacleCanvas } from './ObstacleCanvas';\nimport { Tank } from './tanks/Tank';\n\nexport class GameCanvas {\n\tpublic gameRenderer: GameRenderer;\n\tprivate playerTank: Tank | null = null;\n\tprivate enemyTanks: Tank[] = [];\n\tprivate lastRenderTime: number;\n\tpublic obstacleCanvas: ObstacleCanvas;\n\tpublic width: number;\n\tpublic height: number;\n\tpublic animationFrameID: number | null = null;\n\n\tconstructor(canvasSelector: string, width: number, height: number, obstacleCanvas: ObstacleCanvas) {\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.obstacleCanvas = obstacleCanvas;\n\t\tthis.animationFrameID = null;\n\t\tthis.gameRenderer = new GameRenderer(document.querySelector(canvasSelector) as HTMLCanvasElement);\n\t\tthis.gameRenderer.initializeCanvas(this.width, this.height);\n\t\tthis.lastRenderTime = 0;\n\t\twindow.addEventListener('resize', this.resizeCanvas.bind(this));\n\t}\n\n\tpublic start() {\n\t\tif (!this.animationFrameID) {\n\t\t\tthis.animationFrameID = requestAnimationFrame(this.gameLoop.bind(this));\n\t\t}\n\t}\n\n\tpublic stop() {\n\t\tif (this.animationFrameID) {\n\t\t\tcancelAnimationFrame(this.animationFrameID);\n\t\t\tthis.animationFrameID = null;\n\t\t}\n\t}\n\n\tprivate resizeCanvas(): void {}\n\n\tprivate gameLoop(timeStamp: number): void {\n\t\tif (this.playerTank != null) {\n\t\t\tconst progress = timeStamp - this.lastRenderTime;\n\t\t\tthis.gameRenderer.render(progress, this.playerTank, this.enemyTanks);\n\t\t\tif (this.gameRenderer.enemyWin || this.gameRenderer.playerWin) {\n\t\t\t\tthis.stop();\n\t\t\t\tthis.obstacleCanvas.clearObstacles();\n\t\t\t\tthis.gameRenderer.renderLevelOverScreen();\n\t\t\t}\n\t\t\tthis.lastRenderTime = timeStamp;\n\t\t\tthis.animationFrameID = requestAnimationFrame(this.gameLoop.bind(this));\n\t\t}\n\t}\n\n\tpublic addEnemyTank(tank: Tank): void {\n\t\tthis.enemyTanks.push(tank);\n\t}\n\n\tpublic addPlayerTank(tank: Tank): void {\n\t\tthis.playerTank = tank;\n\t}\n}\n","import { GameCanvas } from './GameCanvas';\nimport { ObstacleCanvas } from './ObstacleCanvas';\nimport { Tank } from './tanks/Tank';\n\nexport class Node {\n\tpublic x: number;\n\tpublic y: number;\n\tpublic g = 0;\n\tpublic h = 0;\n\tpublic f = 0;\n\tpublic walkable = true;\n\tpublic parent: Node | null = null;\n\n\tconstructor(x: number, y: number) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n}\n\nexport class NavigationGrid {\n\tpublic grid: Node[][] = [];\n\tpublic gridCellWidth = 30;\n\tpublic gridXLength: number;\n\tpublic gridYLength: number;\n\tpublic path: Node[] = [];\n\n\tconstructor(gameCanvas: GameCanvas, obstacleCanvas: ObstacleCanvas) {\n\t\tthis.gridXLength = Math.floor(gameCanvas.width / this.gridCellWidth);\n\t\tthis.gridYLength = Math.floor(gameCanvas.height / this.gridCellWidth);\n\t\tfor (let x = 0; x < this.gridXLength; x++) {\n\t\t\tthis.grid[x] = [];\n\t\t\tfor (let y = 0; y < this.gridYLength; y++) {\n\t\t\t\tthis.grid[x][y] = new Node(x, y);\n\t\t\t\tconst gridXLeft = x * this.gridCellWidth;\n\t\t\t\tconst gridXRight = gridXLeft + this.gridCellWidth;\n\t\t\t\tconst gridYTop = y * this.gridCellWidth;\n\t\t\t\tconst gridYBottom = gridYTop + this.gridCellWidth;\n\t\t\t\tthis.grid[x][y].walkable = !obstacleCanvas.obstacles.some(\n\t\t\t\t\t(obs) => gridXRight > obs.xLeft && gridXLeft < obs.xRight && gridYBottom > obs.yTop && gridYTop < obs.yBottom\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\treset(): void {\n\t\tfor (let x = 0; x < this.gridXLength; x++) {\n\t\t\tfor (let y = 0; y < this.gridYLength; y++) {\n\t\t\t\tthis.grid[x][y].f = 0;\n\t\t\t\tthis.grid[x][y].g = 0;\n\t\t\t\tthis.grid[x][y].h = 0;\n\t\t\t\tthis.grid[x][y].parent = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetNodeFromTank(tank: Tank): Node {\n\t\tlet xGridCoordinate: number = Math.floor((tank.xPos + tank.size / 2) / this.gridCellWidth);\n\t\tlet yGridCoordinate: number = Math.floor((tank.yPos + tank.size / 2) / this.gridCellWidth);\n\n\t\txGridCoordinate = Math.max(0, Math.min(xGridCoordinate, this.gridXLength - 1));\n\t\tyGridCoordinate = Math.max(0, Math.min(yGridCoordinate, this.gridYLength - 1));\n\t\treturn this.grid[xGridCoordinate][yGridCoordinate];\n\t}\n\n\tgetRandomNodeInRadiusOfTarget(target: Node, radius: number): Node {\n\t\tconst candidateNodes: Node[] = [];\n\t\tfor (let x = 0; x < this.gridXLength; x++) {\n\t\t\tfor (let y = 0; y < this.gridYLength; y++) {\n\t\t\t\tconst node = this.grid[x][y];\n\t\t\t\tconst distance = Math.sqrt(Math.pow(node.x - target.x, 2) + Math.pow(node.y - target.y, 2));\n\t\t\t\tif (distance <= radius + 1 && distance >= radius - 1 && node.walkable) {\n\t\t\t\t\tcandidateNodes.push(node);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst randomIndex = Math.floor(Math.random() * candidateNodes.length);\n\t\treturn candidateNodes[randomIndex];\n\t}\n\n\taStar(start: Node, target: Node): Node[] | null {\n\t\tconst openSet: Node[] = [start];\n\t\tconst closedSet = new Set<Node>();\n\n\t\twhile (openSet.length > 0) {\n\t\t\tlet current: Node | null = openSet.sort((a, b) => a.f - b.f)[0];\n\n\t\t\tif (current.x === target.x && current.y === target.y) {\n\t\t\t\tconst path = [];\n\t\t\t\twhile (current !== null) {\n\t\t\t\t\tpath.unshift(current);\n\t\t\t\t\tcurrent = current.parent;\n\t\t\t\t}\n\t\t\t\treturn path;\n\t\t\t}\n\n\t\t\topenSet.splice(openSet.indexOf(current), 1);\n\t\t\tclosedSet.add(current);\n\n\t\t\tconst neighbors = this.getWalkableNeighbors(current);\n\n\t\t\tfor (const neighbor of neighbors) {\n\t\t\t\tif (closedSet.has(neighbor)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst tentativeG = current.g + (neighbor.x - current.x === 0 || neighbor.y - current.y === 0 ? 1 : Math.SQRT2);\n\t\t\t\tif (!openSet.includes(neighbor)) {\n\t\t\t\t\topenSet.push(neighbor);\n\t\t\t\t} else if (tentativeG >= neighbor.g) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tneighbor.parent = current;\n\t\t\t\tneighbor.g = tentativeG;\n\t\t\t\tneighbor.h = Math.round(Math.sqrt(Math.pow(neighbor.x - target.x, 2) + Math.pow(neighbor.y - target.y, 2)));\n\t\t\t\tneighbor.f = neighbor.g + neighbor.h;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetWalkableNeighbors(node: Node): Node[] {\n\t\t// Get the 8 nodes surrounding the current only if its walkable\n\t\tconst neighbors: Node[] = [];\n\t\tfor (let dx = -1; dx <= 1; dx++) {\n\t\t\tfor (let dy = -1; dy <= 1; dy++) {\n\t\t\t\tif (dx === 0 && dy === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst x = node.x + dx;\n\t\t\t\tconst y = node.y + dy;\n\n\t\t\t\tif (x >= 0 && y >= 0 && x < this.gridXLength && y < this.gridYLength && this.grid[x][y].walkable) {\n\t\t\t\t\tneighbors.push(this.grid[x][y]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn neighbors;\n\t}\n}\n","export class Obstacle {\n\tpublic xLeft: number;\n\tpublic xRight: number;\n\tpublic yTop: number;\n\tpublic yBottom: number;\n\tpublic width: number;\n\tpublic height: number;\n\n\tconstructor(startX: number, startY: number, width: number, height: number) {\n\t\tthis.xLeft = startX;\n\t\tthis.yTop = startY;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.yBottom = this.yTop + this.height;\n\t\tthis.xRight = this.xLeft + this.width;\n\t}\n\n\tdraw(context: CanvasRenderingContext2D): void {\n\t\tcontext.beginPath();\n\t\tcontext.rect(this.xLeft, this.yTop, this.width, this.height);\n\t\tcontext.fillStyle = 'black';\n\t\tcontext.fill();\n\t}\n}\n","import { Obstacle } from './Obstacle';\n\nexport class ObstacleCanvas {\n\tprivate obstacleCanvas: HTMLCanvasElement;\n\tpublic obstacles: Obstacle[] = [];\n\tpublic width: number;\n\tpublic height: number;\n\n\tconstructor(obstacleCanvasSelector: string, width: number, height: number, obstacles: Obstacle[]) {\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.obstacles = obstacles;\n\t\twindow.addEventListener('resize', this.resizeCanvas.bind(this));\n\t\tthis.obstacleCanvas = document.querySelector(obstacleCanvasSelector) as HTMLCanvasElement;\n\t\tthis.obstacleCanvas.width = width;\n\t\tthis.obstacleCanvas.height = height;\n\t\tobstacles.forEach((obstacle) => {\n\t\t\tobstacle.draw(this.obstacleCanvas.getContext('2d') as CanvasRenderingContext2D);\n\t\t});\n\t}\n\n\tpublic clearObstacles(): void {\n\t\tconst context = this.obstacleCanvas.getContext('2d');\n\t\tif (context) {\n\t\t\tcontext.clearRect(0, 0, this.obstacleCanvas.width, this.obstacleCanvas.height);\n\t\t}\n\t\tthis.obstacles = [];\n\t}\n\n\tprivate resizeCanvas(): void {}\n}\n","export class Reticule {\n\tprotected color: string;\n\tprotected dashPattern: [number, number]; // [dashLengthInPixels, spaceLengthInPixels]\n\tprotected renderReticule: boolean;\n\tprotected tankSize: number;\n\tprotected reticuleWidth = 5;\n\n\tconstructor(dashPattern: [number, number], color: string, renderReticule: boolean, tankSize: number) {\n\t\tthis.color = color;\n\t\tthis.dashPattern = dashPattern;\n\t\tthis.renderReticule = renderReticule;\n\t\tthis.tankSize = tankSize;\n\t}\n\n\tpublic draw(\n\t\tcontext: CanvasRenderingContext2D,\n\t\ttankXPos: number,\n\t\ttankYPos: number,\n\t\tmouseXPos: number,\n\t\tmouseYpos: number\n\t): void {\n\t\tif (this.renderReticule) {\n\t\t\tcontext.strokeStyle = this.color;\n\t\t\tcontext.setLineDash(this.dashPattern);\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(tankXPos + this.tankSize / 2, tankYPos + this.tankSize / 2);\n\t\t\tcontext.lineTo(mouseXPos, mouseYpos);\n\t\t\tcontext.lineWidth = this.reticuleWidth;\n\t\t\tcontext.stroke();\n\t\t}\n\t}\n}\n\nexport class NoReticule extends Reticule {\n\tconstructor() {\n\t\tsuper([0, 0], 'blue', false, 0);\n\t}\n}\n\nexport class SimplePlayerReticule extends Reticule {\n\tconstructor(tankSize: number) {\n\t\tsuper([5, 5], 'blue', true, tankSize);\n\t}\n}\n\nexport class CustomColorReticule extends Reticule {\n\tconstructor(tankSize: number, color: string) {\n\t\tsuper([4, 1], color, true, tankSize);\n\t}\n}\n\nexport class AdjustingCustomColorReticule extends Reticule {\n\tprivate maxReticuleLength: number;\n\n\tconstructor(tankSize: number, color: string, maxReticuleLength: number) {\n\t\tsuper([1, 1], color, true, tankSize);\n\t\tthis.maxReticuleLength = maxReticuleLength;\n\t}\n\n\toverride draw(\n\t\tcontext: CanvasRenderingContext2D,\n\t\ttankXPosition: number,\n\t\ttankYPosition: number,\n\t\tmouseXPosition: number,\n\t\tmouseYPosition: number\n\t): void {\n\t\tconst xDist = mouseXPosition - tankXPosition;\n\t\tconst yDist = mouseYPosition - tankYPosition;\n\t\tconst distance = Math.sqrt(Math.pow(xDist, 2) + Math.pow(yDist, 2));\n\t\tconst distanceToMaxDistanceRatio = distance / this.maxReticuleLength;\n\t\tconst distanceToMaxDistanceRatioInverse = 1 - distanceToMaxDistanceRatio;\n\t\tconst dashLength = distanceToMaxDistanceRatio * 10 + 2;\n\t\tconst spaceLength = distanceToMaxDistanceRatioInverse * 10 + 5;\n\n\t\tif (this.renderReticule) {\n\t\t\tcontext.strokeStyle = this.color;\n\t\t\tcontext.setLineDash([dashLength, spaceLength]);\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(tankXPosition + this.tankSize / 2, tankYPosition + this.tankSize / 2);\n\t\t\tcontext.lineTo(mouseXPosition, mouseYPosition);\n\t\t\tcontext.lineWidth = this.reticuleWidth;\n\t\t\tcontext.stroke();\n\n\t\t\tcontext.setLineDash([]);\n\t\t\tconst xLength = 10;\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(mouseXPosition - xLength, mouseYPosition - xLength);\n\t\t\tcontext.lineTo(mouseXPosition + xLength, mouseYPosition + xLength);\n\t\t\tcontext.stroke();\n\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(mouseXPosition - xLength, mouseYPosition + xLength);\n\t\t\tcontext.lineTo(mouseXPosition + xLength, mouseYPosition - xLength);\n\t\t\tcontext.stroke();\n\t\t}\n\t}\n}\n","import { Ammunition } from '../Ammunition';\nimport { AudioManager } from '../AudioManager';\nimport { Bomb } from '../Bomb';\nimport { ObstacleCanvas } from '../ObstacleCanvas';\nimport { Reticule } from '../Reticule';\nimport { Tank } from './Tank';\n\nexport class EnemyTank extends Tank {\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\treticule: Reticule,\n\t\txPos: number,\n\t\tyPos: number,\n\t\tspeed: number,\n\t\tsize: number,\n\t\tcolor: string,\n\t\tobstacleCanvas: ObstacleCanvas,\n\t\tammunition: Ammunition[],\n\t\tbombs: Bomb[],\n\t\taudioManager: AudioManager\n\t) {\n\t\tsuper(canvas, reticule, xPos, yPos, speed, size, color, obstacleCanvas, ammunition, bombs, audioManager);\n\t}\n}\n","import { Ammunition } from '../Ammunition';\nimport { AudioManager } from '../AudioManager';\nimport { Bomb } from '../Bomb';\nimport { NavigationGrid, Node } from '../NavigationGrid';\nimport { ObstacleCanvas } from '../ObstacleCanvas';\nimport { NoReticule } from '../Reticule';\nimport { EnemyTank } from './EnemyTank';\nimport { Direction, Tank } from './Tank';\n\nexport class BomberTank extends EnemyTank {\n\tpublic aimAngleChangeAmount = 0;\n\tpublic navigationGrid: NavigationGrid;\n\tpublic aggressionFactor = 5; // Distance tank should maintain from its target\n\tpublic currentNode: Node;\n\tpublic path: Node[] | null = [];\n\tpublic pathRecaculationInterval = 60;\n\tpublic drawNavigationGrid = false;\n\n\tpublic minTimeBetweenShotsMS = 20000;\n\tpublic timeBetweenShotsIsElapsed = true;\n\tpublic minTimeBetweenBombPlantsMS = 1000;\n\tpublic timeBetweenPlantsIsElapsed = true;\n\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\txPos: number,\n\t\tyPos: number,\n\t\tobstacleCanvas: ObstacleCanvas,\n\t\tammunition: Ammunition[],\n\t\tbombs: Bomb[],\n\t\tnavigationGrid: NavigationGrid,\n\t\taudioManager: AudioManager\n\t) {\n\t\tconst simpleMovingTankSpeed = 2;\n\t\tconst simpleMovingTankSize = 30;\n\t\tconst simpleMovingTankColor = 'yellow';\n\t\tsuper(\n\t\t\tcanvas,\n\t\t\tnew NoReticule(),\n\t\t\txPos,\n\t\t\tyPos,\n\t\t\tsimpleMovingTankSpeed,\n\t\t\tsimpleMovingTankSize,\n\t\t\tsimpleMovingTankColor,\n\t\t\tobstacleCanvas,\n\t\t\tammunition,\n\t\t\tbombs,\n\t\t\taudioManager\n\t\t);\n\t\tthis.navigationGrid = navigationGrid;\n\t\tthis.currentNode = this.navigationGrid.getNodeFromTank(this);\n\t}\n\n\tpublic override draw(context: CanvasRenderingContext2D): void {\n\t\tif (this.drawNavigationGrid) {\n\t\t\tcontext.lineWidth = 1;\n\t\t\tfor (let i = 0; i <= this.navigationGrid.gridYLength; i++) {\n\t\t\t\tcontext.fillStyle = 'blue';\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.moveTo(0, i * this.navigationGrid.gridCellWidth);\n\t\t\t\tcontext.lineTo(\n\t\t\t\t\tthis.navigationGrid.gridXLength * this.navigationGrid.gridCellWidth,\n\t\t\t\t\ti * this.navigationGrid.gridCellWidth\n\t\t\t\t);\n\t\t\t\tcontext.stroke();\n\t\t\t}\n\t\t\tfor (let j = 0; j <= this.navigationGrid.gridXLength; j++) {\n\t\t\t\tcontext.fillStyle = 'blue';\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.moveTo(j * this.navigationGrid.gridCellWidth, 0);\n\t\t\t\tcontext.lineTo(\n\t\t\t\t\tj * this.navigationGrid.gridCellWidth,\n\t\t\t\t\tthis.navigationGrid.gridXLength * this.navigationGrid.gridCellWidth\n\t\t\t\t);\n\t\t\t\tcontext.stroke();\n\t\t\t}\n\t\t\tcontext.fillStyle = this.color;\n\t\t\tthis.path?.forEach((value: Node, index: number, array: Node[]) => {\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.arc(\n\t\t\t\t\tvalue.x * this.navigationGrid.gridCellWidth + this.navigationGrid.gridCellWidth / 2,\n\t\t\t\t\tvalue.y * this.navigationGrid.gridCellWidth + this.navigationGrid.gridCellWidth / 2,\n\t\t\t\t\t5,\n\t\t\t\t\t0,\n\t\t\t\t\t2 * Math.PI\n\t\t\t\t);\n\t\t\t\tcontext.fill();\n\t\t\t});\n\t\t}\n\t\tsuper.draw(context);\n\t}\n\n\tpublic override updatePosition(playerTank: Tank): void {\n\t\tthis.pathRecaculationInterval -= 1;\n\t\tif (this.path == null || this.path.length == 0 || this.pathRecaculationInterval == 0) {\n\t\t\tthis.navigationGrid.reset();\n\t\t\tconst startNode: Node = this.navigationGrid.getNodeFromTank(this);\n\t\t\tconst targetNode: Node = this.navigationGrid.getNodeFromTank(playerTank);\n\t\t\tconst destinationNode: Node = this.navigationGrid.getRandomNodeInRadiusOfTarget(\n\t\t\t\ttargetNode,\n\t\t\t\tthis.aggressionFactor\n\t\t\t);\n\t\t\tthis.path = this.navigationGrid.aStar(startNode, destinationNode);\n\t\t\tthis.pathRecaculationInterval = 60;\n\t\t\tif (this.path == null) {\n\t\t\t\tconsole.log(`Path is null`);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.currentNode = this.navigationGrid.getNodeFromTank(this);\n\t\t\tconst dx = this.path[0].x - this.currentNode.x;\n\t\t\tconst dy = this.path[0].y - this.currentNode.y;\n\n\t\t\tif (this.wasLastMoveBlocked && this.consecutiveDirectionMoves > 2) {\n\t\t\t\tconst randomDirection: Direction = this.getRandomDirection();\n\t\t\t\tthis.moveInCardinalDirection(randomDirection);\n\t\t\t\tthis.consecutiveDirectionMoves = 0;\n\t\t\t\tconst randomNumber: number = Math.random();\n\t\t\t\tif (dx === 1 && dy === 0) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tthis.moveSouthEast();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.moveNorthEast();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === -1 && dy === 0) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tthis.moveNorthWest();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.moveSouthWest();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === 0 && dy === 1) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tthis.moveSouthEast();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.moveSouthWest();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === 0 && dy === -1) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tthis.moveNorthWest();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.moveNorthEast();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === 1 && dy === 1) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tthis.moveSouth();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.moveEast();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === 1 && dy === -1) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tthis.moveNorth();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.moveEast();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === -1 && dy === 1) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tthis.moveSouth();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.moveWest();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === -1 && dy === -1) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tthis.moveNorth();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.moveWest();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (dx === 1 && dy === 0) {\n\t\t\t\t\tthis.moveEast();\n\t\t\t\t} else if (dx === -1 && dy === 0) {\n\t\t\t\t\tthis.moveWest();\n\t\t\t\t} else if (dx === 0 && dy === 1) {\n\t\t\t\t\tthis.moveSouth();\n\t\t\t\t} else if (dx === 0 && dy === -1) {\n\t\t\t\t\tthis.moveNorth();\n\t\t\t\t} else if (dx === 1 && dy === 1) {\n\t\t\t\t\tthis.moveSouthEast();\n\t\t\t\t} else if (dx === 1 && dy === -1) {\n\t\t\t\t\tthis.moveNorthEast();\n\t\t\t\t} else if (dx === -1 && dy === 1) {\n\t\t\t\t\tthis.moveSouthWest();\n\t\t\t\t} else if (dx === -1 && dy === -1) {\n\t\t\t\t\tthis.moveNorthWest();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.path[0].x == this.currentNode.x && this.path[0].y == this.currentNode.y) {\n\t\t\t\tthis.path.splice(0, 1);\n\t\t\t}\n\t\t}\n\n\t\tthis.xLeft = this.xPos;\n\t\tthis.xRight = this.xPos + this.size;\n\t\tthis.yTop = this.yPos;\n\t\tthis.yBottom = this.yPos + this.size;\n\t}\n\n\tpublic override plantBomb(playerTank: Tank): void {\n\t\tif (this.timeBetweenPlantsIsElapsed && !this.isDestroyed) {\n\t\t\tconst availableBombIndex = this.bombs.findIndex((bomb) => bomb.isDestroyed);\n\t\t\tif (availableBombIndex !== -1) {\n\t\t\t\tthis.bombs[availableBombIndex].xPos = this.xPos + this.size / 2;\n\t\t\t\tthis.bombs[availableBombIndex].yPos = this.yPos + this.size / 2;\n\t\t\t\tconst willHitPlayerTank: boolean = this.bombs[availableBombIndex].isPointInsideBlastRadius(\n\t\t\t\t\tplayerTank.xPos + playerTank.tankMidpoint,\n\t\t\t\t\tplayerTank.yPos + playerTank.tankMidpoint\n\t\t\t\t);\n\t\t\t\tif (willHitPlayerTank) {\n\t\t\t\t\tthis.bombs[availableBombIndex].isDestroyed = false;\n\t\t\t\t\tthis.bombs[availableBombIndex].setFuse();\n\t\t\t\t\tthis.timeBetweenPlantsIsElapsed = false;\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.timeBetweenPlantsIsElapsed = true;\n\t\t\t\t\t}, this.minTimeBetweenBombPlantsMS);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tpublic override shoot(playerTank: Tank): void {\n\t\tif (this.timeBetweenShotsIsElapsed && !this.isDestroyed) {\n\t\t\tconst availableAmmunitionIndex = this.ammunition.findIndex((ammunition) => ammunition.isDestroyed);\n\t\t\tif (availableAmmunitionIndex !== -1) {\n\t\t\t\tthis.ammunition[availableAmmunitionIndex].reload(\n\t\t\t\t\tthis.xPos + this.size / 2,\n\t\t\t\t\tthis.yPos + this.size / 2,\n\t\t\t\t\tthis.aimAngle,\n\t\t\t\t\ttrue,\n\t\t\t\t\tthis.canvasWidth,\n\t\t\t\t\tthis.canvasHeight\n\t\t\t\t);\n\t\t\t\tconst willHitPlayerTank: boolean = this.ammunition[availableAmmunitionIndex].willHitPlayerTank(\n\t\t\t\t\tthis.obstacleCanvas,\n\t\t\t\t\tplayerTank\n\t\t\t\t);\n\t\t\t\tif (willHitPlayerTank) {\n\t\t\t\t\tthis.ammunition[availableAmmunitionIndex].isDestroyed = false;\n\t\t\t\t\tthis.timeBetweenShotsIsElapsed = false;\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.timeBetweenShotsIsElapsed = true;\n\t\t\t\t\t}, this.minTimeBetweenShotsMS);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tpublic override aim(mouseXPos: number, mouseYpos: number, playerTank: Tank): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst dx: number = playerTank.xPos + playerTank.size / 2 - this.xPos - this.tankMidpoint;\n\t\tconst dy: number = playerTank.yPos + playerTank.size / 2 - this.yPos - this.tankMidpoint;\n\t\tlet theta = Math.atan2(dy, dx);\n\t\tif (theta < 0) {\n\t\t\ttheta += 2 * Math.PI;\n\t\t}\n\t\tthis.aimAngle = theta;\n\t}\n}\n","import { Ammunition, PlayerAmmunition } from '../Ammunition';\nimport { AudioFile, AudioManager } from '../AudioManager';\nimport { Bomb, PlayerBomb } from '../Bomb';\nimport { ObstacleCanvas } from '../ObstacleCanvas';\nimport { AdjustingCustomColorReticule, Reticule } from '../Reticule';\nimport { Tank } from './Tank';\n\nexport class PlayerTank extends Tank {\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\treticule: Reticule,\n\t\txPos: number,\n\t\tyPos: number,\n\t\tspeed: number,\n\t\tsize: number,\n\t\tcolor: string,\n\t\tobstacleCanvas: ObstacleCanvas,\n\t\tammunition: Ammunition[],\n\t\tbombs: Bomb[],\n\t\taudioManager: AudioManager\n\t) {\n\t\tsuper(canvas, reticule, xPos, yPos, speed, size, color, obstacleCanvas, ammunition, bombs, audioManager);\n\n\t\tdocument.addEventListener('keydown', (event: KeyboardEvent) => {\n\t\t\tif (this.keyStates.hasOwnProperty(event.key)) {\n\t\t\t\tthis.keyStates[event.key] = true;\n\t\t\t}\n\t\t});\n\n\t\tdocument.addEventListener('keydown', (event: KeyboardEvent) => {\n\t\t\tif (event.code === 'Space') {\n\t\t\t\tthis.plantBomb(this);\n\t\t\t}\n\t\t});\n\n\t\tdocument.addEventListener('keyup', (event: KeyboardEvent) => {\n\t\t\tif (this.keyStates.hasOwnProperty(event.key)) {\n\t\t\t\tthis.keyStates[event.key] = false;\n\t\t\t}\n\t\t});\n\n\t\tcanvas.addEventListener('mousemove', (event: MouseEvent) => {\n\t\t\tthis.aimXPos = event.clientX - this.xOffset;\n\t\t\tthis.aimYPos = event.clientY - this.yOffset;\n\t\t});\n\n\t\tcanvas.addEventListener('click', (event: MouseEvent) => {\n\t\t\tthis.shoot(this);\n\t\t});\n\t}\n\n\tpublic override aim(mouseXPos: number, mouseYpos: number, playerTank: Tank): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\t\tconst dx: number = mouseXPos - this.xPos - this.tankMidpoint;\n\t\tconst dy: number = mouseYpos - this.yPos - this.tankMidpoint;\n\t\tlet theta = Math.atan2(dy, dx);\n\t\tif (theta < 0) {\n\t\t\ttheta += 2 * Math.PI;\n\t\t}\n\t\tthis.aimAngle = theta;\n\t}\n\n\tpublic override shoot(playerTank: Tank): void {\n\t\tif (!this.isDestroyed) {\n\t\t\tconst availableAmmunitionIndex = this.ammunition.findIndex((ammunition) => ammunition.isDestroyed);\n\t\t\tif (availableAmmunitionIndex !== -1) {\n\t\t\t\tthis.audioManager.play(AudioFile.TANK_FIRE);\n\t\t\t\tthis.ammunition[availableAmmunitionIndex] = new PlayerAmmunition(\n\t\t\t\t\tthis.xPos + this.size / 2,\n\t\t\t\t\tthis.yPos + this.size / 2,\n\t\t\t\t\tthis.aimAngle,\n\t\t\t\t\tthis.canvasWidth,\n\t\t\t\t\tthis.canvasHeight,\n\t\t\t\t\tfalse,\n\t\t\t\t\tthis.audioManager\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n}\n\nexport class DefaultPlayerTank extends PlayerTank {\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\txPos: number,\n\t\tyPos: number,\n\t\tobstacleCanvas: ObstacleCanvas,\n\t\taudioManager: AudioManager\n\t) {\n\t\tconst defaultPlayerTankSpeed = 2;\n\t\tconst defaultPlayerTankSize = 30;\n\t\tconst defaultPlayerTankColor = '#6384a1';\n\t\tconst ammunition: Ammunition[] = [\n\t\t\tnew PlayerAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew PlayerAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew PlayerAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew PlayerAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew PlayerAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t];\n\t\tconst bombs: Bomb[] = [new PlayerBomb(0, 0, true, audioManager), new PlayerBomb(0, 0, true, audioManager)];\n\t\tsuper(\n\t\t\tcanvas,\n\t\t\tnew AdjustingCustomColorReticule(defaultPlayerTankSize, defaultPlayerTankColor, canvas.width),\n\t\t\txPos,\n\t\t\tyPos,\n\t\t\tdefaultPlayerTankSpeed,\n\t\t\tdefaultPlayerTankSize,\n\t\t\tdefaultPlayerTankColor,\n\t\t\tobstacleCanvas,\n\t\t\tammunition,\n\t\t\tbombs,\n\t\t\taudioManager\n\t\t);\n\t}\n}\n","import { Ammunition } from '../Ammunition';\nimport { AudioManager } from '../AudioManager';\nimport { Bomb } from '../Bomb';\nimport { NavigationGrid, Node } from '../NavigationGrid';\nimport { ObstacleCanvas } from '../ObstacleCanvas';\nimport { NoReticule } from '../Reticule';\nimport { EnemyTank } from './EnemyTank';\nimport { Direction, Tank } from './Tank';\n\nexport class SimpleMovingTank extends EnemyTank {\n\tpublic aimAngleChangeAmount = 0;\n\tpublic navigationGrid: NavigationGrid;\n\tpublic aggressionFactor = 15; // Distance tank should maintain from its target\n\tpublic currentNode: Node;\n\tpublic path: Node[] | null = [];\n\tpublic pathRecaculationInterval = 60;\n\tpublic drawNavigationGrid = false;\n\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\txPos: number,\n\t\tyPos: number,\n\t\tobstacleCanvas: ObstacleCanvas,\n\t\tammunition: Ammunition[],\n\t\tbombs: Bomb[],\n\t\tnavigationGrid: NavigationGrid,\n\t\taudioManager: AudioManager\n\t) {\n\t\tconst simpleMovingTankSpeed = 1.2;\n\t\tconst simpleMovingTankSize = 30;\n\t\tconst simpleMovingTankColor = '#fd8a8a';\n\t\tsuper(\n\t\t\tcanvas,\n\t\t\tnew NoReticule(),\n\t\t\txPos,\n\t\t\tyPos,\n\t\t\tsimpleMovingTankSpeed,\n\t\t\tsimpleMovingTankSize,\n\t\t\tsimpleMovingTankColor,\n\t\t\tobstacleCanvas,\n\t\t\tammunition,\n\t\t\tbombs,\n\t\t\taudioManager\n\t\t);\n\t\tthis.navigationGrid = navigationGrid;\n\t\tthis.currentNode = this.navigationGrid.getNodeFromTank(this);\n\t}\n\n\tpublic override draw(context: CanvasRenderingContext2D): void {\n\t\tif (this.drawNavigationGrid) {\n\t\t\tcontext.lineWidth = 1;\n\t\t\tfor (let i = 0; i <= this.navigationGrid.gridYLength; i++) {\n\t\t\t\tcontext.fillStyle = 'blue';\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.moveTo(0, i * this.navigationGrid.gridCellWidth);\n\t\t\t\tcontext.lineTo(\n\t\t\t\t\tthis.navigationGrid.gridXLength * this.navigationGrid.gridCellWidth,\n\t\t\t\t\ti * this.navigationGrid.gridCellWidth\n\t\t\t\t);\n\t\t\t\tcontext.stroke();\n\t\t\t}\n\t\t\tfor (let j = 0; j <= this.navigationGrid.gridXLength; j++) {\n\t\t\t\tcontext.fillStyle = 'blue';\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.moveTo(j * this.navigationGrid.gridCellWidth, 0);\n\t\t\t\tcontext.lineTo(\n\t\t\t\t\tj * this.navigationGrid.gridCellWidth,\n\t\t\t\t\tthis.navigationGrid.gridXLength * this.navigationGrid.gridCellWidth\n\t\t\t\t);\n\t\t\t\tcontext.stroke();\n\t\t\t}\n\t\t\tcontext.fillStyle = this.color;\n\t\t\tthis.path?.forEach((value: Node, index: number, array: Node[]) => {\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.arc(\n\t\t\t\t\tvalue.x * this.navigationGrid.gridCellWidth + this.navigationGrid.gridCellWidth / 2,\n\t\t\t\t\tvalue.y * this.navigationGrid.gridCellWidth + this.navigationGrid.gridCellWidth / 2,\n\t\t\t\t\t5,\n\t\t\t\t\t0,\n\t\t\t\t\t2 * Math.PI\n\t\t\t\t);\n\t\t\t\tcontext.fill();\n\t\t\t});\n\t\t}\n\t\tsuper.draw(context);\n\t}\n\n\tpublic override updatePosition(playerTank: Tank): void {\n\t\tthis.pathRecaculationInterval -= 1;\n\t\tif (this.path == null || this.path.length == 0 || this.pathRecaculationInterval == 0) {\n\t\t\tthis.navigationGrid.reset();\n\t\t\tconst startNode: Node = this.navigationGrid.getNodeFromTank(this);\n\t\t\tconst targetNode: Node = this.navigationGrid.getNodeFromTank(playerTank);\n\t\t\tconst destinationNode: Node = this.navigationGrid.getRandomNodeInRadiusOfTarget(\n\t\t\t\ttargetNode,\n\t\t\t\tthis.aggressionFactor\n\t\t\t);\n\t\t\tthis.path = this.navigationGrid.aStar(startNode, destinationNode);\n\t\t\tthis.pathRecaculationInterval = 60;\n\t\t\tif (this.path == null) {\n\t\t\t\tconsole.log(`Path is null`);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.currentNode = this.navigationGrid.getNodeFromTank(this);\n\t\t\tconst dx = this.path[0].x - this.currentNode.x;\n\t\t\tconst dy = this.path[0].y - this.currentNode.y;\n\n\t\t\tif (this.wasLastMoveBlocked && this.consecutiveDirectionMoves > 2) {\n\t\t\t\tconst randomDirection: Direction = this.getRandomDirection();\n\t\t\t\tthis.moveInCardinalDirection(randomDirection);\n\t\t\t\tthis.consecutiveDirectionMoves = 0;\n\t\t\t\tconst randomNumber: number = Math.random();\n\t\t\t\tif (dx === 1 && dy === 0) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tthis.moveSouthEast();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.moveNorthEast();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === -1 && dy === 0) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tthis.moveNorthWest();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.moveSouthWest();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === 0 && dy === 1) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tthis.moveSouthEast();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.moveSouthWest();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === 0 && dy === -1) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tthis.moveNorthWest();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.moveNorthEast();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === 1 && dy === 1) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tthis.moveSouth();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.moveEast();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === 1 && dy === -1) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tthis.moveNorth();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.moveEast();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === -1 && dy === 1) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tthis.moveSouth();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.moveWest();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === -1 && dy === -1) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tthis.moveNorth();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.moveWest();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (dx === 1 && dy === 0) {\n\t\t\t\t\tthis.moveEast();\n\t\t\t\t} else if (dx === -1 && dy === 0) {\n\t\t\t\t\tthis.moveWest();\n\t\t\t\t} else if (dx === 0 && dy === 1) {\n\t\t\t\t\tthis.moveSouth();\n\t\t\t\t} else if (dx === 0 && dy === -1) {\n\t\t\t\t\tthis.moveNorth();\n\t\t\t\t} else if (dx === 1 && dy === 1) {\n\t\t\t\t\tthis.moveSouthEast();\n\t\t\t\t} else if (dx === 1 && dy === -1) {\n\t\t\t\t\tthis.moveNorthEast();\n\t\t\t\t} else if (dx === -1 && dy === 1) {\n\t\t\t\t\tthis.moveSouthWest();\n\t\t\t\t} else if (dx === -1 && dy === -1) {\n\t\t\t\t\tthis.moveNorthWest();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.path[0].x == this.currentNode.x && this.path[0].y == this.currentNode.y) {\n\t\t\t\tthis.path.splice(0, 1);\n\t\t\t}\n\t\t}\n\n\t\tthis.xLeft = this.xPos;\n\t\tthis.xRight = this.xPos + this.size;\n\t\tthis.yTop = this.yPos;\n\t\tthis.yBottom = this.yPos + this.size;\n\t}\n\n\tpublic override shoot(playerTank: Tank): void {\n\t\tconst availableAmmunitionIndex = this.ammunition.findIndex((ammunition) => ammunition.isDestroyed);\n\t\tif (availableAmmunitionIndex !== -1) {\n\t\t\tthis.ammunition[availableAmmunitionIndex].reload(\n\t\t\t\tthis.xPos + this.size / 2,\n\t\t\t\tthis.yPos + this.size / 2,\n\t\t\t\tthis.aimAngle,\n\t\t\t\ttrue,\n\t\t\t\tthis.canvasWidth,\n\t\t\t\tthis.canvasHeight\n\t\t\t);\n\t\t\tconst willHitPlayerTank: boolean = this.ammunition[availableAmmunitionIndex].willHitPlayerTank(\n\t\t\t\tthis.obstacleCanvas,\n\t\t\t\tplayerTank\n\t\t\t);\n\t\t\tif (willHitPlayerTank) {\n\t\t\t\tthis.ammunition[availableAmmunitionIndex].isDestroyed = false;\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tpublic override aim(mouseXPos: number, mouseYpos: number, playerTank: Tank): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst dx: number = playerTank.xPos + playerTank.size / 2 - this.xPos - this.tankMidpoint;\n\t\tconst dy: number = playerTank.yPos + playerTank.size / 2 - this.yPos - this.tankMidpoint;\n\t\tlet theta = Math.atan2(dy, dx);\n\t\tif (theta < 0) {\n\t\t\ttheta += 2 * Math.PI;\n\t\t}\n\t\tthis.aimAngle = theta;\n\t}\n}\n","import { Ammunition } from '../Ammunition';\nimport { AudioManager } from '../AudioManager';\nimport { Bomb } from '../Bomb';\nimport { ObstacleCanvas } from '../ObstacleCanvas';\nimport { NoReticule } from '../Reticule';\nimport { EnemyTank } from './EnemyTank';\nimport { Tank } from './Tank';\n\nexport class StationaryRandomAimTank extends EnemyTank {\n\tpublic aimAngleChangeAmount = 0;\n\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\txPos: number,\n\t\tyPos: number,\n\t\tobstacleCanvas: ObstacleCanvas,\n\t\tammunition: Ammunition[],\n\t\taudioManager: AudioManager\n\t) {\n\t\tconst fastTankSpeed = 0;\n\t\tconst fastTankSize = 30;\n\t\tconst fastTankColor = '#ebe1b9';\n\t\tconst bombs: Bomb[] = [];\n\t\tsuper(\n\t\t\tcanvas,\n\t\t\tnew NoReticule(),\n\t\t\txPos,\n\t\t\tyPos,\n\t\t\tfastTankSpeed,\n\t\t\tfastTankSize,\n\t\t\tfastTankColor,\n\t\t\tobstacleCanvas,\n\t\t\tammunition,\n\t\t\tbombs,\n\t\t\taudioManager\n\t\t);\n\t}\n\n\tprivate getAngleChangeAmount(): number {\n\t\tconst max = 360;\n\t\tconst min = -360;\n\t\tconst randomAmount: number = Math.floor(Math.random() * (max - min + 1)) + min;\n\t\treturn randomAmount;\n\t}\n\n\tpublic override updatePosition(playerTank: Tank): void {\n\t\treturn;\n\t}\n\n\tpublic override shoot(playerTank: Tank): void {\n\t\tconst availableAmmunitionIndex = this.ammunition.findIndex((ammunition) => ammunition.isDestroyed);\n\t\tif (availableAmmunitionIndex !== -1) {\n\t\t\tthis.ammunition[availableAmmunitionIndex].reload(\n\t\t\t\tthis.xPos + this.size / 2,\n\t\t\t\tthis.yPos + this.size / 2,\n\t\t\t\tthis.aimAngle,\n\t\t\t\ttrue,\n\t\t\t\tthis.canvasWidth,\n\t\t\t\tthis.canvasHeight\n\t\t\t);\n\t\t\tconst willHitPlayerTank: boolean = this.ammunition[availableAmmunitionIndex].willHitPlayerTank(\n\t\t\t\tthis.obstacleCanvas,\n\t\t\t\tplayerTank\n\t\t\t);\n\t\t\tif (willHitPlayerTank) {\n\t\t\t\tthis.ammunition[availableAmmunitionIndex].isDestroyed = false;\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tpublic override aim(mouseXPos: number, mouseYpos: number, playerTank: Tank): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.aimAngleChangeAmount > 0) {\n\t\t\tthis.aimAngle += 0.01;\n\t\t\tthis.aimAngleChangeAmount -= 1;\n\t\t} else if (this.aimAngleChangeAmount < 0) {\n\t\t\tthis.aimAngle -= 0.01;\n\t\t\tthis.aimAngleChangeAmount += 1;\n\t\t} else {\n\t\t\tthis.aimAngleChangeAmount = this.getAngleChangeAmount();\n\t\t}\n\t}\n}\n","import { Ammunition, BasicAIAmmunition } from '../Ammunition';\nimport { AudioManager } from '../AudioManager';\nimport { Bomb } from '../Bomb';\nimport { ObstacleCanvas } from '../ObstacleCanvas';\nimport { NoReticule } from '../Reticule';\nimport { EnemyTank } from './EnemyTank';\nimport { Tank } from './Tank';\n\nexport class StationaryTank extends EnemyTank {\n\tminTimeBetweenShotsMS = 5000;\n\tcanTakeShot = true;\n\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\txPos: number,\n\t\tyPos: number,\n\t\tobstacleCanvas: ObstacleCanvas,\n\t\taudioManager: AudioManager\n\t) {\n\t\tconst fastTankSpeed = 0;\n\t\tconst fastTankSize = 30;\n\t\tconst fastTankColor = '#5784ba';\n\t\tconst ammunition: Ammunition[] = [new BasicAIAmmunition(0, 0, 0, 0, 0, true, audioManager)];\n\t\tconst bombs: Bomb[] = [];\n\t\tsuper(\n\t\t\tcanvas,\n\t\t\tnew NoReticule(),\n\t\t\txPos,\n\t\t\tyPos,\n\t\t\tfastTankSpeed,\n\t\t\tfastTankSize,\n\t\t\tfastTankColor,\n\t\t\tobstacleCanvas,\n\t\t\tammunition,\n\t\t\tbombs,\n\t\t\taudioManager\n\t\t);\n\t}\n\n\tpublic override updatePosition(playerTank: Tank): void {\n\t\treturn;\n\t}\n\n\tpublic override shoot(): void {\n\t\tif (!this.canTakeShot || this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\t\tconst availableAmmunitionIndex = this.ammunition.findIndex((ammunition) => ammunition.isDestroyed);\n\t\tif (availableAmmunitionIndex !== -1) {\n\t\t\tthis.ammunition[availableAmmunitionIndex] = new BasicAIAmmunition(\n\t\t\t\tthis.xPos + this.size / 2,\n\t\t\t\tthis.yPos + this.size / 2,\n\t\t\t\tthis.aimAngle,\n\t\t\t\tthis.canvasWidth,\n\t\t\t\tthis.canvasHeight,\n\t\t\t\tfalse,\n\t\t\t\tthis.audioManager\n\t\t\t);\n\t\t\tthis.canTakeShot = false;\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.canTakeShot = true;\n\t\t\t}, this.minTimeBetweenShotsMS);\n\t\t}\n\t\treturn;\n\t}\n\n\tpublic override aim(mouseXPos: number, mouseYpos: number, playerTank: Tank): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst dx: number = playerTank.xPos + playerTank.size / 2 - this.xPos - this.tankMidpoint;\n\t\tconst dy: number = playerTank.yPos + playerTank.size / 2 - this.yPos - this.tankMidpoint;\n\t\tlet theta = Math.atan2(dy, dx);\n\t\tif (theta < 0) {\n\t\t\ttheta += 2 * Math.PI;\n\t\t}\n\t\tthis.aimAngle = theta;\n\t}\n}\n","import { Ammunition } from '../Ammunition';\nimport { AudioManager } from '../AudioManager';\nimport { Bomb } from '../Bomb';\nimport { NavigationGrid, Node } from '../NavigationGrid';\nimport { ObstacleCanvas } from '../ObstacleCanvas';\nimport { NoReticule } from '../Reticule';\nimport { EnemyTank } from './EnemyTank';\nimport { Direction, Tank } from './Tank';\n\nexport class SuperBomberMovingTank extends EnemyTank {\n\tpublic aimAngleChangeAmount = 0;\n\tpublic navigationGrid: NavigationGrid;\n\tpublic aggressionFactor = 6; // Distance tank should maintain from its target\n\tpublic currentNode: Node;\n\tpublic path: Node[] | null = [];\n\tpublic pathRecaculationInterval = 60;\n\tpublic drawNavigationGrid = false;\n\n\tpublic minTimeBetweenShotsMS = 1000;\n\tpublic timeBetweenShotsIsElapsed = true;\n\tpublic minTimeBetweenBombPlantsMS = 1000;\n\tpublic timeBetweenPlantsIsElapsed = true;\n\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\txPos: number,\n\t\tyPos: number,\n\t\tobstacleCanvas: ObstacleCanvas,\n\t\tammunition: Ammunition[],\n\t\tbombs: Bomb[],\n\t\tnavigationGrid: NavigationGrid,\n\t\taudioManager: AudioManager\n\t) {\n\t\tconst simpleMovingTankSpeed = 2.2;\n\t\tconst simpleMovingTankSize = 30;\n\t\tconst simpleMovingTankColor = 'pink';\n\t\tsuper(\n\t\t\tcanvas,\n\t\t\tnew NoReticule(),\n\t\t\txPos,\n\t\t\tyPos,\n\t\t\tsimpleMovingTankSpeed,\n\t\t\tsimpleMovingTankSize,\n\t\t\tsimpleMovingTankColor,\n\t\t\tobstacleCanvas,\n\t\t\tammunition,\n\t\t\tbombs,\n\t\t\taudioManager\n\t\t);\n\t\tthis.navigationGrid = navigationGrid;\n\t\tthis.currentNode = this.navigationGrid.getNodeFromTank(this);\n\t}\n\n\tpublic override draw(context: CanvasRenderingContext2D): void {\n\t\tif (this.drawNavigationGrid) {\n\t\t\tcontext.lineWidth = 1;\n\t\t\tfor (let i = 0; i <= this.navigationGrid.gridYLength; i++) {\n\t\t\t\tcontext.fillStyle = 'blue';\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.moveTo(0, i * this.navigationGrid.gridCellWidth);\n\t\t\t\tcontext.lineTo(\n\t\t\t\t\tthis.navigationGrid.gridXLength * this.navigationGrid.gridCellWidth,\n\t\t\t\t\ti * this.navigationGrid.gridCellWidth\n\t\t\t\t);\n\t\t\t\tcontext.stroke();\n\t\t\t}\n\t\t\tfor (let j = 0; j <= this.navigationGrid.gridXLength; j++) {\n\t\t\t\tcontext.fillStyle = 'blue';\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.moveTo(j * this.navigationGrid.gridCellWidth, 0);\n\t\t\t\tcontext.lineTo(\n\t\t\t\t\tj * this.navigationGrid.gridCellWidth,\n\t\t\t\t\tthis.navigationGrid.gridXLength * this.navigationGrid.gridCellWidth\n\t\t\t\t);\n\t\t\t\tcontext.stroke();\n\t\t\t}\n\t\t\tcontext.fillStyle = this.color;\n\t\t\tthis.path?.forEach((value: Node, index: number, array: Node[]) => {\n\t\t\t\tcontext.beginPath();\n\t\t\t\tcontext.arc(\n\t\t\t\t\tvalue.x * this.navigationGrid.gridCellWidth + this.navigationGrid.gridCellWidth / 2,\n\t\t\t\t\tvalue.y * this.navigationGrid.gridCellWidth + this.navigationGrid.gridCellWidth / 2,\n\t\t\t\t\t5,\n\t\t\t\t\t0,\n\t\t\t\t\t2 * Math.PI\n\t\t\t\t);\n\t\t\t\tcontext.fill();\n\t\t\t});\n\t\t}\n\t\tsuper.draw(context);\n\t}\n\n\tpublic override updatePosition(playerTank: Tank): void {\n\t\tthis.pathRecaculationInterval -= 1;\n\t\tif (this.path == null || this.path.length == 0 || this.pathRecaculationInterval == 0) {\n\t\t\tthis.navigationGrid.reset();\n\t\t\tconst startNode: Node = this.navigationGrid.getNodeFromTank(this);\n\t\t\tconst targetNode: Node = this.navigationGrid.getNodeFromTank(playerTank);\n\t\t\tconst destinationNode: Node = this.navigationGrid.getRandomNodeInRadiusOfTarget(\n\t\t\t\ttargetNode,\n\t\t\t\tthis.aggressionFactor\n\t\t\t);\n\t\t\tthis.path = this.navigationGrid.aStar(startNode, destinationNode);\n\t\t\tthis.pathRecaculationInterval = 60;\n\t\t\tif (this.path == null) {\n\t\t\t\tconsole.log(`Path is null`);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.currentNode = this.navigationGrid.getNodeFromTank(this);\n\t\t\tconst dx = this.path[0].x - this.currentNode.x;\n\t\t\tconst dy = this.path[0].y - this.currentNode.y;\n\n\t\t\tif (this.wasLastMoveBlocked && this.consecutiveDirectionMoves > 2) {\n\t\t\t\tconst randomDirection: Direction = this.getRandomDirection();\n\t\t\t\tthis.moveInCardinalDirection(randomDirection);\n\t\t\t\tthis.consecutiveDirectionMoves = 0;\n\t\t\t\tconst randomNumber: number = Math.random();\n\t\t\t\tif (dx === 1 && dy === 0) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tthis.moveSouthEast();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.moveNorthEast();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === -1 && dy === 0) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tthis.moveNorthWest();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.moveSouthWest();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === 0 && dy === 1) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tthis.moveSouthEast();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.moveSouthWest();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === 0 && dy === -1) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tthis.moveNorthWest();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.moveNorthEast();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === 1 && dy === 1) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tthis.moveSouth();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.moveEast();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === 1 && dy === -1) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tthis.moveNorth();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.moveEast();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === -1 && dy === 1) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tthis.moveSouth();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.moveWest();\n\t\t\t\t\t}\n\t\t\t\t} else if (dx === -1 && dy === -1) {\n\t\t\t\t\tif (randomNumber < 0.5) {\n\t\t\t\t\t\tthis.moveNorth();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.moveWest();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (dx === 1 && dy === 0) {\n\t\t\t\t\tthis.moveEast();\n\t\t\t\t} else if (dx === -1 && dy === 0) {\n\t\t\t\t\tthis.moveWest();\n\t\t\t\t} else if (dx === 0 && dy === 1) {\n\t\t\t\t\tthis.moveSouth();\n\t\t\t\t} else if (dx === 0 && dy === -1) {\n\t\t\t\t\tthis.moveNorth();\n\t\t\t\t} else if (dx === 1 && dy === 1) {\n\t\t\t\t\tthis.moveSouthEast();\n\t\t\t\t} else if (dx === 1 && dy === -1) {\n\t\t\t\t\tthis.moveNorthEast();\n\t\t\t\t} else if (dx === -1 && dy === 1) {\n\t\t\t\t\tthis.moveSouthWest();\n\t\t\t\t} else if (dx === -1 && dy === -1) {\n\t\t\t\t\tthis.moveNorthWest();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.path[0].x == this.currentNode.x && this.path[0].y == this.currentNode.y) {\n\t\t\t\tthis.path.splice(0, 1);\n\t\t\t}\n\t\t}\n\n\t\tthis.xLeft = this.xPos;\n\t\tthis.xRight = this.xPos + this.size;\n\t\tthis.yTop = this.yPos;\n\t\tthis.yBottom = this.yPos + this.size;\n\t}\n\n\tpublic override plantBomb(playerTank: Tank): void {\n\t\tif (this.timeBetweenPlantsIsElapsed && !this.isDestroyed) {\n\t\t\tconst availableBombIndex = this.bombs.findIndex((bomb) => bomb.isDestroyed);\n\t\t\tif (availableBombIndex !== -1) {\n\t\t\t\tthis.bombs[availableBombIndex].xPos = this.xPos + this.size / 2;\n\t\t\t\tthis.bombs[availableBombIndex].yPos = this.yPos + this.size / 2;\n\t\t\t\tconst willHitPlayerTank: boolean = this.bombs[availableBombIndex].isPointInsideBlastRadius(\n\t\t\t\t\tplayerTank.xPos + playerTank.tankMidpoint,\n\t\t\t\t\tplayerTank.yPos + playerTank.tankMidpoint\n\t\t\t\t);\n\t\t\t\tif (willHitPlayerTank) {\n\t\t\t\t\tthis.bombs[availableBombIndex].isDestroyed = false;\n\t\t\t\t\tthis.bombs[availableBombIndex].setFuse();\n\t\t\t\t\tthis.timeBetweenPlantsIsElapsed = false;\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.timeBetweenPlantsIsElapsed = true;\n\t\t\t\t\t}, this.minTimeBetweenBombPlantsMS);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tpublic override shoot(playerTank: Tank): void {\n\t\tif (this.timeBetweenShotsIsElapsed && !this.isDestroyed) {\n\t\t\tconst availableAmmunitionIndex = this.ammunition.findIndex((ammunition) => ammunition.isDestroyed);\n\t\t\tif (availableAmmunitionIndex !== -1) {\n\t\t\t\tthis.ammunition[availableAmmunitionIndex].reload(\n\t\t\t\t\tthis.xPos + this.size / 2,\n\t\t\t\t\tthis.yPos + this.size / 2,\n\t\t\t\t\tthis.aimAngle,\n\t\t\t\t\ttrue,\n\t\t\t\t\tthis.canvasWidth,\n\t\t\t\t\tthis.canvasHeight\n\t\t\t\t);\n\t\t\t\tconst willHitPlayerTank: boolean = this.ammunition[availableAmmunitionIndex].willHitPlayerTank(\n\t\t\t\t\tthis.obstacleCanvas,\n\t\t\t\t\tplayerTank\n\t\t\t\t);\n\t\t\t\tif (willHitPlayerTank) {\n\t\t\t\t\tthis.ammunition[availableAmmunitionIndex].isDestroyed = false;\n\t\t\t\t\tthis.timeBetweenShotsIsElapsed = false;\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.timeBetweenShotsIsElapsed = true;\n\t\t\t\t\t}, this.minTimeBetweenShotsMS);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tpublic override aim(mouseXPos: number, mouseYpos: number, playerTank: Tank): void {\n\t\tif (this.isDestroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst dx: number = playerTank.xPos + playerTank.size / 2 - this.xPos - this.tankMidpoint;\n\t\tconst dy: number = playerTank.yPos + playerTank.size / 2 - this.yPos - this.tankMidpoint;\n\t\tlet theta = Math.atan2(dy, dx);\n\t\tif (theta < 0) {\n\t\t\ttheta += 2 * Math.PI;\n\t\t}\n\t\tthis.aimAngle = theta;\n\t}\n}\n","import { Ammunition, BasicAIAmmunition, SuperAIAmmunition } from './Ammunition';\nimport { AudioManager } from './AudioManager';\nimport { BasicBomb, Bomb } from './Bomb';\nimport { GameCanvas } from './GameCanvas';\nimport { NavigationGrid } from './NavigationGrid';\nimport { Obstacle } from './Obstacle';\nimport { ObstacleCanvas } from './ObstacleCanvas';\nimport { BomberTank } from './tanks/BomberTank';\nimport { DefaultPlayerTank } from './tanks/PlayerTank';\nimport { SimpleMovingTank } from './tanks/SimpleMovingTank';\nimport { StationaryRandomAimTank } from './tanks/StationaryRandomAimTank';\nimport { StationaryTank } from './tanks/StationaryTank';\nimport { SuperBomberMovingTank } from './tanks/SuperBomberMovingTank';\n\nexport class Level {\n\tpublic gameCanvas: GameCanvas;\n\tpublic obstacleCanvas: ObstacleCanvas;\n\tpublic canvasWidth = 1000;\n\tpublic canvasHeight = 500;\n\tpublic audioManager: AudioManager;\n\n\tconstructor(obstacleCanvas: ObstacleCanvas, audioManager: AudioManager) {\n\t\tthis.obstacleCanvas = obstacleCanvas;\n\t\tthis.gameCanvas = new GameCanvas('#game-canvas', this.canvasWidth, this.canvasHeight, obstacleCanvas);\n\t\tthis.audioManager = audioManager;\n\t}\n\n\tpublic stop() {\n\t\tthis.gameCanvas.stop();\n\t}\n\n\tpublic start() {\n\t\tthis.gameCanvas.start();\n\t}\n}\n\nexport class Level1 extends Level {\n\tconstructor(audioManager: AudioManager) {\n\t\tconst obs: Obstacle = new Obstacle(300, 200, 40, 100);\n\t\tconst obstacleCanvas = new ObstacleCanvas('#obstacle-canvas', 1000, 500, [obs]);\n\t\tsuper(obstacleCanvas, audioManager);\n\t\tconst stationaryTank = new StationaryTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t900,\n\t\t\t240,\n\t\t\tobstacleCanvas,\n\t\t\taudioManager\n\t\t);\n\t\tthis.gameCanvas.addEnemyTank(stationaryTank);\n\n\t\tconst playerTank = new DefaultPlayerTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t100,\n\t\t\t250,\n\t\t\tobstacleCanvas,\n\t\t\taudioManager\n\t\t);\n\t\tthis.gameCanvas.addPlayerTank(playerTank);\n\t}\n}\n\nexport class Level2 extends Level {\n\tconstructor(audioManager: AudioManager) {\n\t\tconst obs: Obstacle = new Obstacle(300, 200, 40, 100);\n\t\tconst obstacleCanvas = new ObstacleCanvas('#obstacle-canvas', 1000, 500, [obs]);\n\t\tsuper(obstacleCanvas, audioManager);\n\n\t\tconst stationaryTank1 = new StationaryTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t800,\n\t\t\t100,\n\t\t\tobstacleCanvas,\n\t\t\taudioManager\n\t\t);\n\t\tconst stationaryTank2 = new StationaryTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t900,\n\t\t\t240,\n\t\t\tobstacleCanvas,\n\t\t\taudioManager\n\t\t);\n\t\tconst stationaryTank3 = new StationaryTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t800,\n\t\t\t400,\n\t\t\tobstacleCanvas,\n\t\t\taudioManager\n\t\t);\n\t\tthis.gameCanvas.addEnemyTank(stationaryTank1);\n\t\tthis.gameCanvas.addEnemyTank(stationaryTank2);\n\t\tthis.gameCanvas.addEnemyTank(stationaryTank3);\n\n\t\tconst playerTank = new DefaultPlayerTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t100,\n\t\t\t250,\n\t\t\tobstacleCanvas,\n\t\t\taudioManager\n\t\t);\n\t\tthis.gameCanvas.addPlayerTank(playerTank);\n\t}\n}\n\nexport class Level3 extends Level {\n\tconstructor(audioManager: AudioManager) {\n\t\tconst obs: Obstacle = new Obstacle(100, 100, 200, 100);\n\t\tconst obs2: Obstacle = new Obstacle(550, 200, 30, 200);\n\t\tconst obstacleCanvas = new ObstacleCanvas('#obstacle-canvas', 1000, 500, [obs, obs2]);\n\t\tsuper(obstacleCanvas, audioManager);\n\t\tconst superAmmo: Ammunition[] = [new SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager)];\n\t\tconst aiTank = new StationaryRandomAimTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t800,\n\t\t\t300,\n\t\t\tobstacleCanvas,\n\t\t\tsuperAmmo,\n\t\t\taudioManager\n\t\t);\n\t\tthis.gameCanvas.addEnemyTank(aiTank);\n\n\t\tconst playerTank = new DefaultPlayerTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t200,\n\t\t\t250,\n\t\t\tobstacleCanvas,\n\t\t\taudioManager\n\t\t);\n\t\tthis.gameCanvas.addPlayerTank(playerTank);\n\t}\n}\n\nexport class Level4 extends Level {\n\tconstructor(audioManager: AudioManager) {\n\t\tconst obs: Obstacle = new Obstacle(250, 100, 600, 40);\n\t\tconst obs2: Obstacle = new Obstacle(100, 350, 600, 40);\n\t\tconst obstacleCanvas = new ObstacleCanvas('#obstacle-canvas', 1000, 500, [obs, obs2]);\n\t\tsuper(obstacleCanvas, audioManager);\n\t\tconst basicAmmo: Ammunition[] = [new BasicAIAmmunition(0, 0, 0, 0, 0, true, audioManager)];\n\t\tconst basicBomb: Bomb[] = [];\n\t\tconst navigationGrid: NavigationGrid = new NavigationGrid(this.gameCanvas, this.obstacleCanvas);\n\t\tconst aiTank = new SimpleMovingTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t900,\n\t\t\t50,\n\t\t\tobstacleCanvas,\n\t\t\tbasicAmmo,\n\t\t\tbasicBomb,\n\t\t\tnavigationGrid,\n\t\t\taudioManager\n\t\t);\n\t\tthis.gameCanvas.addEnemyTank(aiTank);\n\n\t\tconst playerTank = new DefaultPlayerTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t50,\n\t\t\t450,\n\t\t\tobstacleCanvas,\n\t\t\taudioManager\n\t\t);\n\t\tthis.gameCanvas.addPlayerTank(playerTank);\n\t}\n}\n\nexport class Level5 extends Level {\n\tconstructor(audioManager: AudioManager) {\n\t\tconst obs: Obstacle = new Obstacle(100, 100, 200, 100);\n\t\tconst obs2: Obstacle = new Obstacle(700, 100, 30, 100);\n\t\tconst obs3: Obstacle = new Obstacle(700, 350, 30, 100);\n\t\tconst obstacleCanvas = new ObstacleCanvas('#obstacle-canvas', 1000, 500, [obs, obs2, obs3]);\n\t\tsuper(obstacleCanvas, audioManager);\n\t\tconst basicAmmo: Ammunition[] = [new BasicAIAmmunition(0, 0, 0, 0, 0, true, audioManager)];\n\t\tconst superAmmo: Ammunition[] = [new SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager)];\n\t\tconst basicBomb: Bomb[] = [];\n\t\tconst navigationGrid: NavigationGrid = new NavigationGrid(this.gameCanvas, this.obstacleCanvas);\n\t\tconst aiTank3 = new SimpleMovingTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t800,\n\t\t\t300,\n\t\t\tobstacleCanvas,\n\t\t\tbasicAmmo,\n\t\t\tbasicBomb,\n\t\t\tnavigationGrid,\n\t\t\taudioManager\n\t\t);\n\t\tconst aiTank = new StationaryRandomAimTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t800,\n\t\t\t100,\n\t\t\tobstacleCanvas,\n\t\t\tsuperAmmo,\n\t\t\taudioManager\n\t\t);\n\t\tconst aiTank2 = new StationaryTank(this.gameCanvas.gameRenderer.canvas, 800, 200, obstacleCanvas, audioManager);\n\t\tthis.gameCanvas.addEnemyTank(aiTank3);\n\t\tthis.gameCanvas.addEnemyTank(aiTank);\n\t\tthis.gameCanvas.addEnemyTank(aiTank2);\n\n\t\tconst playerTank = new DefaultPlayerTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t200,\n\t\t\t250,\n\t\t\tobstacleCanvas,\n\t\t\taudioManager\n\t\t);\n\t\tthis.gameCanvas.addPlayerTank(playerTank);\n\t}\n}\n\nexport class Level6 extends Level {\n\tconstructor(audioManager: AudioManager) {\n\t\tconst obs: Obstacle = new Obstacle(100, 100, 200, 100);\n\t\tconst obs2: Obstacle = new Obstacle(700, 100, 30, 300);\n\t\tconst obstacleCanvas = new ObstacleCanvas('#obstacle-canvas', 1000, 500, [obs, obs2]);\n\t\tsuper(obstacleCanvas, audioManager);\n\n\t\tconst basicBombs: Bomb[] = [\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t];\n\t\tconst basicBombs2: Bomb[] = [\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t];\n\t\tconst basicBombs3: Bomb[] = [\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t];\n\n\t\tconst navigationGrid: NavigationGrid = new NavigationGrid(this.gameCanvas, this.obstacleCanvas);\n\t\tconst aiTank = new BomberTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t800,\n\t\t\t100,\n\t\t\tobstacleCanvas,\n\t\t\t[new BasicAIAmmunition(0, 0, 0, 0, 0, true, audioManager)],\n\t\t\tbasicBombs,\n\t\t\tnavigationGrid,\n\t\t\taudioManager\n\t\t);\n\t\tconst aiTank2 = new BomberTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t800,\n\t\t\t200,\n\t\t\tobstacleCanvas,\n\t\t\t[new BasicAIAmmunition(0, 0, 0, 0, 0, true, audioManager)],\n\t\t\tbasicBombs2,\n\t\t\tnavigationGrid,\n\t\t\taudioManager\n\t\t);\n\t\tconst aiTank3 = new BomberTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t800,\n\t\t\t300,\n\t\t\tobstacleCanvas,\n\t\t\t[new BasicAIAmmunition(0, 0, 0, 0, 0, true, audioManager)],\n\t\t\tbasicBombs3,\n\t\t\tnavigationGrid,\n\t\t\taudioManager\n\t\t);\n\n\t\tthis.gameCanvas.addEnemyTank(aiTank);\n\t\tthis.gameCanvas.addEnemyTank(aiTank2);\n\t\tthis.gameCanvas.addEnemyTank(aiTank3);\n\n\t\tconst playerTank = new DefaultPlayerTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t200,\n\t\t\t250,\n\t\t\tobstacleCanvas,\n\t\t\taudioManager\n\t\t);\n\t\tthis.gameCanvas.addPlayerTank(playerTank);\n\t}\n}\n\nexport class Level7 extends Level {\n\tconstructor(audioManager: AudioManager) {\n\t\tconst obs: Obstacle = new Obstacle(700, 100, 30, 300);\n\t\tconst obstacleCanvas = new ObstacleCanvas('#obstacle-canvas', 1000, 500, [obs]);\n\t\tsuper(obstacleCanvas, audioManager);\n\t\tconst basicAmmo: Ammunition[] = [\n\t\t\tnew SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t];\n\t\tconst basicAmmo2: Ammunition[] = [\n\t\t\tnew SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t];\n\t\tconst basicAmmo3: Ammunition[] = [\n\t\t\tnew SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t\tnew SuperAIAmmunition(0, 0, 0, 0, 0, true, audioManager),\n\t\t];\n\n\t\tconst basicBombs: Bomb[] = [\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t];\n\t\tconst basicBombs2: Bomb[] = [\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t];\n\t\tconst basicBombs3: Bomb[] = [\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t\tnew BasicBomb(0, 0, true, audioManager),\n\t\t];\n\n\t\tconst navigationGrid: NavigationGrid = new NavigationGrid(this.gameCanvas, this.obstacleCanvas);\n\t\tconst aiTank = new SuperBomberMovingTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t800,\n\t\t\t100,\n\t\t\tobstacleCanvas,\n\t\t\tbasicAmmo,\n\t\t\tbasicBombs,\n\t\t\tnavigationGrid,\n\t\t\taudioManager\n\t\t);\n\t\tconst aiTank2 = new SuperBomberMovingTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t800,\n\t\t\t200,\n\t\t\tobstacleCanvas,\n\t\t\tbasicAmmo2,\n\t\t\tbasicBombs2,\n\t\t\tnavigationGrid,\n\t\t\taudioManager\n\t\t);\n\t\tconst aiTank3 = new SuperBomberMovingTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t800,\n\t\t\t300,\n\t\t\tobstacleCanvas,\n\t\t\tbasicAmmo3,\n\t\t\tbasicBombs3,\n\t\t\tnavigationGrid,\n\t\t\taudioManager\n\t\t);\n\n\t\tthis.gameCanvas.addEnemyTank(aiTank);\n\t\tthis.gameCanvas.addEnemyTank(aiTank2);\n\t\tthis.gameCanvas.addEnemyTank(aiTank3);\n\n\t\tconst playerTank = new DefaultPlayerTank(\n\t\t\tthis.gameCanvas.gameRenderer.canvas,\n\t\t\t200,\n\t\t\t250,\n\t\t\tobstacleCanvas,\n\t\t\taudioManager\n\t\t);\n\t\tthis.gameCanvas.addPlayerTank(playerTank);\n\t}\n}\n","import '../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport '../node_modules/bootstrap/dist/js/bootstrap.min.js';\nimport './assets/computer.ico';\nimport './css/style.css';\n\nimport { LevelSelector } from './ui/LevelSelector';\n\nconst levelSelector: LevelSelector = new LevelSelector(7);\n\nlevelSelector.startActiveLevel();\n","import * as d3 from 'd3';\nimport packageJson from '../../package.json';\nimport { AudioManager } from '../game/AudioManager';\nimport { Level, Level1, Level2, Level3, Level4, Level5, Level6, Level7 } from '../game/Level';\n\nexport class LevelSelector {\n\tprivate levels: number;\n\tprivate activeLevelNumber: number;\n\tprivate activeLevel: Level;\n\tprivate sliderWidth: number = Math.min(window.innerWidth * 0.8, 600); // Responsive width\n\tprivate audioManager: AudioManager;\n\n\tconstructor(levels: number) {\n\t\tthis.levels = levels;\n\t\tthis.audioManager = new AudioManager();\n\t\tconst audioPromise: Promise<void[]> = this.audioManager.loadAllAudio();\n\t\taudioPromise.then((): void => {\n\t\t\tthis.audioManager.playBackgroundMusic();\n\t\t});\n\t\tthis.activeLevelNumber = 1;\n\t\tthis.activeLevel = new Level1(this.audioManager);\n\t\tthis.setHeader();\n\t\tthis.createSlider();\n\t\tthis.createJumbotron();\n\t}\n\n\tpublic setHeader() {\n\t\tconst header: HTMLElement | null = document.getElementById('main-header');\n\t\tif (header) {\n\t\t\theader.textContent = `Treads V${packageJson.version}`;\n\t\t}\n\t}\n\n\tpublic startActiveLevel() {\n\t\tthis.activeLevel.stop();\n\t\tswitch (this.activeLevelNumber) {\n\t\t\tcase 1:\n\t\t\t\tthis.activeLevel = new Level1(this.audioManager);\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tthis.activeLevel = new Level2(this.audioManager);\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tthis.activeLevel = new Level3(this.audioManager);\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tthis.activeLevel = new Level4(this.audioManager);\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tthis.activeLevel = new Level5(this.audioManager);\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\tthis.activeLevel = new Level6(this.audioManager);\n\t\t\t\tbreak;\n\t\t\tcase 7:\n\t\t\t\tthis.activeLevel = new Level7(this.audioManager);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.activeLevel = new Level1(this.audioManager);\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.activeLevel.start();\n\t}\n\n\tprivate createSlider(): void {\n\t\tconst margin: { top: number; right: number; bottom: number; left: number } = {\n\t\t\ttop: 10,\n\t\t\tright: 10,\n\t\t\tbottom: 20,\n\t\t\tleft: 10,\n\t\t};\n\t\tconst effectiveWidth: number = this.sliderWidth - margin.left - margin.right;\n\n\t\tconst scale: d3.ScaleLinear<number, number, never> = d3\n\t\t\t.scaleLinear()\n\t\t\t.domain([1, this.levels])\n\t\t\t.range([0, effectiveWidth])\n\t\t\t.clamp(true);\n\n\t\tconst svg: d3.Selection<SVGSVGElement, unknown, HTMLElement, any> = d3\n\t\t\t.select('#slider')\n\t\t\t.append('svg')\n\t\t\t.attr('width', this.sliderWidth)\n\t\t\t.attr('height', 50);\n\n\t\tconst sliderGroup: d3.Selection<SVGGElement, unknown, HTMLElement, any> = svg\n\t\t\t.append('g')\n\t\t\t.attr('transform', `translate(${margin.left}, 30)`);\n\n\t\tsliderGroup.append('g').call(d3.axisBottom(scale).ticks(this.levels).tickFormat(d3.format('1')));\n\n\t\tconst handle: d3.Selection<SVGCircleElement, unknown, HTMLElement, any> = sliderGroup\n\t\t\t.append('circle')\n\t\t\t.attr('cx', scale(this.activeLevelNumber))\n\t\t\t.attr('cy', -10)\n\t\t\t.attr('r', 10)\n\t\t\t.style('fill', 'red')\n\t\t\t.style('cursor', 'ew-resize');\n\t\tconst dragHandler: d3.DragBehavior<SVGCircleElement, unknown, unknown> = d3\n\t\t\t.drag<SVGCircleElement, unknown>()\n\t\t\t.on('drag', (event) => {\n\t\t\t\tconst x = event.x - margin.left; // Adjusting for the left margin\n\t\t\t\tconst level = Math.round(scale.invert(x));\n\t\t\t\thandle.attr('cx', scale(level));\n\t\t\t\tthis.updateActiveLevel(level);\n\t\t\t});\n\n\t\thandle.call(dragHandler);\n\t}\n\n\tprivate createJumbotron(): void {\n\t\tconst jumbotron: d3.Selection<d3.BaseType, unknown, HTMLElement, any> = d3.select('#jumbotron');\n\t\tfor (let i = 1; i <= this.levels; i++) {\n\t\t\tconst box: d3.Selection<HTMLDivElement, unknown, HTMLElement, any> = jumbotron\n\t\t\t\t.append('div')\n\t\t\t\t.attr('class', 'jumbotron-box inactive')\n\t\t\t\t.on('click', () => this.updateActiveLevel(i));\n\n\t\t\t// Example of how you can append an SVG to a jumbotron box.\n\t\t\tconst svg: d3.Selection<SVGSVGElement, unknown, HTMLElement, any> = box\n\t\t\t\t.append('svg')\n\t\t\t\t.attr('width', '100%')\n\t\t\t\t.attr('height', '100%');\n\n\t\t\tsvg\n\t\t\t\t.append('rect') // Placeholder for actual SVG content.\n\t\t\t\t.attr('width', '100%')\n\t\t\t\t.attr('height', '100%')\n\t\t\t\t.attr('fill', 'transparent');\n\t\t\tsvg\n\t\t\t\t.append('text')\n\t\t\t\t.attr('x', '50%')\n\t\t\t\t.attr('y', '50%')\n\t\t\t\t.attr('dominant-baseline', 'middle')\n\t\t\t\t.attr('text-anchor', 'middle')\n\t\t\t\t.text(`Level ${i}`);\n\t\t}\n\n\t\tthis.updateActiveLevel(this.activeLevelNumber);\n\t}\n\n\tprivate updateActiveLevel(level: number): void {\n\t\tthis.activeLevelNumber = level;\n\t\td3.selectAll('.jumbotron-box')\n\t\t\t.classed('active', (_, i) => i + 1 === level)\n\t\t\t.classed('inactive', (_, i) => i + 1 !== level);\n\t\td3.select('circle').attr(\n\t\t\t'cx',\n\t\t\td3\n\t\t\t\t.scaleLinear()\n\t\t\t\t.domain([1, this.levels])\n\t\t\t\t.range([0, this.sliderWidth - 20])(level)\n\t\t);\n\t\tthis.startActiveLevel();\n\t}\n}\n"],"names":["AudioFile","Direction","this","audioContext","window","AudioContext","webkitAudioContext","audioBuffers","Map","backgroundMusicSource","loadAllAudio","promises","loadAudio","TANK_FIRE","TANK_DESTROY","BOMB_EXPLODE","BACKGROUND_MUSIC","Promise","all","audioFile","url","fetch","then","response","arrayBuffer","decodeAudioData","audioBuffer","set","catch","error","console","play","buffer","get","source","createBufferSource","connect","destination","start","warn","getAudioContext","playBackgroundMusic","stopBackgroundMusic","loop","stop","disconnect","startX","startY","theta","speed","maxBounces","canvasWidth","canvasHeight","isDestroyed","audioManager","xPos","yPos","xVelocity","Math","cos","yVelocity","sin","bounces","updatePosition","obstacleCanvas","obstacles","forEach","obstacle","xLeft","xRight","yTop","yBottom","fromLeft","abs","fromRight","fromTop","fromBottom","minDistance","min","checkEnemyHit","enemyTanks","enemyTank","log","checkPlayerHit","playerTank","reload","draw","context","beginPath","arc","PI","fillStyle","fill","lineWidth","strokeStyle","stroke","closePath","willHitPlayerTank","predictedXPosition","predictedYPosition","predictedXVelocity","predictedYVelocity","predictedBounces","Ammunition","x","y","radius","color","velocityX","velocityY","life","fragmentRadius","fragmentColor","blastRadius","update","blastDelayMS","fuseStartTime","shouldFlashRed","isExploding","fragments","isPointInsideBlastRadius","tankMidpoint","setFuse","performance","now","animateFuse","setTimeout","createFragments","elapsedTime","fractionElapsed","some","threshold","requestAnimationFrame","dx","dy","sqrt","i","angle","random","fragment","BombFragment","push","drawExplosion","particle","filter","Bomb","canvas","playerWin","enemyWin","getContext","Error","initializeCanvas","width","height","renderLevelOverScreen","message","font","textWidth","measureText","fontSize","clearRect","strokeText","fillText","render","progress","every","tank","aim","aimXPos","aimYPos","shoot","plantBomb","reticule","ammunition","bombs","bomb","canvasSelector","animationFrameID","gameRenderer","GameRenderer","document","querySelector","lastRenderTime","addEventListener","resizeCanvas","bind","gameLoop","cancelAnimationFrame","timeStamp","clearObstacles","addEnemyTank","addPlayerTank","g","h","f","walkable","parent","gameCanvas","grid","gridCellWidth","path","gridXLength","floor","gridYLength","Node","gridXLeft","gridXRight","gridYTop","gridYBottom","obs","reset","getNodeFromTank","xGridCoordinate","size","yGridCoordinate","max","getRandomNodeInRadiusOfTarget","target","candidateNodes","node","distance","pow","length","aStar","openSet","closedSet","Set","current","sort","a","b","unshift","splice","indexOf","add","getWalkableNeighbors","neighbor","has","tentativeG","SQRT2","includes","round","neighbors","rect","obstacleCanvasSelector","dashPattern","renderReticule","tankSize","reticuleWidth","tankXPos","tankYPos","mouseXPos","mouseYpos","setLineDash","moveTo","lineTo","Reticule","maxReticuleLength","tankXPosition","tankYPosition","mouseXPosition","mouseYPosition","xDist","yDist","distanceToMaxDistanceRatio","dashLength","spaceLength","xLength","gunBarrellWidth","twoPi","lastDirectionMoved","UNKNOWN","wasLastMoveBlocked","consecutiveDirectionMoves","keyStates","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","w","s","d","W","A","S","D","maxAmmunition","maxBombs","aimAngle","canvasRect","getBoundingClientRect","xOffset","left","yOffset","top","fillRect","lineJoin","strokeRect","endX","endY","up","right","moveNorthEast","moveNorthWest","down","moveSouthEast","moveSouthWest","moveNorth","moveSouth","moveWest","moveEast","atan2","availableBombIndex","findIndex","moveInLastDirectionMoved","moveInCardinalDirection","getRandomDirection","enumValues","Object","keys","map","n","Number","parseInt","isNaN","direction","NORTH","SOUTH","EAST","WEST","NORTHEAST","NORTHWEST","SOUTHEAST","SOUTHWEST","values","value","randomIndex","blocked","blockedNorth","blockedEast","blockedWest","blockedSouth","Tank","navigationGrid","NoReticule","aimAngleChangeAmount","aggressionFactor","pathRecaculationInterval","drawNavigationGrid","minTimeBetweenShotsMS","timeBetweenShotsIsElapsed","minTimeBetweenBombPlantsMS","timeBetweenPlantsIsElapsed","currentNode","j","index","array","startNode","targetNode","destinationNode","randomDirection","randomNumber","availableAmmunitionIndex","EnemyTank","defaultPlayerTankColor","PlayerAmmunition","PlayerBomb","AdjustingCustomColorReticule","event","hasOwnProperty","key","code","clientX","clientY","getAngleChangeAmount","BasicAIAmmunition","canTakeShot","GameCanvas","Obstacle","ObstacleCanvas","stationaryTank","StationaryTank","DefaultPlayerTank","Level","stationaryTank1","stationaryTank2","stationaryTank3","obs2","superAmmo","SuperAIAmmunition","aiTank","StationaryRandomAimTank","basicAmmo","NavigationGrid","SimpleMovingTank","obs3","aiTank3","aiTank2","basicBombs","BasicBomb","basicBombs2","basicBombs3","BomberTank","basicAmmo2","basicAmmo3","SuperBomberMovingTank","levels","sliderWidth","innerWidth","AudioManager","activeLevelNumber","activeLevel","Level1","setHeader","createSlider","createJumbotron","header","getElementById","textContent","startActiveLevel","Level2","Level3","Level4","Level5","Level6","Level7","margin","effectiveWidth","scale","domain","range","clamp","sliderGroup","append","attr","call","ticks","tickFormat","handle","style","dragHandler","on","level","invert","updateActiveLevel","jumbotron","svg","text","classed","_"],"sourceRoot":""}