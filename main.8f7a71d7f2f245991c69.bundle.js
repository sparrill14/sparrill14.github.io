"use strict";(self.webpackChunktreads=self.webpackChunktreads||[]).push([[792],{144:(t,i,e)=>{e(836);var n=e(180);const s="1.4.6",o=e.p+"8c0fb26f73ba98ca3df0.mp3",a=e.p+"0686824ec093b500e317.mp3",r=e.p+"b522d2830ca0e8728583.mp3",h=e.p+"3020ab3b4a3ad7a2f87e.mp3";var c;!function(t){t[t.TANK_FIRE=1]="TANK_FIRE",t[t.TANK_DESTROY=2]="TANK_DESTROY",t[t.BOMB_EXPLODE=3]="BOMB_EXPLODE",t[t.BACKGROUND_MUSIC=4]="BACKGROUND_MUSIC"}(c||(c={}));var u,l,d=function(){function t(){this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.audioBuffers=new Map,this.backgroundMusicSource=null}return t.prototype.loadAllAudio=function(){var t=[this.loadAudio(c.TANK_FIRE,h),this.loadAudio(c.TANK_DESTROY,r),this.loadAudio(c.BOMB_EXPLODE,a),this.loadAudio(c.BACKGROUND_MUSIC,o)];return Promise.all(t)},t.prototype.loadAudio=function(t,i){var e=this;return fetch(i).then((function(t){return t.arrayBuffer()})).then((function(t){return e.audioContext.decodeAudioData(t)})).then((function(i){e.audioBuffers.set(t,i)})).catch((function(t){return console.error("Error loading audio file: ".concat(i),t)}))},t.prototype.play=function(t){var i=this.audioBuffers.get(t);if(i){var e=this.audioContext.createBufferSource();e.buffer=i,e.connect(this.audioContext.destination),e.start(0)}else console.warn("Audio buffer for ".concat(t," not found"))},t.prototype.getAudioContext=function(){return this.audioContext},t.prototype.playBackgroundMusic=function(){var t=this.audioBuffers.get(c.BACKGROUND_MUSIC);t?(this.stopBackgroundMusic(),this.backgroundMusicSource=this.audioContext.createBufferSource(),this.backgroundMusicSource.buffer=t,this.backgroundMusicSource.loop=!0,this.backgroundMusicSource.connect(this.audioContext.destination),this.backgroundMusicSource.start(0)):console.warn("Background music buffer not found")},t.prototype.stopBackgroundMusic=function(){this.backgroundMusicSource&&(this.backgroundMusicSource.stop(0),this.backgroundMusicSource.disconnect(),this.backgroundMusicSource=null)},t}(),p=(u=function(t,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},u(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}u(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),f=function(){function t(t,i,e,n,s,o,a,r,h){this.radius=4,this.xPosition=t,this.yPosition=i,this.theta=e,this.speed=n,this.xVelocity=Math.cos(this.theta)*this.speed,this.yVelocity=Math.sin(this.theta)*this.speed,this.bounces=0,this.maxBounces=s,this.canvasWidth=o,this.canvasHeight=a,this.isDestroyed=r,this.audioManager=h}return t.prototype.updatePosition=function(t){var i=this;this.xPosition+=this.xVelocity,this.yPosition+=this.yVelocity,(this.xPosition<=0||this.xPosition>this.canvasWidth)&&(this.xVelocity=-this.xVelocity,this.bounces++),(this.yPosition<=0||this.yPosition>this.canvasHeight)&&(this.yVelocity=-this.yVelocity,this.bounces++),t.obstacles.forEach((function(t){if(i.xPosition>t.xLeft&&i.xPosition<t.xRight&&i.yPosition>t.yTop&&i.yPosition<t.yBottom){i.bounces++;var e=Math.abs(i.xPosition-t.xLeft),n=Math.abs(i.xPosition-t.xRight),s=Math.abs(i.yPosition-t.yTop),o=Math.abs(i.yPosition-t.yBottom),a=Math.min(e,n,s,o);a===s?(i.yPosition=t.yTop-1,i.yVelocity=-i.yVelocity):a===o?(i.yPosition=t.yBottom+1,i.yVelocity=-i.yVelocity):a===e?(i.xPosition=t.xLeft-1,i.xVelocity=-i.xVelocity):a===n&&(i.xPosition=t.xRight+1,i.xVelocity=-i.xVelocity)}})),this.bounces>this.maxBounces&&(this.isDestroyed=!0)},t.prototype.checkEnemyHit=function(t){var i=this;t.forEach((function(t){t.isDestroyed||i.xPosition>t.xLeft&&i.xPosition<t.xRight&&i.yPosition>t.yTop&&i.yPosition<t.yBottom&&(i.isDestroyed=!0,t.destroy(),i.audioManager.play(c.TANK_DESTROY),console.log("Enemy hit!!!"))}))},t.prototype.checkPlayerHit=function(t){t.isDestroyed||this.xPosition>t.xLeft&&this.xPosition<t.xRight&&this.yPosition>t.yTop&&this.yPosition<t.yBottom&&(t.destroy(),this.isDestroyed=!0,console.log("Player Hit!!!"))},t.prototype.checkAmmunitionCollision=function(t){for(var i=0,e=t;i<e.length;i++){var n=e[i];if(n!==this&&!n.isDestroyed){var s=this.xPosition-n.xPosition,o=this.yPosition-n.yPosition;Math.sqrt(s*s+o*o)<this.radius+n.radius&&(this.isDestroyed=!0,n.isDestroyed=!0)}}},t.prototype.checkBombCollision=function(t){for(var i=0,e=t;i<e.length;i++){var n=e[i];if(!n.isDestroyed){var s=this.xPosition-n.xPosition,o=this.yPosition-n.yPosition;Math.sqrt(s*s+o*o)<this.radius+n.radius&&(this.isDestroyed=!0,n.destroy())}}},t.prototype.reload=function(t,i,e,n,s,o){this.xPosition=t,this.yPosition=i,this.theta=e,this.isDestroyed=n,this.xVelocity=Math.cos(this.theta)*this.speed,this.yVelocity=Math.sin(this.theta)*this.speed,this.canvasWidth=s,this.canvasHeight=o,this.bounces=0},t.prototype.draw=function(t){t.beginPath(),t.arc(this.xPosition,this.yPosition,this.radius,0,2*Math.PI),t.fillStyle="white",t.fill(),t.lineWidth=2,t.strokeStyle="black",t.stroke(),t.closePath()},t.prototype.willHitPlayerTank=function(t,i){for(var e=this.xPosition,n=this.yPosition,s=this.xVelocity,o=this.yVelocity,a=0;a<=this.maxBounces;)if(n+=o,((e+=s)<=0||e>this.canvasWidth)&&(s=-s,a++),(n<=0||n>this.canvasHeight)&&(o=-o,a++),t.obstacles.forEach((function(t){e>t.xLeft&&e<t.xRight&&n>t.yTop&&n<t.yBottom&&(a++,s=-s,o=-o)})),e>i.xLeft&&e<i.xRight&&n>i.yTop&&n<i.yBottom)return!0;return!1},t}(),y=function(t){function i(i,e,n,s,o,a,r){return t.call(this,i,e,n,4,1,s,o,a,r)||this}return p(i,t),i}(f),v=function(t){function i(i,e,n,s,o,a,r){return t.call(this,i,e,n,4,1,s,o,a,r)||this}return p(i,t),i}(f),m=function(t){function i(i,e,n,s,o,a,r){return t.call(this,i,e,n,6,2,s,o,a,r)||this}return p(i,t),i}(f),g=function(){function t(t,i,e,n,s,o,a){this.x=t,this.y=i,this.fragmentRadius=e,this.fragmentColor=n,this.velocityX=s,this.velocityY=o,this.blastRadius=a,this.life=a}return t.prototype.update=function(){this.x+=this.velocityX,this.y+=this.velocityY,this.life-=1},t.prototype.draw=function(t){t.beginPath(),t.arc(this.x,this.y,this.fragmentRadius*(this.life/this.blastRadius),0,2*Math.PI,!1),t.fillStyle=this.fragmentColor,t.fill(),t.closePath()},t}(),P=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),w=function(){function t(t,i,e,s,o){this.radius=15,this.fragmentColorScale=n.m4Y().domain([0,.5,1]).range(["red","yellow","orange"]),this.xPosition=t,this.yPosition=i,this.blastRadius=e,this.isDestroyed=s,this.audioManager=o,this.blastDelayMS=5e3,this.fuseStartTime=0,this.shouldFlashRed=!1,this.isExploding=!1,this.fragments=[]}return t.prototype.destroy=function(){var t=this;this.isDestroyed||this.isExploding||(this.createFragments(),this.audioManager.play(c.BOMB_EXPLODE),this.isExploding=!0,setTimeout((function(){t.isExploding=!1,t.isDestroyed=!0}),500))},t.prototype.checkEnemyHit=function(t){var i=this;t.forEach((function(t){t.isDestroyed||i.isExploding&&i.isExploding&&i.isPointInsideBlastRadius(t.xPosition+t.tankMidpoint,t.yPosition+t.tankMidpoint)&&(t.destroy(),console.log("Enemy hit with bomb!!!"))}))},t.prototype.checkPlayerHit=function(t){t.isDestroyed||this.isExploding&&(this.isPointInsideBlastRadius(t.xLeft,t.yTop)||this.isPointInsideBlastRadius(t.xRight,t.yTop)||this.isPointInsideBlastRadius(t.xLeft,t.yBottom)||this.isPointInsideBlastRadius(t.xRight,t.yBottom)||this.isPointInsideBlastRadius(t.xPosition,t.yPosition))&&(t.destroy(),console.log("Player Hit with bomb!!!"))},t.prototype.setFuse=function(){var t=this;this.isDestroyed||(this.fuseStartTime=performance.now(),this.animateFuse(),setTimeout((function(){t.destroy()}),this.blastDelayMS))},t.prototype.isPointInsideBlastRadius=function(t,i){var e=t-this.xPosition,n=i-this.yPosition;return Math.sqrt(e*e+n*n)<=this.blastRadius},t.prototype.updateExplosion=function(t){this.fragments.forEach((function(i){i.update(),i.draw(t)})),this.fragments=this.fragments.filter((function(t){return t.life>0}))},t.prototype.draw=function(t){this.isExploding?this.updateExplosion(t):(t.beginPath(),t.arc(this.xPosition,this.yPosition,this.radius,0,2*Math.PI),t.fillStyle=this.shouldFlashRed?"red":"yellow",t.fill(),t.lineWidth=3,t.strokeStyle="black",t.stroke(),t.closePath(),t.beginPath(),t.arc(this.xPosition,this.yPosition,10,0,2*Math.PI),t.lineWidth=1.5,t.strokeStyle="black",t.stroke(),t.closePath())},t.prototype.animateFuse=function(){var t=this;if(!this.isDestroyed){var i=(performance.now()-this.fuseStartTime)/this.blastDelayMS;this.shouldFlashRed=[.25,.5,.625,.75,.8125,.875,.90625,.9375,.96875,.984375].some((function(t){return i>t&&i<t+.01})),requestAnimationFrame((function(){return t.animateFuse()}))}},t.prototype.createFragments=function(){for(var t=0;t<50;t++){var i=2*Math.random()*Math.PI,e=5*Math.random()+2,n=Math.cos(i)*e,s=Math.sin(i)*e,o=new g(this.xPosition,this.yPosition,2*Math.random()+1,this.fragmentColorScale(Math.random()),n,s,this.blastRadius);this.fragments.push(o)}},t}(),x=function(t){function i(i,e,n,s){return t.call(this,i,e,50,n,s)||this}return P(i,t),i}(w),b=function(t){function i(i,e,n,s){return t.call(this,i,e,80,n,s)||this}return P(i,t),i}(w),M=(function(t){function i(i,e,n,s){return t.call(this,i,e,100,n,s)||this}P(i,t)}(w),function(t){function i(i,e,n,s){return t.call(this,i,e,150,n,s)||this}return P(i,t),i.prototype.draw=function(t){this.isExploding?this.updateExplosion(t):(t.save(),t.translate(this.xPosition,this.yPosition),t.scale(1,1.3),t.beginPath(),t.moveTo(0,0),t.bezierCurveTo(12,-12,24,0,0,24),t.bezierCurveTo(-24,0,-12,-12,0,0),t.fillStyle=this.shouldFlashRed?"red":"#FFC2D1",t.fill(),t.lineWidth=3,t.strokeStyle="black",t.stroke(),t.closePath(),t.restore())},i}(w)),E=function(t,i,e){if(e||2===arguments.length)for(var n,s=0,o=i.length;s<o;s++)!n&&s in i||(n||(n=Array.prototype.slice.call(i,0,s)),n[s]=i[s]);return t.concat(n||Array.prototype.slice.call(i))},T=function(){function t(t){this.canvas=t,this.playerWin=!1,this.enemyWin=!1;var i=this.canvas.getContext("2d");if(!i)throw new Error("2d context not supported or canvas element not found.");this.context=i}return t.prototype.initializeCanvas=function(t,i){this.canvas.width=t,this.canvas.height=i},t.prototype.renderLevelOverScreen=function(){if(!this.context)throw new Error("2d context not supported or canvas element not found.");var t=this.playerWin?"Win":this.enemyWin?"Lose":"";if(""!==t){this.context.font="".concat(100,"px Arial"),this.context.lineWidth=5,this.context.strokeStyle=this.playerWin?"green":"red",this.context.fillStyle=this.playerWin?"green":"red";var i=this.context.measureText(t).width,e=(this.canvas.width-i)/2,n=this.canvas.height/2+50;this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.strokeText(t,e,n),this.context.fillText(t,e,n)}},t.prototype.render=function(t,i,e){var n=this;if(!this.context)throw new Error("2d context not supported or canvas element not found.");this.context.clearRect(0,0,this.canvas.width,this.canvas.height),i.isDestroyed?this.enemyWin=!0:e.every((function(t){return t.isDestroyed}))&&(this.playerWin=!0),(this.enemyWin||this.playerWin)&&this.renderLevelOverScreen();var s=E(E([],e.flatMap((function(t){return t.ammunition})),!0),i.ammunition,!0),o=E(E([],e.flatMap((function(t){return t.bombs})),!0),i.bombs,!0);i.updatePosition(i,e,s,o),i.aim(i.aimXPos,i.aimYPos,i),e.forEach((function(t){t.isDestroyed||(t.updatePosition(i,e,s,o),t.aim(t.aimXPos,t.aimYPos,i),t.shoot(i),t.plantBomb(i))})),e.forEach((function(t){t.draw(n.context),t.ammunition.forEach((function(e){e.isDestroyed||(e.checkAmmunitionCollision(s),e.checkBombCollision(E([],i.bombs,!0)),e.updatePosition(t.obstacleCanvas),e.checkPlayerHit(i),e.draw(n.context))})),t.bombs.forEach((function(t){t.isDestroyed&&!t.isExploding||(t.checkPlayerHit(i),t.draw(n.context))}))})),i.draw(this.context),i.isDestroyed||i.reticule.draw(this.context,i.xPosition,i.yPosition,i.aimXPos,i.aimYPos),i.ammunition.forEach((function(t){t.isDestroyed||(t.checkAmmunitionCollision(s),t.checkBombCollision(o),t.updatePosition(i.obstacleCanvas),t.checkEnemyHit(e),t.checkPlayerHit(i),t.draw(n.context))})),i.bombs.forEach((function(t){t.isDestroyed&&!t.isExploding||(t.checkEnemyHit(e),t.checkPlayerHit(i),t.draw(n.context))}))},t}(),k=function(){function t(t,i,e,n){this.playerTank=null,this.enemyTanks=[],this.animationFrameID=null,this.width=i,this.height=e,this.obstacleCanvas=n,this.animationFrameID=null,this.gameRenderer=new T(document.querySelector(t)),this.gameRenderer.initializeCanvas(this.width,this.height),this.lastRenderTime=0,window.addEventListener("resize",this.resizeCanvas.bind(this))}return t.prototype.start=function(){this.animationFrameID||(this.animationFrameID=requestAnimationFrame(this.gameLoop.bind(this)))},t.prototype.stop=function(){this.animationFrameID&&(cancelAnimationFrame(this.animationFrameID),this.animationFrameID=null)},t.prototype.resizeCanvas=function(){},t.prototype.gameLoop=function(t){if(null!=this.playerTank){var i=t-this.lastRenderTime;this.gameRenderer.render(i,this.playerTank,this.enemyTanks),this.lastRenderTime=t,this.animationFrameID=requestAnimationFrame(this.gameLoop.bind(this))}},t.prototype.addEnemyTank=function(t){this.enemyTanks.push(t)},t.prototype.addPlayerTank=function(t){this.playerTank=t},t}(),C=function(t,i){this.g=0,this.h=0,this.f=0,this.walkable=!0,this.parent=null,this.x=t,this.y=i},S=function(){function t(t,i,e){if(void 0===e&&(e=!0),this.grid=[],this.gridCellWidth=30,this.path=[],!t||!i||e)return this.gridXLength=0,this.gridYLength=0,void(this.stationary=!0);this.stationary=!1,this.gridXLength=Math.floor(t.width/this.gridCellWidth),this.gridYLength=Math.floor(t.height/this.gridCellWidth);for(var n=0;n<this.gridXLength;n++){this.grid[n]=[];for(var s=function(t){o.grid[n][t]=new C(n,t);var e=n*o.gridCellWidth,s=e+o.gridCellWidth,a=t*o.gridCellWidth,r=a+o.gridCellWidth;o.grid[n][t].walkable=!i.obstacles.some((function(t){return s>t.xLeft&&e<t.xRight&&r>t.yTop&&a<t.yBottom}))},o=this,a=0;a<this.gridYLength;a++)s(a)}}return t.prototype.reset=function(){for(var t=0;t<this.gridXLength;t++)for(var i=0;i<this.gridYLength;i++)this.grid[t][i].f=0,this.grid[t][i].g=0,this.grid[t][i].h=0,this.grid[t][i].parent=null},t.prototype.getNodeFromTank=function(t){if(this.stationary)return new C(0,0);var i=Math.floor((t.xPosition+t.size/2)/this.gridCellWidth),e=Math.floor((t.yPosition+t.size/2)/this.gridCellWidth);return i=Math.max(0,Math.min(i,this.gridXLength-1)),e=Math.max(0,Math.min(e,this.gridYLength-1)),this.grid[i][e]},t.prototype.getRandomNodeInRadiusOfTarget=function(t,i){for(var e=[],n=0;n<this.gridXLength;n++)for(var s=0;s<this.gridYLength;s++){var o=this.grid[n][s],a=Math.sqrt(Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2));a<=i+1&&a>=i-1&&o.walkable&&e.push(o)}return e[Math.floor(Math.random()*e.length)]},t.prototype.aStar=function(t,i){for(var e=[t],n=new Set;e.length>0;){var s=e.sort((function(t,i){return t.f-i.f}))[0];if(s.x===i.x&&s.y===i.y){for(var o=[];null!==s;)o.unshift(s),s=s.parent;return o}e.splice(e.indexOf(s),1),n.add(s);for(var a=0,r=this.getWalkableNeighbors(s);a<r.length;a++){var h=r[a];if(!n.has(h)){var c=s.g+(h.x-s.x==0||h.y-s.y==0?1:Math.SQRT2);if(e.includes(h)){if(c>=h.g)continue}else e.push(h);h.parent=s,h.g=c,h.h=Math.round(Math.sqrt(Math.pow(h.x-i.x,2)+Math.pow(h.y-i.y,2))),h.f=h.g+h.h}}}return null},t.prototype.getWalkableNeighbors=function(t){for(var i=[],e=-1;e<=1;e++)for(var n=-1;n<=1;n++)if(0!==e||0!==n){var s=t.x+e,o=t.y+n;s>=0&&o>=0&&s<this.gridXLength&&o<this.gridYLength&&this.grid[s][o].walkable&&i.push(this.grid[s][o])}return i},t}(),B=function(){function t(t,i,e,n){this.xLeft=t,this.yTop=i,this.width=e,this.height=n,this.yBottom=this.yTop+this.height,this.xRight=this.xLeft+this.width}return t.prototype.draw=function(t){t.beginPath(),t.rect(this.xLeft,this.yTop,this.width,this.height),t.fillStyle="#1d1c1a",t.fill()},t}(),A=function(){function t(t,i,e,n){var s=this;this.obstacles=[],this.width=i,this.height=e,this.obstacles=n,window.addEventListener("resize",this.resizeCanvas.bind(this)),this.obstacleCanvas=document.querySelector(t),this.obstacleCanvas.width=i,this.obstacleCanvas.height=e,n.forEach((function(t){t.draw(s.obstacleCanvas.getContext("2d"))}))}return t.prototype.clearObstacles=function(){var t=this.obstacleCanvas.getContext("2d");t&&t.clearRect(0,0,this.obstacleCanvas.width,this.obstacleCanvas.height),this.obstacles=[]},t.prototype.resizeCanvas=function(){},t}(),D=function(){function t(){}return t.BABY_BLUE="#ABDEE6",t.LAVENDER_BLUSH="#CBAACB",t.PALE_YELLOW="#FFFFB5",t.PEACH_PUFF="#FFCCB6",t.BLUSH_PINK="#F3B0C3",t.LIGHT_AQUA="#C6DBDA",t.LIGHT_PINK="#FEE1E8",t.LIGHT_CORAL_PINK="#FED7C3",t.MINT_CREAM="#F6EAC2",t.PALE_LAVENDER="#ECD5E3",t.CORAL_ORANGE="#FF968A",t.SOFT_PEACH="#FFAEA5",t.LIGHT_SALMON_PINK="#FFCFB5",t.LIGHT_ROSE="#FFD8BE",t.SOFT_ORANGE="#FFC8A2",t.SOFT_TEAL="#D4F0F0",t.PALE_MINT="#8FCACA",t.LIGHT_SAGE="#CCE2CB",t.PALE_GREEN="#B6CFB6",t.MINT_GREEN="#97C1A9",t.SOFT_PEACH_PINK="#FCB9AA",t.PALE_PEACH="#FFDBCC",t.PALE_GRAY="#ECE4E4",t.PALE_AQUA="#A2E1DB",t.SOFT_CYAN="#55CBCD",t}(),L=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),R=function(){function t(t,i,e,n){this.reticuleWidth=5,this.color=i,this.dashPattern=t,this.renderReticule=e,this.tankSize=n}return t.prototype.draw=function(t,i,e,n,s){this.renderReticule&&(t.strokeStyle=this.color,t.setLineDash(this.dashPattern),t.beginPath(),t.moveTo(i+this.tankSize/2,e+this.tankSize/2),t.lineTo(n,s),t.lineWidth=this.reticuleWidth,t.stroke())},t}(),_=function(t){function i(){return t.call(this,[0,0],"blue",!1,0)||this}return L(i,t),i}(R),O=(function(t){function i(i){return t.call(this,[5,5],"blue",!0,i)||this}L(i,t)}(R),function(t){function i(i,e){return t.call(this,[4,1],e,!0,i)||this}L(i,t)}(R),function(t){function i(i,e,n){var s=t.call(this,[1,1],e,!0,i)||this;return s.maxReticuleLength=n,s}return L(i,t),i.prototype.draw=function(t,i,e,n,s){var o=n-i,a=s-e,r=Math.sqrt(Math.pow(o,2)+Math.pow(a,2))/this.maxReticuleLength,h=10*r+2,c=10*(1-r)+5;if(this.renderReticule){t.strokeStyle=this.color,t.setLineDash([h,c]),t.beginPath(),t.moveTo(i+this.tankSize/2,e+this.tankSize/2),t.lineTo(n,s),t.lineWidth=this.reticuleWidth,t.stroke(),t.setLineDash([]);t.beginPath(),t.moveTo(n-8,s-8),t.lineTo(n+8,s+8),t.stroke(),t.beginPath(),t.moveTo(n-8,s+8),t.lineTo(n+8,s-8),t.stroke()}},i}(R));!function(t){t[t.NORTH=1]="NORTH",t[t.SOUTH=2]="SOUTH",t[t.EAST=3]="EAST",t[t.WEST=4]="WEST",t[t.NORTHEAST=5]="NORTHEAST",t[t.NORTHWEST=6]="NORTHWEST",t[t.SOUTHEAST=7]="SOUTHEAST",t[t.SOUTHWEST=8]="SOUTHWEST",t[t.UNKNOWN=9]="UNKNOWN"}(l||(l={}));var W=function(){function t(t,i,e,n,s,o,a,r,h,c,u){this.gunBarrellWidth=7,this.isDestroyed=!1,this.isExploding=!1,this.twoPi=2*Math.PI,this.lastDirectionMoved=l.UNKNOWN,this.wasLastMoveBlocked=!1,this.consecutiveDirectionMoves=0,this.ammunition=[],this.bombs=[],this.reticule=i,this.xPosition=e,this.yPosition=n,this.xLeft=e,this.xRight=e+o,this.yTop=n,this.yBottom=n+o,this.speed=s,this.size=o,this.color=a,this.canvasWidth=t.width,this.canvasHeight=t.height,this.obstacleCanvas=r,this.tankMidpoint=this.size/2,this.ammunition=h,this.maxAmmunition=h.length,this.bombs=c,this.maxBombs=c.length,this.audioManager=u;var d=t.getBoundingClientRect();this.xOffset=d.left,this.yOffset=d.top,this.aimXPos=t.width/2,this.aimYPos=t.height/2;var p=this.aimXPos-this.xPosition-this.tankMidpoint,f=this.aimYPos-this.yPosition-this.tankMidpoint,y=Math.atan2(f,p);y<0&&(y+=2*Math.PI),this.aimAngle=y,this.gunBarrellEndX=this.xPosition+this.tankMidpoint+Math.cos(this.aimAngle)*this.size,this.gunBarrellEndY=this.yPosition+this.tankMidpoint+Math.sin(this.aimAngle)*this.size,this.fragments=[]}return t.prototype.draw=function(t){if(this.isDestroyed){this.isExploding&&this.updateExplosion(t),t.strokeStyle=this.color,t.lineWidth=5,t.setLineDash([]);var i=12;t.beginPath(),t.moveTo(this.xPosition+this.tankMidpoint-i,this.yPosition+this.tankMidpoint-i),t.lineTo(this.xPosition+this.tankMidpoint+i,this.yPosition+this.tankMidpoint+i),t.stroke(),t.beginPath(),t.moveTo(this.xPosition+this.tankMidpoint-i,this.yPosition+this.tankMidpoint+i),t.lineTo(this.xPosition+this.tankMidpoint+i,this.yPosition+this.tankMidpoint-i),t.stroke()}else t.fillStyle=this.color,t.fillRect(this.xPosition,this.yPosition,this.size,this.size),t.setLineDash([]),t.lineJoin="bevel",t.strokeStyle="black",t.lineWidth=2,t.strokeRect(this.xPosition,this.yPosition,this.size,this.size),t.beginPath(),t.arc(this.xPosition+this.tankMidpoint,this.yPosition+this.tankMidpoint,this.size/3,0,this.twoPi),t.stroke(),this.gunBarrellEndX=this.xPosition+this.tankMidpoint+Math.cos(this.aimAngle)*this.size,this.gunBarrellEndY=this.yPosition+this.tankMidpoint+Math.sin(this.aimAngle)*this.size,t.beginPath(),t.moveTo(this.xPosition+this.tankMidpoint,this.yPosition+this.tankMidpoint),t.lineTo(this.gunBarrellEndX,this.gunBarrellEndY),t.lineWidth=this.gunBarrellWidth,t.stroke()},t.prototype.destroy=function(){var t=this;this.isDestroyed=!0,this.isExploding=!0,this.createFragments(),setTimeout((function(){t.isExploding=!1}),1e3)},t.prototype.createFragments=function(){for(var t=0;t<50;t++){var i=2*Math.random()*Math.PI,e=5*Math.random()+2,n=Math.cos(i)*e,s=Math.sin(i)*e,o=Math.floor(256*Math.random()),a=.5*Math.random()+.5,r="rgba(".concat(o,", ").concat(o,", ").concat(o,", ").concat(a,")"),h=new g(this.xPosition+this.tankMidpoint,this.yPosition+this.tankMidpoint,2*Math.random()+1,r,n,s,10);this.fragments.push(h)}},t.prototype.updateExplosion=function(t){this.fragments.forEach((function(i){i.update(),i.draw(t)})),this.fragments=this.fragments.filter((function(t){return t.life>0}))},t.prototype.updatePosition=function(t,i,e,n){},t.prototype.aim=function(t,i,e){},t.prototype.shoot=function(t){},t.prototype.plantBomb=function(t){},t.prototype.moveInLastDirectionMoved=function(){this.moveInCardinalDirection(this.lastDirectionMoved)},t.prototype.getRandomDirection=function(){var t=Object.keys(l).map((function(t){return Number.parseInt(t)})).filter((function(t){return!Number.isNaN(t)}));return t[Math.floor(Math.random()*t.length)]},t.prototype.moveInCardinalDirection=function(t){if(!this.isDestroyed)switch(t){case l.NORTH:this.moveNorth();break;case l.SOUTH:this.moveSouth();break;case l.EAST:this.moveEast();break;case l.WEST:this.moveWest();break;case l.NORTHEAST:this.moveNorthEast();break;case l.NORTHWEST:this.moveNorthWest();break;case l.SOUTHEAST:this.moveSouthEast();break;case l.SOUTHWEST:this.moveSouthWest();break;default:var i=Object.values(l).filter((function(t){return"number"==typeof t})),e=Math.floor(Math.random()*i.length);this.moveInCardinalDirection(i[e])}},t.prototype.moveNorth=function(){if(!this.isDestroyed){this.lastDirectionMoved==l.NORTH?this.consecutiveDirectionMoves+=1:this.consecutiveDirectionMoves=0,this.lastDirectionMoved=l.NORTH;for(var t=!1,i=0,e=this.obstacleCanvas.obstacles;i<e.length;i++){var n=e[i];if(this.yPosition-this.speed<n.yTop+n.height&&this.yPosition>n.yTop&&n.xLeft<this.xPosition+this.size&&this.xPosition<n.xRight){this.yPosition=n.yBottom,t=!0;break}}t?this.wasLastMoveBlocked=!0:this.yPosition=Math.max(this.yPosition-this.speed,0)}},t.prototype.moveSouth=function(){if(!this.isDestroyed){this.lastDirectionMoved==l.SOUTH?this.consecutiveDirectionMoves+=1:this.consecutiveDirectionMoves=0,this.lastDirectionMoved=l.SOUTH;for(var t=!1,i=0,e=this.obstacleCanvas.obstacles;i<e.length;i++){var n=e[i];if(this.yPosition+this.speed+this.size>n.yTop&&this.yPosition<n.yTop+n.height&&n.xLeft<this.xPosition+this.size&&this.xPosition<n.xRight){this.yPosition=n.yTop-this.size,t=!0;break}}t?this.wasLastMoveBlocked=!0:this.yPosition=Math.min(this.yPosition+this.speed,this.canvasHeight-this.size)}},t.prototype.moveWest=function(){if(!this.isDestroyed){this.lastDirectionMoved==l.WEST?this.consecutiveDirectionMoves+=1:this.consecutiveDirectionMoves=0,this.lastDirectionMoved=l.WEST;for(var t=!1,i=0,e=this.obstacleCanvas.obstacles;i<e.length;i++){var n=e[i];if(this.xPosition-this.speed<n.xRight&&this.xPosition>n.xLeft&&n.yTop<this.yPosition+this.size&&this.yPosition<n.yBottom){this.xPosition=n.xRight,t=!0;break}}t?this.wasLastMoveBlocked=!0:this.xPosition=Math.max(this.xPosition-this.speed,0)}},t.prototype.moveEast=function(){if(!this.isDestroyed){this.lastDirectionMoved==l.EAST?this.consecutiveDirectionMoves+=1:this.consecutiveDirectionMoves=0,this.lastDirectionMoved=l.EAST;for(var t=!1,i=0,e=this.obstacleCanvas.obstacles;i<e.length;i++){var n=e[i];if(this.xPosition+this.speed+this.size>n.xLeft&&this.xPosition<n.xLeft+n.width&&n.yTop<this.yPosition+this.size&&this.yPosition<n.yBottom){this.xPosition=n.xLeft-this.size,t=!0;break}}t?this.wasLastMoveBlocked=!0:this.xPosition=Math.min(this.xPosition+this.speed,this.canvasWidth-this.size)}},t.prototype.moveNorthEast=function(){if(!this.isDestroyed){this.lastDirectionMoved==l.NORTHEAST?this.consecutiveDirectionMoves+=1:this.consecutiveDirectionMoves=0,this.lastDirectionMoved=l.NORTHEAST;for(var t=!1,i=!1,e=0,n=this.obstacleCanvas.obstacles;e<n.length;e++){var s=n[e];!t&&this.yPosition-this.speed<s.yTop+s.height&&this.yPosition>s.yTop&&s.xLeft<this.xPosition+this.size&&this.xPosition<s.xRight&&(this.yPosition=s.yBottom,t=!0),!i&&this.xPosition+this.speed+this.size>s.xLeft&&this.xPosition<s.xLeft+s.width&&s.yTop<this.yPosition+this.size&&this.yPosition<s.yBottom&&(this.xPosition=s.xLeft-this.size,i=!0)}t&&i&&(this.wasLastMoveBlocked=!0),t||(this.yPosition=Math.max(this.yPosition-this.speed,0)),i||(this.xPosition=Math.min(this.xPosition+this.speed,this.canvasWidth-this.size))}},t.prototype.moveNorthWest=function(){if(!this.isDestroyed){this.lastDirectionMoved==l.NORTHWEST?this.consecutiveDirectionMoves+=1:this.consecutiveDirectionMoves=0,this.lastDirectionMoved=l.NORTHWEST;for(var t=!1,i=!1,e=0,n=this.obstacleCanvas.obstacles;e<n.length;e++){var s=n[e];!t&&this.yPosition-this.speed<s.yTop+s.height&&this.yPosition>s.yTop&&s.xLeft<this.xPosition+this.size&&this.xPosition<s.xRight&&(this.yPosition=s.yBottom,t=!0),!i&&this.xPosition-this.speed<s.xRight&&this.xPosition>s.xLeft&&s.yTop<this.yPosition+this.size&&this.yPosition<s.yBottom&&(this.xPosition=s.xRight,i=!0)}t&&i&&(this.wasLastMoveBlocked=!0),t||(this.yPosition=Math.max(this.yPosition-this.speed,0)),i||(this.xPosition=Math.max(this.xPosition-this.speed,0))}},t.prototype.moveSouthEast=function(){if(!this.isDestroyed){this.lastDirectionMoved==l.SOUTHEAST?this.consecutiveDirectionMoves+=1:this.consecutiveDirectionMoves=0,this.lastDirectionMoved=l.SOUTHEAST;for(var t=!1,i=!1,e=0,n=this.obstacleCanvas.obstacles;e<n.length;e++){var s=n[e];!t&&this.yPosition+this.speed+this.size>s.yTop&&this.yPosition<s.yTop+s.height&&s.xLeft<this.xPosition+this.size&&this.xPosition<s.xRight&&(this.yPosition=s.yTop-this.size,t=!0),!i&&this.xPosition+this.speed+this.size>s.xLeft&&this.xPosition<s.xLeft+s.width&&s.yTop<this.yPosition+this.size&&this.yPosition<s.yBottom&&(this.xPosition=s.xLeft-this.size,i=!0)}t&&i&&(this.wasLastMoveBlocked=!0),t||(this.yPosition=Math.min(this.yPosition+this.speed,this.canvasHeight-this.size)),i||(this.xPosition=Math.min(this.xPosition+this.speed,this.canvasWidth-this.size))}},t.prototype.moveSouthWest=function(){if(!this.isDestroyed){this.lastDirectionMoved==l.SOUTHWEST?this.consecutiveDirectionMoves+=1:this.consecutiveDirectionMoves=0,this.lastDirectionMoved=l.SOUTHWEST;for(var t=!1,i=!1,e=0,n=this.obstacleCanvas.obstacles;e<n.length;e++){var s=n[e];!t&&this.yPosition+this.speed+this.size>s.yTop&&this.yPosition<s.yTop+s.height&&s.xLeft<this.xPosition+this.size&&this.xPosition<s.xRight&&(this.yPosition=s.yTop-this.size,t=!0),!i&&this.xPosition-this.speed<s.xRight&&this.xPosition>s.xLeft&&s.yTop<this.yPosition+this.size&&this.yPosition<s.yBottom&&(this.xPosition=s.xRight,i=!0)}t&&i&&(this.wasLastMoveBlocked=!0),t||(this.yPosition=Math.min(this.yPosition+this.speed,this.canvasHeight-this.size)),i||(this.xPosition=Math.max(this.xPosition-this.speed,0))}},t}(),I=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),N=function(t){function i(i,e,n,s,o,a,r,h,c,u,l,d,p){var f=t.call(this,i,e,n,s,o,a,h,c,u,l,p)||this;return f.aggressionFactor=15,f.path=[],f.pathRecaculationInterval=60,f.drawNavigationGrid=!1,f.aggressionFactor=r,f.navigationGrid=d,f.currentNode=f.navigationGrid.getNodeFromTank(f),f}return I(i,t),i.prototype.draw=function(i){var e,n=this;if(this.drawNavigationGrid){i.lineWidth=1;for(var s=0;s<=this.navigationGrid.gridYLength;s++)i.fillStyle="blue",i.beginPath(),i.moveTo(0,s*this.navigationGrid.gridCellWidth),i.lineTo(this.navigationGrid.gridXLength*this.navigationGrid.gridCellWidth,s*this.navigationGrid.gridCellWidth),i.stroke();for(var o=0;o<=this.navigationGrid.gridXLength;o++)i.fillStyle="blue",i.beginPath(),i.moveTo(o*this.navigationGrid.gridCellWidth,0),i.lineTo(o*this.navigationGrid.gridCellWidth,this.navigationGrid.gridXLength*this.navigationGrid.gridCellWidth),i.stroke();i.fillStyle=this.color,null===(e=this.path)||void 0===e||e.forEach((function(t,e,s){i.beginPath(),i.arc(t.x*n.navigationGrid.gridCellWidth+n.navigationGrid.gridCellWidth/2,t.y*n.navigationGrid.gridCellWidth+n.navigationGrid.gridCellWidth/2,5,0,2*Math.PI),i.fill()}))}t.prototype.draw.call(this,i)},i.prototype.updatePosition=function(t,i,e,n){if(this.pathRecaculationInterval-=1,null==this.path||0==this.path.length||0==this.pathRecaculationInterval){this.navigationGrid.reset();var s=this.navigationGrid.getNodeFromTank(this),o=this.navigationGrid.getNodeFromTank(t),a=this.navigationGrid.getRandomNodeInRadiusOfTarget(o,this.aggressionFactor);this.path=this.navigationGrid.aStar(s,a),this.pathRecaculationInterval=60,null==this.path&&console.log("Path is null")}else{this.currentNode=this.navigationGrid.getNodeFromTank(this);var r=this.path[0].x-this.currentNode.x,h=this.path[0].y-this.currentNode.y;if(this.wasLastMoveBlocked&&this.consecutiveDirectionMoves>2){var c=this.getRandomDirection();this.moveInCardinalDirection(c),this.consecutiveDirectionMoves=0;var u=Math.random();1===r&&0===h?u<.5?this.moveSouthEast():this.moveNorthEast():-1===r&&0===h?u<.5?this.moveNorthWest():this.moveSouthWest():0===r&&1===h?u<.5?this.moveSouthEast():this.moveSouthWest():0===r&&-1===h?u<.5?this.moveNorthWest():this.moveNorthEast():1===r&&1===h?u<.5?this.moveSouth():this.moveEast():1===r&&-1===h?u<.5?this.moveNorth():this.moveEast():-1===r&&1===h?u<.5?this.moveSouth():this.moveWest():-1===r&&-1===h&&(u<.5?this.moveNorth():this.moveWest())}else 1===r&&0===h?this.moveEast():-1===r&&0===h?this.moveWest():0===r&&1===h?this.moveSouth():0===r&&-1===h?this.moveNorth():1===r&&1===h?this.moveSouthEast():1===r&&-1===h?this.moveNorthEast():-1===r&&1===h?this.moveSouthWest():-1===r&&-1===h&&this.moveNorthWest();this.path[0].x==this.currentNode.x&&this.path[0].y==this.currentNode.y&&this.path.splice(0,1)}this.xLeft=this.xPosition,this.xRight=this.xPosition+this.size,this.yTop=this.yPosition,this.yBottom=this.yPosition+this.size},i}(W),H=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),z=function(t){function i(i,e,n,s,o,a,r,h){var c=this,u=D.PALE_YELLOW;return(c=t.call(this,i,new _,e,n,2,30,4,u,s,o,a,r,h)||this).minTimeBetweenShotsMS=2e4,c.timeBetweenShotsIsElapsed=!0,c.minTimeBetweenBombPlantsMS=1e3,c.timeBetweenPlantsIsElapsed=!0,c}return H(i,t),i.prototype.plantBomb=function(t){var i=this;if(this.timeBetweenPlantsIsElapsed&&!this.isDestroyed){var e=this.bombs.findIndex((function(t){return t.isDestroyed&&!t.isExploding}));if(-1!==e)this.bombs[e].xPosition=this.xPosition+this.size/2,this.bombs[e].yPosition=this.yPosition+this.size/2,this.bombs[e].isPointInsideBlastRadius(t.xPosition+t.tankMidpoint,t.yPosition+t.tankMidpoint)&&(this.bombs[e].isDestroyed=!1,this.bombs[e].setFuse(),this.timeBetweenPlantsIsElapsed=!1,setTimeout((function(){i.timeBetweenPlantsIsElapsed=!0}),this.minTimeBetweenBombPlantsMS))}},i.prototype.shoot=function(t){var i=this;if(this.timeBetweenShotsIsElapsed&&!this.isDestroyed){var e=this.ammunition.findIndex((function(t){return t.isDestroyed}));if(-1!==e)this.ammunition[e].reload(this.gunBarrellEndX,this.gunBarrellEndY,this.aimAngle,!0,this.canvasWidth,this.canvasHeight),this.ammunition[e].willHitPlayerTank(this.obstacleCanvas,t)&&(this.ammunition[e].isDestroyed=!1,this.timeBetweenShotsIsElapsed=!1,setTimeout((function(){i.timeBetweenShotsIsElapsed=!0}),this.minTimeBetweenShotsMS))}},i.prototype.aim=function(t,i,e){if(!this.isDestroyed){var n=e.xPosition+e.size/2-this.xPosition-this.tankMidpoint,s=e.yPosition+e.size/2-this.yPosition-this.tankMidpoint,o=Math.atan2(s,n);o<0&&(o+=2*Math.PI),this.aimAngle=o}},i}(N),F=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),G=function(t){function i(i,e,n,s,o){var a="#4f6d7a",r=[new y(0,0,0,0,0,!0,o),new y(0,0,0,0,0,!0,o),new y(0,0,0,0,0,!0,o),new y(0,0,0,0,0,!0,o),new y(0,0,0,0,0,!0,o)],h=[new x(0,0,!0,o),new x(0,0,!0,o)],c=i.getBoundingClientRect(),u=window.innerWidth,l=c.left,d=u-c.right,p=i.width+Math.max(l,d);return t.call(this,i,new O(30,a,p),e,n,2,30,a,s,r,h,o)||this}return F(i,t),i}(function(t){function i(i,e,n,s,o,a,r,h,c,u,l){var d=t.call(this,i,e,n,s,o,a,r,h,c,u,l)||this;return d.keyStates={ArrowUp:!1,ArrowDown:!1,ArrowLeft:!1,ArrowRight:!1,w:!1,a:!1,s:!1,d:!1,W:!1,A:!1,S:!1,D:!1},document.addEventListener("keydown",(function(t){d.keyStates.hasOwnProperty(t.key)&&(d.keyStates[t.key]=!0)})),document.addEventListener("keydown",(function(t){"Space"===t.code&&d.plantBomb(d)})),document.addEventListener("keyup",(function(t){d.keyStates.hasOwnProperty(t.key)&&(d.keyStates[t.key]=!1)})),document.addEventListener("mousemove",(function(t){d.aimXPos=t.clientX-d.xOffset,d.aimYPos=t.clientY-d.yOffset})),document.addEventListener("click",(function(t){i.contains(t.target)&&d.shoot(d)})),d}return F(i,t),i.prototype.updatePosition=function(t,i,e,n){this.up()&&this.right()?this.moveNorthEast():this.up()&&this.left()?this.moveNorthWest():this.down()&&this.right()?this.moveSouthEast():this.down()&&this.left()?this.moveSouthWest():this.up()?this.moveNorth():this.down()?this.moveSouth():this.left()?this.moveWest():this.right()&&this.moveEast(),this.xLeft=this.xPosition,this.xRight=this.xPosition+this.size,this.yTop=this.yPosition,this.yBottom=this.yPosition+this.size},i.prototype.plantBomb=function(t){if(!this.isDestroyed){var i=this.bombs.findIndex((function(t){return t.isDestroyed}));-1!==i&&(this.bombs[i].xPosition=this.xPosition+this.size/2,this.bombs[i].yPosition=this.yPosition+this.size/2,this.bombs[i].isDestroyed=!1,this.bombs[i].setFuse())}},i.prototype.aim=function(t,i,e){if(!this.isDestroyed){var n=t-this.xPosition-this.tankMidpoint,s=i-this.yPosition-this.tankMidpoint,o=Math.atan2(s,n);o<0&&(o+=2*Math.PI),this.aimAngle=o}},i.prototype.shoot=function(t){if(!this.isDestroyed){var i=this.ammunition.findIndex((function(t){return t.isDestroyed}));-1!==i&&(this.audioManager.play(c.TANK_FIRE),this.ammunition[i]=new y(this.gunBarrellEndX,this.gunBarrellEndY,this.aimAngle,this.canvasWidth,this.canvasHeight,!1,this.audioManager))}},i.prototype.up=function(){return this.keyStates.ArrowUp||this.keyStates.w||this.keyStates.W},i.prototype.down=function(){return this.keyStates.ArrowDown||this.keyStates.s||this.keyStates.S},i.prototype.left=function(){return this.keyStates.ArrowLeft||this.keyStates.a||this.keyStates.A},i.prototype.right=function(){return this.keyStates.ArrowRight||this.keyStates.d||this.keyStates.D},i}(W)),Y=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),j=function(t){function i(i,e,n,s,o,a,r,h){var c=D.CORAL_ORANGE;return t.call(this,i,new _,e,n,1.2,30,15,c,s,o,a,r,h)||this}return Y(i,t),i.prototype.shoot=function(t){var i=this.ammunition.findIndex((function(t){return t.isDestroyed}));-1!==i&&(this.ammunition[i].reload(this.gunBarrellEndX,this.gunBarrellEndY,this.aimAngle,!0,this.canvasWidth,this.canvasHeight),this.ammunition[i].willHitPlayerTank(this.obstacleCanvas,t)&&(this.ammunition[i].isDestroyed=!1))},i.prototype.aim=function(t,i,e){if(!this.isDestroyed){var n=e.xPosition+e.size/2-this.xPosition-this.tankMidpoint,s=e.yPosition+e.size/2-this.yPosition-this.tankMidpoint,o=Math.atan2(s,n);o<0&&(o+=2*Math.PI),this.aimAngle=o}},i}(N),U=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),X=function(t){function i(i,e,n,s,o,a){var r=this,h=D.BABY_BLUE,c=new S;return(r=t.call(this,i,new _,e,n,0,30,0,h,s,o,[],c,a)||this).aimAngleChangeAmount=0,r}return U(i,t),i.prototype.getAngleChangeAmount=function(){return Math.floor(721*Math.random())+-360},i.prototype.updatePosition=function(t){},i.prototype.shoot=function(t){var i=this.ammunition.findIndex((function(t){return t.isDestroyed}));-1!==i&&(this.ammunition[i].reload(this.gunBarrellEndX,this.gunBarrellEndY,this.aimAngle,!0,this.canvasWidth,this.canvasHeight),this.ammunition[i].willHitPlayerTank(this.obstacleCanvas,t)&&(this.ammunition[i].isDestroyed=!1))},i.prototype.aim=function(t,i,e){this.isDestroyed||(this.aimAngleChangeAmount>0?(this.aimAngle+=.01,this.aimAngleChangeAmount-=1):this.aimAngleChangeAmount<0?(this.aimAngle-=.01,this.aimAngleChangeAmount+=1):this.aimAngleChangeAmount=this.getAngleChangeAmount())},i}(N),V=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),K=function(t){function i(i,e,n,s,o){var a=this,r=D.PALE_GRAY,h=[new v(0,0,0,0,0,!0,o)],c=new S;return(a=t.call(this,i,new _,e,n,0,30,0,r,s,h,[],c,o)||this).minTimeBetweenShotsMS=5e3,a.timeBetweenShotsIsElapsed=!1,setTimeout((function(){a.timeBetweenShotsIsElapsed=!0}),1e3),a}return V(i,t),i.prototype.updatePosition=function(t){},i.prototype.shoot=function(t){var i=this;if(this.timeBetweenShotsIsElapsed&&!this.isDestroyed){var e=this.ammunition.findIndex((function(t){return t.isDestroyed}));if(-1!==e)this.ammunition[e].reload(this.gunBarrellEndX,this.gunBarrellEndY,this.aimAngle,!0,this.canvasWidth,this.canvasHeight),this.ammunition[e].willHitPlayerTank(this.obstacleCanvas,t)&&(this.ammunition[e].isDestroyed=!1,this.timeBetweenShotsIsElapsed=!1,setTimeout((function(){i.timeBetweenShotsIsElapsed=!0}),this.minTimeBetweenShotsMS))}},i.prototype.aim=function(t,i,e){if(!this.isDestroyed){var n=e.xPosition+e.size/2-this.xPosition-this.tankMidpoint,s=e.yPosition+e.size/2-this.yPosition-this.tankMidpoint,o=Math.atan2(s,n);o<0&&(o+=2*Math.PI),this.aimAngle=o}},i}(N),q=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),J=function(t){function i(i,e,n,s,o,a,r,h){var c=this,u=D.BLUSH_PINK;return(c=t.call(this,i,new _,e,n,2.2,30,5,u,s,o,a,r,h)||this).minTimeBetweenShotsMS=1e3,c.timeBetweenShotsIsElapsed=!1,c.minTimeBetweenBombPlantsMS=1e3,c.timeBetweenPlantsIsElapsed=!0,setTimeout((function(){c.timeBetweenShotsIsElapsed=!0}),1e3),c}return q(i,t),i.prototype.plantBomb=function(t){var i=this;if(this.timeBetweenPlantsIsElapsed&&!this.isDestroyed){var e=this.bombs.findIndex((function(t){return t.isDestroyed}));if(-1!==e)this.bombs[e].xPosition=this.xPosition+this.size/2,this.bombs[e].yPosition=this.yPosition+this.size/2,this.bombs[e].isPointInsideBlastRadius(t.xPosition+t.tankMidpoint,t.yPosition+t.tankMidpoint)&&(this.bombs[e].isDestroyed=!1,this.bombs[e].setFuse(),this.timeBetweenPlantsIsElapsed=!1,setTimeout((function(){i.timeBetweenPlantsIsElapsed=!0}),this.minTimeBetweenBombPlantsMS))}},i.prototype.shoot=function(t){var i=this;if(this.timeBetweenShotsIsElapsed&&!this.isDestroyed){var e=this.ammunition.findIndex((function(t){return t.isDestroyed}));if(-1!==e)this.ammunition[e].reload(this.gunBarrellEndX,this.gunBarrellEndY,this.aimAngle,!0,this.canvasWidth,this.canvasHeight),this.ammunition[e].willHitPlayerTank(this.obstacleCanvas,t)&&(this.ammunition[e].isDestroyed=!1,this.timeBetweenShotsIsElapsed=!1,setTimeout((function(){i.timeBetweenShotsIsElapsed=!0}),this.minTimeBetweenShotsMS))}},i.prototype.aim=function(t,i,e){if(!this.isDestroyed){var n=e.xPosition+e.size/2-this.xPosition-this.tankMidpoint,s=e.yPosition+e.size/2-this.yPosition-this.tankMidpoint,o=Math.atan2(s,n);o<0&&(o+=2*Math.PI),this.aimAngle=o}},i}(N),Q=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Z=function(){function t(t,i){this.canvasWidth=1e3,this.canvasHeight=500,this.obstacleCanvas=t,this.gameCanvas=new k("#game-canvas",this.canvasWidth,this.canvasHeight,t),this.audioManager=i}return t.prototype.stop=function(){this.gameCanvas.stop()},t.prototype.start=function(){this.gameCanvas.start()},t}(),$=function(t){function i(i){var e=this,n=new B(300,200,40,100),s=new A("#obstacle-canvas",1e3,500,[n]);e=t.call(this,s,i)||this;var o=new K(e.gameCanvas.gameRenderer.canvas,900,240,s,i);e.gameCanvas.addEnemyTank(o);var a=new G(e.gameCanvas.gameRenderer.canvas,100,250,s,i);return e.gameCanvas.addPlayerTank(a),e}return Q(i,t),i}(Z),tt=function(t){function i(i){var e=this,n=new B(300,200,40,100),s=new A("#obstacle-canvas",1e3,500,[n]);e=t.call(this,s,i)||this;var o=new K(e.gameCanvas.gameRenderer.canvas,800,100,s,i),a=new K(e.gameCanvas.gameRenderer.canvas,900,240,s,i),r=new K(e.gameCanvas.gameRenderer.canvas,800,400,s,i);e.gameCanvas.addEnemyTank(o),e.gameCanvas.addEnemyTank(a),e.gameCanvas.addEnemyTank(r);var h=new G(e.gameCanvas.gameRenderer.canvas,100,250,s,i);return e.gameCanvas.addPlayerTank(h),e}return Q(i,t),i}(Z),it=function(t){function i(i){var e=this,n=new B(700,150,30,250),s=new A("#obstacle-canvas",1e3,500,[n]);e=t.call(this,s,i)||this;var o=[new m(0,0,0,0,0,!0,i)],a=new X(e.gameCanvas.gameRenderer.canvas,900,250,s,o,i);e.gameCanvas.addEnemyTank(a);var r=new G(e.gameCanvas.gameRenderer.canvas,200,250,s,i);return e.gameCanvas.addPlayerTank(r),e}return Q(i,t),i}(Z),et=function(t){function i(i){var e=this,n=new B(250,100,600,40),s=new B(100,350,600,40),o=new A("#obstacle-canvas",1e3,500,[n,s]);e=t.call(this,o,i)||this;var a=[new v(0,0,0,0,0,!0,i)],r=new S(e.gameCanvas,e.obstacleCanvas,!1),h=new j(e.gameCanvas.gameRenderer.canvas,900,50,o,a,[],r,i);e.gameCanvas.addEnemyTank(h);var c=new G(e.gameCanvas.gameRenderer.canvas,50,450,o,i);return e.gameCanvas.addPlayerTank(c),e}return Q(i,t),i}(Z),nt=function(t){function i(i){var e=this,n=new B(100,100,200,100),s=new B(700,100,30,100),o=new B(700,350,30,100),a=new A("#obstacle-canvas",1e3,500,[n,s,o]);e=t.call(this,a,i)||this;var r=[new v(0,0,0,0,0,!0,i)],h=[new m(0,0,0,0,0,!0,i)],c=new S(e.gameCanvas,e.obstacleCanvas,!1),u=new j(e.gameCanvas.gameRenderer.canvas,800,300,a,r,[],c,i),l=new X(e.gameCanvas.gameRenderer.canvas,800,100,a,h,i),d=new K(e.gameCanvas.gameRenderer.canvas,800,200,a,i);e.gameCanvas.addEnemyTank(u),e.gameCanvas.addEnemyTank(l),e.gameCanvas.addEnemyTank(d);var p=new G(e.gameCanvas.gameRenderer.canvas,200,250,a,i);return e.gameCanvas.addPlayerTank(p),e}return Q(i,t),i}(Z),st=function(t){function i(i){var e=this,n=new B(100,100,200,100),s=new B(700,100,30,300),o=new A("#obstacle-canvas",1e3,500,[n,s]);e=t.call(this,o,i)||this;var a=[new b(0,0,!0,i),new b(0,0,!0,i),new b(0,0,!0,i)],r=[new b(0,0,!0,i),new b(0,0,!0,i),new b(0,0,!0,i)],h=[new b(0,0,!0,i),new b(0,0,!0,i),new b(0,0,!0,i)],c=new S(e.gameCanvas,e.obstacleCanvas,!1),u=new S(e.gameCanvas,e.obstacleCanvas,!1),l=new S(e.gameCanvas,e.obstacleCanvas,!1),d=new z(e.gameCanvas.gameRenderer.canvas,800,100,o,[new v(0,0,0,0,0,!0,i)],a,c,i),p=new z(e.gameCanvas.gameRenderer.canvas,800,200,o,[new v(0,0,0,0,0,!0,i)],r,u,i),f=new z(e.gameCanvas.gameRenderer.canvas,800,300,o,[new v(0,0,0,0,0,!0,i)],h,l,i);e.gameCanvas.addEnemyTank(d),e.gameCanvas.addEnemyTank(p),e.gameCanvas.addEnemyTank(f);var y=new G(e.gameCanvas.gameRenderer.canvas,200,250,o,i);return e.gameCanvas.addPlayerTank(y),e}return Q(i,t),i}(Z),ot=function(t){function i(i){var e=this,n=new B(700,100,30,300),s=new A("#obstacle-canvas",1e3,500,[n]);e=t.call(this,s,i)||this;var o=[new m(0,0,0,0,0,!0,i),new m(0,0,0,0,0,!0,i),new m(0,0,0,0,0,!0,i)],a=[new m(0,0,0,0,0,!0,i),new m(0,0,0,0,0,!0,i),new m(0,0,0,0,0,!0,i)],r=[new m(0,0,0,0,0,!0,i),new m(0,0,0,0,0,!0,i),new m(0,0,0,0,0,!0,i)],h=[new M(0,0,!0,i),new M(0,0,!0,i)],c=[new M(0,0,!0,i),new M(0,0,!0,i)],u=[new M(0,0,!0,i),new M(0,0,!0,i)],l=new S(e.gameCanvas,e.obstacleCanvas,!1),d=new S(e.gameCanvas,e.obstacleCanvas,!1),p=new S(e.gameCanvas,e.obstacleCanvas,!1),f=new J(e.gameCanvas.gameRenderer.canvas,800,100,s,o,h,l,i),y=new J(e.gameCanvas.gameRenderer.canvas,800,200,s,a,c,d,i),v=new J(e.gameCanvas.gameRenderer.canvas,800,300,s,r,u,p,i);e.gameCanvas.addEnemyTank(f),e.gameCanvas.addEnemyTank(y),e.gameCanvas.addEnemyTank(v);var g=new G(e.gameCanvas.gameRenderer.canvas,200,250,s,i);return e.gameCanvas.addPlayerTank(g),e}return Q(i,t),i}(Z),at=function(t){function i(i){var e=this,n=new B(0,120,400,50),s=new B(600,120,400,50),o=new B(0,330,400,50),a=new B(600,330,400,50),r=new A("#obstacle-canvas",1e3,500,[n,s,o,a]);e=t.call(this,r,i)||this;var h=[new m(0,0,0,0,0,!0,i)],c=new X(e.gameCanvas.gameRenderer.canvas,900,50,r,h,i),u=[new m(0,0,0,0,0,!0,i)],l=new X(e.gameCanvas.gameRenderer.canvas,900,250,r,u,i),d=[new m(0,0,0,0,0,!0,i)],p=new X(e.gameCanvas.gameRenderer.canvas,900,430,r,d,i),f=[new m(0,0,0,0,0,!0,i)],y=new X(e.gameCanvas.gameRenderer.canvas,100,50,r,f,i),v=[new m(0,0,0,0,0,!0,i)],g=new X(e.gameCanvas.gameRenderer.canvas,100,250,r,v,i);e.gameCanvas.addEnemyTank(c),e.gameCanvas.addEnemyTank(l),e.gameCanvas.addEnemyTank(p),e.gameCanvas.addEnemyTank(y),e.gameCanvas.addEnemyTank(g);var P=new G(e.gameCanvas.gameRenderer.canvas,100,430,r,i);return e.gameCanvas.addPlayerTank(P),e}return Q(i,t),i}(Z);new(function(){function t(t){var i=this;this.sliderWidth=Math.min(.8*window.innerWidth,600),this.numLevels=t,this.audioManager=new d,this.audioManager.loadAllAudio().then((function(){i.audioManager.playBackgroundMusic()})),this.activeLevelNumber=1,this.activeLevel=new $(this.audioManager),this.setHeader(),this.createSlider(),this.createJumbotron()}return t.prototype.setHeader=function(){var t=document.getElementById("main-header");t&&(t.textContent="Treads V".concat(s))},t.prototype.startActiveLevel=function(){switch(this.activeLevel.stop(),this.activeLevelNumber){case 1:default:this.activeLevel=new $(this.audioManager);break;case 2:this.activeLevel=new tt(this.audioManager);break;case 3:this.activeLevel=new it(this.audioManager);break;case 4:this.activeLevel=new et(this.audioManager);break;case 5:this.activeLevel=new nt(this.audioManager);break;case 6:this.activeLevel=new st(this.audioManager);break;case 7:this.activeLevel=new ot(this.audioManager);break;case 8:this.activeLevel=new at(this.audioManager)}this.activeLevel.start()},t.prototype.createSlider=function(){var t=this,i=10,e=10,s=this.sliderWidth-e-i,o=n.m4Y().domain([1,this.numLevels]).range([0,s]).clamp(!0),a=n.Ltv("#slider").append("svg").attr("width",this.sliderWidth).attr("height",50).append("g").attr("transform","translate(".concat(e,", 30)"));a.append("g").call(n.l78(o).ticks(this.numLevels).tickFormat(n.GPZ("1")));var r=a.append("circle").attr("cx",o(this.activeLevelNumber)).attr("cy",-10).attr("r",10).style("fill","red").style("cursor","ew-resize"),h=n.$Er().on("drag",(function(i){var n=i.x-e,s=Math.round(o.invert(n));r.attr("cx",o(s)),t.updateActiveLevel(s)}));r.call(h)},t.prototype.createJumbotron=function(){for(var t=this,i=n.Ltv("#jumbotron"),e=n.m4Y().domain([1,this.numLevels]).range(["lightblue","lightcoral"]),s=function(n){var s=i.append("div").attr("class","jumbotron-box inactive").on("click",(function(){return t.updateActiveLevel(n)})).append("svg").attr("width","100%").attr("height","100%");s.append("rect").attr("width","100%").attr("height","100%").attr("fill",e(n)),s.append("text").attr("x","50%").attr("y","50%").attr("dominant-baseline","middle").attr("text-anchor","middle").text("Level ".concat(n))},o=1;o<=this.numLevels;o++)s(o);this.updateActiveLevel(this.activeLevelNumber)},t.prototype.updateActiveLevel=function(t){this.activeLevelNumber=t,n.Ubm(".jumbotron-box").classed("active",(function(i,e){return e+1===t})).classed("inactive",(function(i,e){return e+1!==t})),n.Ltv("circle").attr("cx",n.m4Y().domain([1,this.numLevels]).range([0,this.sliderWidth-20])(t)),this.startActiveLevel()},t}())(8)}},t=>{t.O(0,[96],(()=>{return i=144,t(t.s=i);var i}));t.O()}]);
//# sourceMappingURL=main.8f7a71d7f2f245991c69.bundle.js.map