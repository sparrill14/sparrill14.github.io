"use strict";(self.webpackChunktreads=self.webpackChunktreads||[]).push([[792],{113:(t,i,e)=>{e(836);e.p;var s=e(180);const n="1.4.3",o=e.p+"8c0fb26f73ba98ca3df0.mp3",a=e.p+"0686824ec093b500e317.mp3",r=e.p+"b522d2830ca0e8728583.mp3",h=e.p+"3020ab3b4a3ad7a2f87e.mp3";var c;!function(t){t[t.TANK_FIRE=1]="TANK_FIRE",t[t.TANK_DESTROY=2]="TANK_DESTROY",t[t.BOMB_EXPLODE=3]="BOMB_EXPLODE",t[t.BACKGROUND_MUSIC=4]="BACKGROUND_MUSIC"}(c||(c={}));var u,l,d=function(){function t(){this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.audioBuffers=new Map,this.backgroundMusicSource=null}return t.prototype.loadAllAudio=function(){var t=[this.loadAudio(c.TANK_FIRE,h),this.loadAudio(c.TANK_DESTROY,r),this.loadAudio(c.BOMB_EXPLODE,a),this.loadAudio(c.BACKGROUND_MUSIC,o)];return Promise.all(t)},t.prototype.loadAudio=function(t,i){var e=this;return fetch(i).then((function(t){return t.arrayBuffer()})).then((function(t){return e.audioContext.decodeAudioData(t)})).then((function(i){e.audioBuffers.set(t,i)})).catch((function(t){return console.error("Error loading audio file: ".concat(i),t)}))},t.prototype.play=function(t){var i=this.audioBuffers.get(t);if(i){var e=this.audioContext.createBufferSource();e.buffer=i,e.connect(this.audioContext.destination),e.start(0)}else console.warn("Audio buffer for ".concat(t," not found"))},t.prototype.getAudioContext=function(){return this.audioContext},t.prototype.playBackgroundMusic=function(){var t=this.audioBuffers.get(c.BACKGROUND_MUSIC);t?(this.stopBackgroundMusic(),this.backgroundMusicSource=this.audioContext.createBufferSource(),this.backgroundMusicSource.buffer=t,this.backgroundMusicSource.loop=!0,this.backgroundMusicSource.connect(this.audioContext.destination),this.backgroundMusicSource.start(0)):console.warn("Background music buffer not found")},t.prototype.stopBackgroundMusic=function(){this.backgroundMusicSource&&(this.backgroundMusicSource.stop(0),this.backgroundMusicSource.disconnect(),this.backgroundMusicSource=null)},t}(),f=(u=function(t,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},u(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}u(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),p=function(){function t(t,i,e,s,n,o,a,r,h){this.xPos=t,this.yPos=i,this.theta=e,this.speed=s,this.xVelocity=Math.cos(this.theta)*this.speed,this.yVelocity=Math.sin(this.theta)*this.speed,this.bounces=0,this.maxBounces=n,this.canvasWidth=o,this.canvasHeight=a,this.isDestroyed=r,this.audioManager=h}return t.prototype.updatePosition=function(t){var i=this;this.xPos+=this.xVelocity,this.yPos+=this.yVelocity,(this.xPos<=0||this.xPos>this.canvasWidth)&&(this.xVelocity=-this.xVelocity,this.bounces++),(this.yPos<=0||this.yPos>this.canvasHeight)&&(this.yVelocity=-this.yVelocity,this.bounces++),t.obstacles.forEach((function(t){if(i.xPos>t.xLeft&&i.xPos<t.xRight&&i.yPos>t.yTop&&i.yPos<t.yBottom){i.bounces++;var e=Math.abs(i.xPos-t.xLeft),s=Math.abs(i.xPos-t.xRight),n=Math.abs(i.yPos-t.yTop),o=Math.abs(i.yPos-t.yBottom),a=Math.min(e,s,n,o);a===n?(i.yPos=t.yTop-1,i.yVelocity=-i.yVelocity):a===o?(i.yPos=t.yBottom+1,i.yVelocity=-i.yVelocity):a===e?(i.xPos=t.xLeft-1,i.xVelocity=-i.xVelocity):a===s&&(i.xPos=t.xRight+1,i.xVelocity=-i.xVelocity)}})),this.bounces>this.maxBounces&&(this.isDestroyed=!0)},t.prototype.checkEnemyHit=function(t){var i=this;t.forEach((function(t){t.isDestroyed||i.xPos>t.xLeft&&i.xPos<t.xRight&&i.yPos>t.yTop&&i.yPos<t.yBottom&&(i.isDestroyed=!0,t.isDestroyed=!0,i.audioManager.play(c.TANK_DESTROY),console.log("Enemy hit!!!"))}))},t.prototype.checkPlayerHit=function(t){t.isDestroyed||this.xPos>t.xLeft&&this.xPos<t.xRight&&this.yPos>t.yTop&&this.yPos<t.yBottom&&(t.isDestroyed=!0,t.isDestroyed=!0,this.isDestroyed=!0,console.log("Player Hit!!!"))},t.prototype.reload=function(t,i,e,s,n,o){this.xPos=t,this.yPos=i,this.theta=e,this.isDestroyed=s,this.xVelocity=Math.cos(this.theta)*this.speed,this.yVelocity=Math.sin(this.theta)*this.speed,this.canvasWidth=n,this.canvasHeight=o,this.bounces=0},t.prototype.draw=function(t){t.beginPath(),t.arc(this.xPos,this.yPos,4,0,2*Math.PI),t.fillStyle="white",t.fill(),t.lineWidth=2,t.strokeStyle="black",t.stroke(),t.closePath()},t.prototype.willHitPlayerTank=function(t,i){for(var e=this.xPos,s=this.yPos,n=this.xVelocity,o=this.yVelocity,a=0;a<=this.maxBounces;)if(s+=o,((e+=n)<=0||e>this.canvasWidth)&&(n=-n,a++),(s<=0||s>this.canvasHeight)&&(o=-o,a++),t.obstacles.forEach((function(t){e>t.xLeft&&e<t.xRight&&s>t.yTop&&s<t.yBottom&&(a++,n=-n,o=-o)})),e>i.xLeft&&e<i.xRight&&s>i.yTop&&s<i.yBottom)return!0;return!1},t}(),y=function(t){function i(i,e,s,n,o,a,r){return t.call(this,i,e,s,4,1,n,o,a,r)||this}return f(i,t),i}(p),v=function(t){function i(i,e,s,n,o,a,r){return t.call(this,i,e,s,4,0,n,o,a,r)||this}return f(i,t),i}(p),m=function(t){function i(i,e,s,n,o,a,r){return t.call(this,i,e,s,6,2,n,o,a,r)||this}return f(i,t),i}(p),g=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),P=function(){function t(t,i,e,s,n,o,a){this.x=t,this.y=i,this.fragmentRadius=e,this.fragmentColor=s,this.velocityX=n,this.velocityY=o,this.blastRadius=a,this.life=a}return t.prototype.update=function(){this.x+=this.velocityX,this.y+=this.velocityY,this.life-=1},t.prototype.draw=function(t){t.beginPath(),t.arc(this.x,this.y,this.fragmentRadius*(this.life/this.blastRadius),0,2*Math.PI,!1),t.fillStyle=this.fragmentColor,t.fill(),t.closePath()},t}(),w=function(){function t(t,i,e,s,n){this.xPos=t,this.yPos=i,this.blastRadius=e,this.isDestroyed=s,this.audioManager=n,this.blastDelayMS=5e3,this.fuseStartTime=0,this.shouldFlashRed=!1,this.isExploding=!1,this.fragments=[]}return t.prototype.checkEnemyHit=function(t){var i=this;t.forEach((function(t){t.isDestroyed||i.isExploding&&i.isExploding&&i.isPointInsideBlastRadius(t.xPos+t.tankMidpoint,t.yPos+t.tankMidpoint)&&(t.isDestroyed=!0,console.log("Enemy hit with bomb!!!"))}))},t.prototype.checkPlayerHit=function(t){t.isDestroyed||this.isExploding&&(this.isPointInsideBlastRadius(t.xLeft,t.yTop)||this.isPointInsideBlastRadius(t.xRight,t.yTop)||this.isPointInsideBlastRadius(t.xLeft,t.yBottom)||this.isPointInsideBlastRadius(t.xRight,t.yBottom)||this.isPointInsideBlastRadius(t.xPos,t.yPos))&&(t.isDestroyed=!0,console.log("Player Hit with bomb!!!"))},t.prototype.setFuse=function(){var t=this;this.isDestroyed||(this.fuseStartTime=performance.now(),this.animateFuse(),setTimeout((function(){t.createFragments(),t.audioManager.play(c.BOMB_EXPLODE),t.isExploding=!0,setTimeout((function(){t.isExploding=!1,t.isDestroyed=!0}),1e3)}),this.blastDelayMS))},t.prototype.animateFuse=function(){var t=this;if(!this.isDestroyed){var i=performance.now()-this.fuseStartTime;if(this.blastDelayMS-i<=0)this.isDestroyed=!0;else{var e=i/this.blastDelayMS;this.shouldFlashRed=[.25,.5,.625,.75,.8125,.875,.90625,.9375,.96875,.984375].some((function(t){return e>t&&e<t+.01})),requestAnimationFrame((function(){return t.animateFuse()}))}}},t.prototype.isPointInsideBlastRadius=function(t,i){var e=t-this.xPos,s=i-this.yPos;return Math.sqrt(e*e+s*s)<=this.blastRadius},t.prototype.createFragments=function(){for(var t=0;t<50;t++){var i=2*Math.random()*Math.PI,e=5*Math.random()+2,s=Math.cos(i)*e,n=Math.sin(i)*e,o=new P(this.xPos,this.yPos,2*Math.random()+1,"rgba(255, 69, 0, 1)",s,n,this.blastRadius);this.fragments.push(o)}},t.prototype.draw=function(t){this.isExploding?this.drawExplosion(t):(t.beginPath(),t.arc(this.xPos,this.yPos,15,0,2*Math.PI),t.fillStyle=this.shouldFlashRed?"red":"yellow",t.fill(),t.lineWidth=3,t.strokeStyle="black",t.stroke(),t.closePath(),t.beginPath(),t.arc(this.xPos,this.yPos,10,0,2*Math.PI),t.lineWidth=1.5,t.strokeStyle="black",t.stroke(),t.closePath())},t.prototype.drawExplosion=function(t){this.fragments.forEach((function(i){i.update(),i.draw(t)})),this.fragments=this.fragments.filter((function(t){return t.life>0}))},t}(),x=function(t){function i(i,e,s,n){return t.call(this,i,e,50,s,n)||this}return g(i,t),i}(w),b=function(t){function i(i,e,s,n){return t.call(this,i,e,80,s,n)||this}return g(i,t),i}(w),T=(function(t){function i(i,e,s,n){return t.call(this,i,e,20,s,n)||this}g(i,t)}(w),function(t){function i(i,e,s,n){return t.call(this,i,e,100,s,n)||this}return g(i,t),i.prototype.draw=function(t){this.isExploding?this.drawExplosion(t):(t.save(),t.translate(this.xPos,this.yPos),t.scale(1,1.3),t.beginPath(),t.moveTo(0,0),t.bezierCurveTo(12,-12,24,0,0,24),t.bezierCurveTo(-24,0,-12,-12,0,0),t.fillStyle=this.shouldFlashRed?"red":"#FFC2D1",t.fill(),t.lineWidth=3,t.strokeStyle="black",t.stroke(),t.closePath(),t.restore())},i}(w)),M=function(){function t(t){this.canvas=t,this.playerWin=!1,this.enemyWin=!1;var i=this.canvas.getContext("2d");if(!i)throw new Error("2d context not supported or canvas element not found.");this.context=i}return t.prototype.initializeCanvas=function(t,i){this.canvas.width=t,this.canvas.height=i},t.prototype.renderLevelOverScreen=function(){if(!this.context)throw new Error("2d context not supported or canvas element not found.");var t=this.playerWin?"Win":this.enemyWin?"Lose":"";if(""!==t){this.context.font="".concat(100,"px Arial"),this.context.lineWidth=5,this.context.strokeStyle=this.playerWin?"green":"red",this.context.fillStyle=this.playerWin?"green":"red";var i=this.context.measureText(t).width,e=(this.canvas.width-i)/2,s=this.canvas.height/2+50;this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.strokeText(t,e,s),this.context.fillText(t,e,s)}},t.prototype.render=function(t,i,e){var s=this;if(!this.context)throw new Error("2d context not supported or canvas element not found.");this.context.clearRect(0,0,this.canvas.width,this.canvas.height),i.isDestroyed?this.enemyWin=!0:e.every((function(t){return t.isDestroyed}))?this.playerWin=!0:(i.updatePosition(i),i.aim(i.aimXPos,i.aimYPos,i),e.forEach((function(t){t.updatePosition(i),t.aim(t.aimXPos,t.aimYPos,i),t.shoot(i),t.plantBomb(i)})),e.forEach((function(t){t.draw(s.context),t.reticule.draw(s.context,t.xPos,t.yPos,t.aimXPos,t.aimYPos),t.ammunition.forEach((function(e){e.isDestroyed||(e.updatePosition(t.obstacleCanvas),e.checkPlayerHit(i),e.draw(s.context))})),t.bombs.forEach((function(t){t.isDestroyed&&!t.isExploding||(t.checkPlayerHit(i),t.draw(s.context))}))})),i.draw(this.context),i.reticule.draw(this.context,i.xPos,i.yPos,i.aimXPos,i.aimYPos),i.ammunition.forEach((function(t){t.isDestroyed||(t.updatePosition(i.obstacleCanvas),t.checkEnemyHit(e),t.draw(s.context))})),i.bombs.forEach((function(t){t.isDestroyed&&!t.isExploding||(t.checkEnemyHit(e),t.draw(s.context))})))},t}(),k=function(){function t(t,i,e,s){this.playerTank=null,this.enemyTanks=[],this.animationFrameID=null,this.width=i,this.height=e,this.obstacleCanvas=s,this.animationFrameID=null,this.gameRenderer=new M(document.querySelector(t)),this.gameRenderer.initializeCanvas(this.width,this.height),this.lastRenderTime=0,window.addEventListener("resize",this.resizeCanvas.bind(this))}return t.prototype.start=function(){this.animationFrameID||(this.animationFrameID=requestAnimationFrame(this.gameLoop.bind(this)))},t.prototype.stop=function(){this.animationFrameID&&(cancelAnimationFrame(this.animationFrameID),this.animationFrameID=null)},t.prototype.resizeCanvas=function(){},t.prototype.gameLoop=function(t){if(null!=this.playerTank){var i=t-this.lastRenderTime;this.gameRenderer.render(i,this.playerTank,this.enemyTanks),(this.gameRenderer.enemyWin||this.gameRenderer.playerWin)&&(this.stop(),this.obstacleCanvas.clearObstacles(),this.gameRenderer.renderLevelOverScreen()),this.lastRenderTime=t,this.animationFrameID=requestAnimationFrame(this.gameLoop.bind(this))}},t.prototype.addEnemyTank=function(t){this.enemyTanks.push(t)},t.prototype.addPlayerTank=function(t){this.playerTank=t},t}(),S=function(t,i){this.g=0,this.h=0,this.f=0,this.walkable=!0,this.parent=null,this.x=t,this.y=i},C=function(){function t(t,i,e){if(void 0===e&&(e=!0),this.grid=[],this.gridCellWidth=30,this.path=[],!t||!i||e)return this.gridXLength=0,this.gridYLength=0,void(this.stationary=!0);this.stationary=!1,this.gridXLength=Math.floor(t.width/this.gridCellWidth),this.gridYLength=Math.floor(t.height/this.gridCellWidth);for(var s=0;s<this.gridXLength;s++){this.grid[s]=[];for(var n=function(t){o.grid[s][t]=new S(s,t);var e=s*o.gridCellWidth,n=e+o.gridCellWidth,a=t*o.gridCellWidth,r=a+o.gridCellWidth;o.grid[s][t].walkable=!i.obstacles.some((function(t){return n>t.xLeft&&e<t.xRight&&r>t.yTop&&a<t.yBottom}))},o=this,a=0;a<this.gridYLength;a++)n(a)}}return t.prototype.reset=function(){for(var t=0;t<this.gridXLength;t++)for(var i=0;i<this.gridYLength;i++)this.grid[t][i].f=0,this.grid[t][i].g=0,this.grid[t][i].h=0,this.grid[t][i].parent=null},t.prototype.getNodeFromTank=function(t){if(this.stationary)return new S(0,0);var i=Math.floor((t.xPos+t.size/2)/this.gridCellWidth),e=Math.floor((t.yPos+t.size/2)/this.gridCellWidth);return i=Math.max(0,Math.min(i,this.gridXLength-1)),e=Math.max(0,Math.min(e,this.gridYLength-1)),this.grid[i][e]},t.prototype.getRandomNodeInRadiusOfTarget=function(t,i){for(var e=[],s=0;s<this.gridXLength;s++)for(var n=0;n<this.gridYLength;n++){var o=this.grid[s][n],a=Math.sqrt(Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2));a<=i+1&&a>=i-1&&o.walkable&&e.push(o)}return e[Math.floor(Math.random()*e.length)]},t.prototype.aStar=function(t,i){for(var e=[t],s=new Set;e.length>0;){var n=e.sort((function(t,i){return t.f-i.f}))[0];if(n.x===i.x&&n.y===i.y){for(var o=[];null!==n;)o.unshift(n),n=n.parent;return o}e.splice(e.indexOf(n),1),s.add(n);for(var a=0,r=this.getWalkableNeighbors(n);a<r.length;a++){var h=r[a];if(!s.has(h)){var c=n.g+(h.x-n.x==0||h.y-n.y==0?1:Math.SQRT2);if(e.includes(h)){if(c>=h.g)continue}else e.push(h);h.parent=n,h.g=c,h.h=Math.round(Math.sqrt(Math.pow(h.x-i.x,2)+Math.pow(h.y-i.y,2))),h.f=h.g+h.h}}}return null},t.prototype.getWalkableNeighbors=function(t){for(var i=[],e=-1;e<=1;e++)for(var s=-1;s<=1;s++)if(0!==e||0!==s){var n=t.x+e,o=t.y+s;n>=0&&o>=0&&n<this.gridXLength&&o<this.gridYLength&&this.grid[n][o].walkable&&i.push(this.grid[n][o])}return i},t}(),E=function(){function t(t,i,e,s){this.xLeft=t,this.yTop=i,this.width=e,this.height=s,this.yBottom=this.yTop+this.height,this.xRight=this.xLeft+this.width}return t.prototype.draw=function(t){t.beginPath(),t.rect(this.xLeft,this.yTop,this.width,this.height),t.fillStyle="black",t.fill()},t}(),D=function(){function t(t,i,e,s){var n=this;this.obstacles=[],this.width=i,this.height=e,this.obstacles=s,window.addEventListener("resize",this.resizeCanvas.bind(this)),this.obstacleCanvas=document.querySelector(t),this.obstacleCanvas.width=i,this.obstacleCanvas.height=e,s.forEach((function(t){t.draw(n.obstacleCanvas.getContext("2d"))}))}return t.prototype.clearObstacles=function(){var t=this.obstacleCanvas.getContext("2d");t&&t.clearRect(0,0,this.obstacleCanvas.width,this.obstacleCanvas.height),this.obstacles=[]},t.prototype.resizeCanvas=function(){},t}(),R=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),O=function(){function t(t,i,e,s){this.reticuleWidth=5,this.color=i,this.dashPattern=t,this.renderReticule=e,this.tankSize=s}return t.prototype.draw=function(t,i,e,s,n){this.renderReticule&&(t.strokeStyle=this.color,t.setLineDash(this.dashPattern),t.beginPath(),t.moveTo(i+this.tankSize/2,e+this.tankSize/2),t.lineTo(s,n),t.lineWidth=this.reticuleWidth,t.stroke())},t}(),L=function(t){function i(){return t.call(this,[0,0],"blue",!1,0)||this}return R(i,t),i}(O),B=(function(t){function i(i){return t.call(this,[5,5],"blue",!0,i)||this}R(i,t)}(O),function(t){function i(i,e){return t.call(this,[4,1],e,!0,i)||this}R(i,t)}(O),function(t){function i(i,e,s){var n=t.call(this,[1,1],e,!0,i)||this;return n.maxReticuleLength=s,n}return R(i,t),i.prototype.draw=function(t,i,e,s,n){var o=s-i,a=n-e,r=Math.sqrt(Math.pow(o,2)+Math.pow(a,2))/this.maxReticuleLength,h=10*r+2,c=10*(1-r)+5;if(this.renderReticule){t.strokeStyle=this.color,t.setLineDash([h,c]),t.beginPath(),t.moveTo(i+this.tankSize/2,e+this.tankSize/2),t.lineTo(s,n),t.lineWidth=this.reticuleWidth,t.stroke(),t.setLineDash([]);var u=10;t.beginPath(),t.moveTo(s-u,n-u),t.lineTo(s+u,n+u),t.stroke(),t.beginPath(),t.moveTo(s-u,n+u),t.lineTo(s+u,n-u),t.stroke()}},i}(O));!function(t){t[t.NORTH=1]="NORTH",t[t.SOUTH=2]="SOUTH",t[t.EAST=3]="EAST",t[t.WEST=4]="WEST",t[t.NORTHEAST=5]="NORTHEAST",t[t.NORTHWEST=6]="NORTHWEST",t[t.SOUTHEAST=7]="SOUTHEAST",t[t.SOUTHWEST=8]="SOUTHWEST",t[t.UNKNOWN=9]="UNKNOWN"}(l||(l={}));var A=function(){function t(t,i,e,s,n,o,a,r,h,c,u){this.gunBarrellWidth=7,this.isDestroyed=!1,this.twoPi=2*Math.PI,this.lastDirectionMoved=l.UNKNOWN,this.wasLastMoveBlocked=!1,this.consecutiveDirectionMoves=0,this.ammunition=[],this.bombs=[],this.reticule=i,this.xPos=e,this.yPos=s,this.xLeft=e,this.xRight=e+o,this.yTop=s,this.yBottom=s+o,this.speed=n,this.size=o,this.color=a,this.canvasWidth=t.width,this.canvasHeight=t.height,this.obstacleCanvas=r,this.tankMidpoint=this.size/2,this.ammunition=h,this.maxAmmunition=h.length,this.bombs=c,this.maxBombs=c.length,this.audioManager=u,this.aimAngle=90;var d=t.getBoundingClientRect();this.xOffset=d.left,this.yOffset=d.top,this.aimXPos=t.width/2,this.aimYPos=t.height/2}return t.prototype.draw=function(t){if(!this.isDestroyed){t.fillStyle=this.color,t.fillRect(this.xPos,this.yPos,this.size,this.size),t.setLineDash([]),t.lineJoin="bevel",t.strokeStyle="black",t.lineWidth=2,t.strokeRect(this.xPos,this.yPos,this.size,this.size),t.beginPath(),t.arc(this.xPos+this.tankMidpoint,this.yPos+this.tankMidpoint,this.size/3,0,this.twoPi),t.stroke();var i=this.xPos+this.tankMidpoint+Math.cos(this.aimAngle)*this.size,e=this.yPos+this.tankMidpoint+Math.sin(this.aimAngle)*this.size;t.beginPath(),t.moveTo(this.xPos+this.tankMidpoint,this.yPos+this.tankMidpoint),t.lineTo(i,e),t.lineWidth=this.gunBarrellWidth,t.stroke()}},t.prototype.updatePosition=function(t){},t.prototype.aim=function(t,i,e){},t.prototype.shoot=function(t){},t.prototype.plantBomb=function(t){},t.prototype.moveInLastDirectionMoved=function(){this.moveInCardinalDirection(this.lastDirectionMoved)},t.prototype.getRandomDirection=function(){var t=Object.keys(l).map((function(t){return Number.parseInt(t)})).filter((function(t){return!Number.isNaN(t)}));return t[Math.floor(Math.random()*t.length)]},t.prototype.moveInCardinalDirection=function(t){switch(t){case l.NORTH:this.moveNorth();break;case l.SOUTH:this.moveSouth();break;case l.EAST:this.moveEast();break;case l.WEST:this.moveWest();break;case l.NORTHEAST:this.moveNorthEast();break;case l.NORTHWEST:this.moveNorthWest();break;case l.SOUTHEAST:this.moveSouthEast();break;case l.SOUTHWEST:this.moveSouthWest();break;default:var i=Object.values(l).filter((function(t){return"number"==typeof t})),e=Math.floor(Math.random()*i.length);this.moveInCardinalDirection(i[e])}},t.prototype.moveNorth=function(){this.lastDirectionMoved==l.NORTH?this.consecutiveDirectionMoves+=1:this.consecutiveDirectionMoves=0,this.lastDirectionMoved=l.NORTH;for(var t=!1,i=0,e=this.obstacleCanvas.obstacles;i<e.length;i++){var s=e[i];if(this.yPos-this.speed<s.yTop+s.height&&this.yPos>s.yTop&&s.xLeft<this.xPos+this.size&&this.xPos<s.xRight){this.yPos=s.yBottom,t=!0;break}}t?this.wasLastMoveBlocked=!0:this.yPos=Math.max(this.yPos-this.speed,0)},t.prototype.moveSouth=function(){this.lastDirectionMoved==l.SOUTH?this.consecutiveDirectionMoves+=1:this.consecutiveDirectionMoves=0,this.lastDirectionMoved=l.SOUTH;for(var t=!1,i=0,e=this.obstacleCanvas.obstacles;i<e.length;i++){var s=e[i];if(this.yPos+this.speed+this.size>s.yTop&&this.yPos<s.yTop+s.height&&s.xLeft<this.xPos+this.size&&this.xPos<s.xRight){this.yPos=s.yTop-this.size,t=!0;break}}t?this.wasLastMoveBlocked=!0:this.yPos=Math.min(this.yPos+this.speed,this.canvasHeight-this.size)},t.prototype.moveWest=function(){this.lastDirectionMoved==l.WEST?this.consecutiveDirectionMoves+=1:this.consecutiveDirectionMoves=0,this.lastDirectionMoved=l.WEST;for(var t=!1,i=0,e=this.obstacleCanvas.obstacles;i<e.length;i++){var s=e[i];if(this.xPos-this.speed<s.xRight&&this.xPos>s.xLeft&&s.yTop<this.yPos+this.size&&this.yPos<s.yBottom){this.xPos=s.xRight,t=!0;break}}t?this.wasLastMoveBlocked=!0:this.xPos=Math.max(this.xPos-this.speed,0)},t.prototype.moveEast=function(){this.lastDirectionMoved==l.EAST?this.consecutiveDirectionMoves+=1:this.consecutiveDirectionMoves=0,this.lastDirectionMoved=l.EAST;for(var t=!1,i=0,e=this.obstacleCanvas.obstacles;i<e.length;i++){var s=e[i];if(this.xPos+this.speed+this.size>s.xLeft&&this.xPos<s.xLeft+s.width&&s.yTop<this.yPos+this.size&&this.yPos<s.yBottom){this.xPos=s.xLeft-this.size,t=!0;break}}t?this.wasLastMoveBlocked=!0:this.xPos=Math.min(this.xPos+this.speed,this.canvasWidth-this.size)},t.prototype.moveNorthEast=function(){this.lastDirectionMoved==l.NORTHEAST?this.consecutiveDirectionMoves+=1:this.consecutiveDirectionMoves=0,this.lastDirectionMoved=l.NORTHEAST;for(var t=!1,i=!1,e=0,s=this.obstacleCanvas.obstacles;e<s.length;e++){var n=s[e];!t&&this.yPos-this.speed<n.yTop+n.height&&this.yPos>n.yTop&&n.xLeft<this.xPos+this.size&&this.xPos<n.xRight&&(this.yPos=n.yBottom,t=!0),!i&&this.xPos+this.speed+this.size>n.xLeft&&this.xPos<n.xLeft+n.width&&n.yTop<this.yPos+this.size&&this.yPos<n.yBottom&&(this.xPos=n.xLeft-this.size,i=!0)}t&&i&&(this.wasLastMoveBlocked=!0),t||(this.yPos=Math.max(this.yPos-this.speed,0)),i||(this.xPos=Math.min(this.xPos+this.speed,this.canvasWidth-this.size))},t.prototype.moveNorthWest=function(){this.lastDirectionMoved==l.NORTHWEST?this.consecutiveDirectionMoves+=1:this.consecutiveDirectionMoves=0,this.lastDirectionMoved=l.NORTHWEST;for(var t=!1,i=!1,e=0,s=this.obstacleCanvas.obstacles;e<s.length;e++){var n=s[e];!t&&this.yPos-this.speed<n.yTop+n.height&&this.yPos>n.yTop&&n.xLeft<this.xPos+this.size&&this.xPos<n.xRight&&(this.yPos=n.yBottom,t=!0),!i&&this.xPos-this.speed<n.xRight&&this.xPos>n.xLeft&&n.yTop<this.yPos+this.size&&this.yPos<n.yBottom&&(this.xPos=n.xRight,i=!0)}t&&i&&(this.wasLastMoveBlocked=!0),t||(this.yPos=Math.max(this.yPos-this.speed,0)),i||(this.xPos=Math.max(this.xPos-this.speed,0))},t.prototype.moveSouthEast=function(){this.lastDirectionMoved==l.SOUTHEAST?this.consecutiveDirectionMoves+=1:this.consecutiveDirectionMoves=0,this.lastDirectionMoved=l.SOUTHEAST;for(var t=!1,i=!1,e=0,s=this.obstacleCanvas.obstacles;e<s.length;e++){var n=s[e];!t&&this.yPos+this.speed+this.size>n.yTop&&this.yPos<n.yTop+n.height&&n.xLeft<this.xPos+this.size&&this.xPos<n.xRight&&(this.yPos=n.yTop-this.size,t=!0),!i&&this.xPos+this.speed+this.size>n.xLeft&&this.xPos<n.xLeft+n.width&&n.yTop<this.yPos+this.size&&this.yPos<n.yBottom&&(this.xPos=n.xLeft-this.size,i=!0)}t&&i&&(this.wasLastMoveBlocked=!0),t||(this.yPos=Math.min(this.yPos+this.speed,this.canvasHeight-this.size)),i||(this.xPos=Math.min(this.xPos+this.speed,this.canvasWidth-this.size))},t.prototype.moveSouthWest=function(){this.lastDirectionMoved==l.SOUTHWEST?this.consecutiveDirectionMoves+=1:this.consecutiveDirectionMoves=0,this.lastDirectionMoved=l.SOUTHWEST;for(var t=!1,i=!1,e=0,s=this.obstacleCanvas.obstacles;e<s.length;e++){var n=s[e];!t&&this.yPos+this.speed+this.size>n.yTop&&this.yPos<n.yTop+n.height&&n.xLeft<this.xPos+this.size&&this.xPos<n.xRight&&(this.yPos=n.yTop-this.size,t=!0),!i&&this.xPos-this.speed<n.xRight&&this.xPos>n.xLeft&&n.yTop<this.yPos+this.size&&this.yPos<n.yBottom&&(this.xPos=n.xRight,i=!0)}t&&i&&(this.wasLastMoveBlocked=!0),t||(this.yPos=Math.min(this.yPos+this.speed,this.canvasHeight-this.size)),i||(this.xPos=Math.max(this.xPos-this.speed,0))},t}(),W=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),_=function(t){function i(i,e,s,n,o,a,r,h,c,u,l,d,f){var p=t.call(this,i,e,s,n,o,a,h,c,u,l,f)||this;return p.aggressionFactor=15,p.path=[],p.pathRecaculationInterval=60,p.drawNavigationGrid=!1,p.aggressionFactor=r,p.navigationGrid=d,p.currentNode=p.navigationGrid.getNodeFromTank(p),p}return W(i,t),i.prototype.draw=function(i){var e,s=this;if(this.drawNavigationGrid){i.lineWidth=1;for(var n=0;n<=this.navigationGrid.gridYLength;n++)i.fillStyle="blue",i.beginPath(),i.moveTo(0,n*this.navigationGrid.gridCellWidth),i.lineTo(this.navigationGrid.gridXLength*this.navigationGrid.gridCellWidth,n*this.navigationGrid.gridCellWidth),i.stroke();for(var o=0;o<=this.navigationGrid.gridXLength;o++)i.fillStyle="blue",i.beginPath(),i.moveTo(o*this.navigationGrid.gridCellWidth,0),i.lineTo(o*this.navigationGrid.gridCellWidth,this.navigationGrid.gridXLength*this.navigationGrid.gridCellWidth),i.stroke();i.fillStyle=this.color,null===(e=this.path)||void 0===e||e.forEach((function(t,e,n){i.beginPath(),i.arc(t.x*s.navigationGrid.gridCellWidth+s.navigationGrid.gridCellWidth/2,t.y*s.navigationGrid.gridCellWidth+s.navigationGrid.gridCellWidth/2,5,0,2*Math.PI),i.fill()}))}t.prototype.draw.call(this,i)},i.prototype.updatePosition=function(t){if(this.pathRecaculationInterval-=1,null==this.path||0==this.path.length||0==this.pathRecaculationInterval){this.navigationGrid.reset();var i=this.navigationGrid.getNodeFromTank(this),e=this.navigationGrid.getNodeFromTank(t),s=this.navigationGrid.getRandomNodeInRadiusOfTarget(e,this.aggressionFactor);this.path=this.navigationGrid.aStar(i,s),this.pathRecaculationInterval=60,null==this.path&&console.log("Path is null")}else{this.currentNode=this.navigationGrid.getNodeFromTank(this);var n=this.path[0].x-this.currentNode.x,o=this.path[0].y-this.currentNode.y;if(this.wasLastMoveBlocked&&this.consecutiveDirectionMoves>2){var a=this.getRandomDirection();this.moveInCardinalDirection(a),this.consecutiveDirectionMoves=0;var r=Math.random();1===n&&0===o?r<.5?this.moveSouthEast():this.moveNorthEast():-1===n&&0===o?r<.5?this.moveNorthWest():this.moveSouthWest():0===n&&1===o?r<.5?this.moveSouthEast():this.moveSouthWest():0===n&&-1===o?r<.5?this.moveNorthWest():this.moveNorthEast():1===n&&1===o?r<.5?this.moveSouth():this.moveEast():1===n&&-1===o?r<.5?this.moveNorth():this.moveEast():-1===n&&1===o?r<.5?this.moveSouth():this.moveWest():-1===n&&-1===o&&(r<.5?this.moveNorth():this.moveWest())}else 1===n&&0===o?this.moveEast():-1===n&&0===o?this.moveWest():0===n&&1===o?this.moveSouth():0===n&&-1===o?this.moveNorth():1===n&&1===o?this.moveSouthEast():1===n&&-1===o?this.moveNorthEast():-1===n&&1===o?this.moveSouthWest():-1===n&&-1===o&&this.moveNorthWest();this.path[0].x==this.currentNode.x&&this.path[0].y==this.currentNode.y&&this.path.splice(0,1)}this.xLeft=this.xPos,this.xRight=this.xPos+this.size,this.yTop=this.yPos,this.yBottom=this.yPos+this.size},i}(A),z=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),N=function(t){function i(i,e,s,n,o,a,r,h){var c=this;return(c=t.call(this,i,new L,e,s,2,30,4,"yellow",n,o,a,r,h)||this).minTimeBetweenShotsMS=2e4,c.timeBetweenShotsIsElapsed=!0,c.minTimeBetweenBombPlantsMS=1e3,c.timeBetweenPlantsIsElapsed=!0,c}return z(i,t),i.prototype.plantBomb=function(t){var i=this;if(this.timeBetweenPlantsIsElapsed&&!this.isDestroyed){var e=this.bombs.findIndex((function(t){return t.isDestroyed}));if(-1!==e)this.bombs[e].xPos=this.xPos+this.size/2,this.bombs[e].yPos=this.yPos+this.size/2,this.bombs[e].isPointInsideBlastRadius(t.xPos+t.tankMidpoint,t.yPos+t.tankMidpoint)&&(this.bombs[e].isDestroyed=!1,this.bombs[e].setFuse(),this.timeBetweenPlantsIsElapsed=!1,setTimeout((function(){i.timeBetweenPlantsIsElapsed=!0}),this.minTimeBetweenBombPlantsMS))}},i.prototype.shoot=function(t){var i=this;if(this.timeBetweenShotsIsElapsed&&!this.isDestroyed){var e=this.ammunition.findIndex((function(t){return t.isDestroyed}));if(-1!==e)this.ammunition[e].reload(this.xPos+this.size/2,this.yPos+this.size/2,this.aimAngle,!0,this.canvasWidth,this.canvasHeight),this.ammunition[e].willHitPlayerTank(this.obstacleCanvas,t)&&(this.ammunition[e].isDestroyed=!1,this.timeBetweenShotsIsElapsed=!1,setTimeout((function(){i.timeBetweenShotsIsElapsed=!0}),this.minTimeBetweenShotsMS))}},i.prototype.aim=function(t,i,e){if(!this.isDestroyed){var s=e.xPos+e.size/2-this.xPos-this.tankMidpoint,n=e.yPos+e.size/2-this.yPos-this.tankMidpoint,o=Math.atan2(n,s);o<0&&(o+=2*Math.PI),this.aimAngle=o}},i}(_),I=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),H=function(t){function i(i,e,s,n,o){var a="#6384a1",r=[new y(0,0,0,0,0,!0,o),new y(0,0,0,0,0,!0,o),new y(0,0,0,0,0,!0,o),new y(0,0,0,0,0,!0,o),new y(0,0,0,0,0,!0,o)],h=[new x(0,0,!0,o),new x(0,0,!0,o)];return t.call(this,i,new B(30,a,i.width),e,s,2,30,a,n,r,h,o)||this}return I(i,t),i}(function(t){function i(i,e,s,n,o,a,r,h,c,u,l){var d=t.call(this,i,e,s,n,o,a,r,h,c,u,l)||this;return d.keyStates={ArrowUp:!1,ArrowDown:!1,ArrowLeft:!1,ArrowRight:!1,w:!1,a:!1,s:!1,d:!1,W:!1,A:!1,S:!1,D:!1},document.addEventListener("keydown",(function(t){d.keyStates.hasOwnProperty(t.key)&&(d.keyStates[t.key]=!0)})),document.addEventListener("keydown",(function(t){"Space"===t.code&&d.plantBomb(d)})),document.addEventListener("keyup",(function(t){d.keyStates.hasOwnProperty(t.key)&&(d.keyStates[t.key]=!1)})),i.addEventListener("mousemove",(function(t){d.aimXPos=t.clientX-d.xOffset,d.aimYPos=t.clientY-d.yOffset})),i.addEventListener("click",(function(t){d.shoot(d)})),d}return I(i,t),i.prototype.updatePosition=function(t){this.up()&&this.right()?this.moveNorthEast():this.up()&&this.left()?this.moveNorthWest():this.down()&&this.right()?this.moveSouthEast():this.down()&&this.left()?this.moveSouthWest():this.up()?this.moveNorth():this.down()?this.moveSouth():this.left()?this.moveWest():this.right()&&this.moveEast(),this.xLeft=this.xPos,this.xRight=this.xPos+this.size,this.yTop=this.yPos,this.yBottom=this.yPos+this.size},i.prototype.plantBomb=function(t){if(!this.isDestroyed){var i=this.bombs.findIndex((function(t){return t.isDestroyed}));-1!==i&&(this.bombs[i].xPos=this.xPos+this.size/2,this.bombs[i].yPos=this.yPos+this.size/2,this.bombs[i].isDestroyed=!1,this.bombs[i].setFuse())}},i.prototype.aim=function(t,i,e){if(!this.isDestroyed){var s=t-this.xPos-this.tankMidpoint,n=i-this.yPos-this.tankMidpoint,o=Math.atan2(n,s);o<0&&(o+=2*Math.PI),this.aimAngle=o}},i.prototype.shoot=function(t){if(!this.isDestroyed){var i=this.ammunition.findIndex((function(t){return t.isDestroyed}));-1!==i&&(this.audioManager.play(c.TANK_FIRE),this.ammunition[i]=new y(this.xPos+this.size/2,this.yPos+this.size/2,this.aimAngle,this.canvasWidth,this.canvasHeight,!1,this.audioManager))}},i.prototype.up=function(){return this.keyStates.ArrowUp||this.keyStates.w||this.keyStates.W},i.prototype.down=function(){return this.keyStates.ArrowDown||this.keyStates.s||this.keyStates.S},i.prototype.left=function(){return this.keyStates.ArrowLeft||this.keyStates.a||this.keyStates.A},i.prototype.right=function(){return this.keyStates.ArrowRight||this.keyStates.d||this.keyStates.D},i}(A)),F=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),j=function(t){function i(i,e,s,n,o,a,r,h){return t.call(this,i,new L,e,s,1.2,30,15,"#fd8a8a",n,o,a,r,h)||this}return F(i,t),i.prototype.shoot=function(t){var i=this.ammunition.findIndex((function(t){return t.isDestroyed}));-1!==i&&(this.ammunition[i].reload(this.xPos+this.size/2,this.yPos+this.size/2,this.aimAngle,!0,this.canvasWidth,this.canvasHeight),this.ammunition[i].willHitPlayerTank(this.obstacleCanvas,t)&&(this.ammunition[i].isDestroyed=!1))},i.prototype.aim=function(t,i,e){if(!this.isDestroyed){var s=e.xPos+e.size/2-this.xPos-this.tankMidpoint,n=e.yPos+e.size/2-this.yPos-this.tankMidpoint,o=Math.atan2(n,s);o<0&&(o+=2*Math.PI),this.aimAngle=o}},i}(_),G=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),U=function(t){function i(i,e,s,n,o,a){var r=this,h=new C;return(r=t.call(this,i,new L,e,s,0,30,0,"#ebe1b9",n,o,[],h,a)||this).aimAngleChangeAmount=0,r}return G(i,t),i.prototype.getAngleChangeAmount=function(){return Math.floor(721*Math.random())+-360},i.prototype.updatePosition=function(t){},i.prototype.shoot=function(t){var i=this.ammunition.findIndex((function(t){return t.isDestroyed}));-1!==i&&(this.ammunition[i].reload(this.xPos+this.size/2,this.yPos+this.size/2,this.aimAngle,!0,this.canvasWidth,this.canvasHeight),this.ammunition[i].willHitPlayerTank(this.obstacleCanvas,t)&&(this.ammunition[i].isDestroyed=!1))},i.prototype.aim=function(t,i,e){this.isDestroyed||(this.aimAngleChangeAmount>0?(this.aimAngle+=.01,this.aimAngleChangeAmount-=1):this.aimAngleChangeAmount<0?(this.aimAngle-=.01,this.aimAngleChangeAmount+=1):this.aimAngleChangeAmount=this.getAngleChangeAmount())},i}(_),Y=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),X=function(t){function i(i,e,s,n,o){var a=this,r=[new v(0,0,0,0,0,!0,o)],h=new C;return(a=t.call(this,i,new L,e,s,0,30,0,"#5784ba",n,r,[],h,o)||this).minTimeBetweenShotsMS=5e3,a.canTakeShot=!0,a}return Y(i,t),i.prototype.updatePosition=function(t){},i.prototype.shoot=function(){var t=this;if(this.canTakeShot&&!this.isDestroyed){var i=this.ammunition.findIndex((function(t){return t.isDestroyed}));-1!==i&&(this.ammunition[i]=new v(this.xPos+this.size/2,this.yPos+this.size/2,this.aimAngle,this.canvasWidth,this.canvasHeight,!1,this.audioManager),this.canTakeShot=!1,setTimeout((function(){t.canTakeShot=!0}),this.minTimeBetweenShotsMS))}},i.prototype.aim=function(t,i,e){if(!this.isDestroyed){var s=e.xPos+e.size/2-this.xPos-this.tankMidpoint,n=e.yPos+e.size/2-this.yPos-this.tankMidpoint,o=Math.atan2(n,s);o<0&&(o+=2*Math.PI),this.aimAngle=o}},i}(_),V=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),K=function(t){function i(i,e,s,n,o,a,r,h){var c=this;return(c=t.call(this,i,new L,e,s,2.2,30,5,"pink",n,o,a,r,h)||this).minTimeBetweenShotsMS=1e3,c.timeBetweenShotsIsElapsed=!0,c.minTimeBetweenBombPlantsMS=1e3,c.timeBetweenPlantsIsElapsed=!0,c}return V(i,t),i.prototype.plantBomb=function(t){var i=this;if(this.timeBetweenPlantsIsElapsed&&!this.isDestroyed){var e=this.bombs.findIndex((function(t){return t.isDestroyed}));if(-1!==e)this.bombs[e].xPos=this.xPos+this.size/2,this.bombs[e].yPos=this.yPos+this.size/2,this.bombs[e].isPointInsideBlastRadius(t.xPos+t.tankMidpoint,t.yPos+t.tankMidpoint)&&(this.bombs[e].isDestroyed=!1,this.bombs[e].setFuse(),this.timeBetweenPlantsIsElapsed=!1,setTimeout((function(){i.timeBetweenPlantsIsElapsed=!0}),this.minTimeBetweenBombPlantsMS))}},i.prototype.shoot=function(t){var i=this;if(this.timeBetweenShotsIsElapsed&&!this.isDestroyed){var e=this.ammunition.findIndex((function(t){return t.isDestroyed}));if(-1!==e)this.ammunition[e].reload(this.xPos+this.size/2,this.yPos+this.size/2,this.aimAngle,!0,this.canvasWidth,this.canvasHeight),this.ammunition[e].willHitPlayerTank(this.obstacleCanvas,t)&&(this.ammunition[e].isDestroyed=!1,this.timeBetweenShotsIsElapsed=!1,setTimeout((function(){i.timeBetweenShotsIsElapsed=!0}),this.minTimeBetweenShotsMS))}},i.prototype.aim=function(t,i,e){if(!this.isDestroyed){var s=e.xPos+e.size/2-this.xPos-this.tankMidpoint,n=e.yPos+e.size/2-this.yPos-this.tankMidpoint,o=Math.atan2(n,s);o<0&&(o+=2*Math.PI),this.aimAngle=o}},i}(_),q=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),J=function(){function t(t,i){this.canvasWidth=1e3,this.canvasHeight=500,this.obstacleCanvas=t,this.gameCanvas=new k("#game-canvas",this.canvasWidth,this.canvasHeight,t),this.audioManager=i}return t.prototype.stop=function(){this.gameCanvas.stop()},t.prototype.start=function(){this.gameCanvas.start()},t}(),Q=function(t){function i(i){var e=this,s=new E(300,200,40,100),n=new D("#obstacle-canvas",1e3,500,[s]);e=t.call(this,n,i)||this;var o=new X(e.gameCanvas.gameRenderer.canvas,900,240,n,i);e.gameCanvas.addEnemyTank(o);var a=new H(e.gameCanvas.gameRenderer.canvas,100,250,n,i);return e.gameCanvas.addPlayerTank(a),e}return q(i,t),i}(J),Z=function(t){function i(i){var e=this,s=new E(300,200,40,100),n=new D("#obstacle-canvas",1e3,500,[s]);e=t.call(this,n,i)||this;var o=new X(e.gameCanvas.gameRenderer.canvas,800,100,n,i),a=new X(e.gameCanvas.gameRenderer.canvas,900,240,n,i),r=new X(e.gameCanvas.gameRenderer.canvas,800,400,n,i);e.gameCanvas.addEnemyTank(o),e.gameCanvas.addEnemyTank(a),e.gameCanvas.addEnemyTank(r);var h=new H(e.gameCanvas.gameRenderer.canvas,100,250,n,i);return e.gameCanvas.addPlayerTank(h),e}return q(i,t),i}(J),$=function(t){function i(i){var e=this,s=new E(100,100,200,100),n=new E(550,200,30,200),o=new D("#obstacle-canvas",1e3,500,[s,n]);e=t.call(this,o,i)||this;var a=[new m(0,0,0,0,0,!0,i)],r=new U(e.gameCanvas.gameRenderer.canvas,800,300,o,a,i);e.gameCanvas.addEnemyTank(r);var h=new H(e.gameCanvas.gameRenderer.canvas,200,250,o,i);return e.gameCanvas.addPlayerTank(h),e}return q(i,t),i}(J),tt=function(t){function i(i){var e=this,s=new E(250,100,600,40),n=new E(100,350,600,40),o=new D("#obstacle-canvas",1e3,500,[s,n]);e=t.call(this,o,i)||this;var a=[new v(0,0,0,0,0,!0,i)],r=new C(e.gameCanvas,e.obstacleCanvas,!1),h=new j(e.gameCanvas.gameRenderer.canvas,900,50,o,a,[],r,i);e.gameCanvas.addEnemyTank(h);var c=new H(e.gameCanvas.gameRenderer.canvas,50,450,o,i);return e.gameCanvas.addPlayerTank(c),e}return q(i,t),i}(J),it=function(t){function i(i){var e=this,s=new E(100,100,200,100),n=new E(700,100,30,100),o=new E(700,350,30,100),a=new D("#obstacle-canvas",1e3,500,[s,n,o]);e=t.call(this,a,i)||this;var r=[new v(0,0,0,0,0,!0,i)],h=[new m(0,0,0,0,0,!0,i)],c=new C(e.gameCanvas,e.obstacleCanvas,!1),u=new j(e.gameCanvas.gameRenderer.canvas,800,300,a,r,[],c,i),l=new U(e.gameCanvas.gameRenderer.canvas,800,100,a,h,i),d=new X(e.gameCanvas.gameRenderer.canvas,800,200,a,i);e.gameCanvas.addEnemyTank(u),e.gameCanvas.addEnemyTank(l),e.gameCanvas.addEnemyTank(d);var f=new H(e.gameCanvas.gameRenderer.canvas,200,250,a,i);return e.gameCanvas.addPlayerTank(f),e}return q(i,t),i}(J),et=function(t){function i(i){var e=this,s=new E(100,100,200,100),n=new E(700,100,30,300),o=new D("#obstacle-canvas",1e3,500,[s,n]);e=t.call(this,o,i)||this;var a=[new b(0,0,!0,i),new b(0,0,!0,i),new b(0,0,!0,i)],r=[new b(0,0,!0,i),new b(0,0,!0,i),new b(0,0,!0,i)],h=[new b(0,0,!0,i),new b(0,0,!0,i),new b(0,0,!0,i)],c=new C(e.gameCanvas,e.obstacleCanvas,!1),u=new C(e.gameCanvas,e.obstacleCanvas,!1),l=new C(e.gameCanvas,e.obstacleCanvas,!1),d=new N(e.gameCanvas.gameRenderer.canvas,800,100,o,[new v(0,0,0,0,0,!0,i)],a,c,i),f=new N(e.gameCanvas.gameRenderer.canvas,800,200,o,[new v(0,0,0,0,0,!0,i)],r,u,i),p=new N(e.gameCanvas.gameRenderer.canvas,800,300,o,[new v(0,0,0,0,0,!0,i)],h,l,i);e.gameCanvas.addEnemyTank(d),e.gameCanvas.addEnemyTank(f),e.gameCanvas.addEnemyTank(p);var y=new H(e.gameCanvas.gameRenderer.canvas,200,250,o,i);return e.gameCanvas.addPlayerTank(y),e}return q(i,t),i}(J),st=function(t){function i(i){var e=this,s=new E(700,100,30,300),n=new D("#obstacle-canvas",1e3,500,[s]);e=t.call(this,n,i)||this;var o=[new m(0,0,0,0,0,!0,i),new m(0,0,0,0,0,!0,i),new m(0,0,0,0,0,!0,i),new m(0,0,0,0,0,!0,i),new m(0,0,0,0,0,!0,i)],a=[new m(0,0,0,0,0,!0,i),new m(0,0,0,0,0,!0,i),new m(0,0,0,0,0,!0,i),new m(0,0,0,0,0,!0,i),new m(0,0,0,0,0,!0,i)],r=[new m(0,0,0,0,0,!0,i),new m(0,0,0,0,0,!0,i),new m(0,0,0,0,0,!0,i),new m(0,0,0,0,0,!0,i),new m(0,0,0,0,0,!0,i)],h=[new T(0,0,!0,i),new T(0,0,!0,i),new T(0,0,!0,i),new T(0,0,!0,i),new T(0,0,!0,i)],c=[new T(0,0,!0,i),new T(0,0,!0,i),new T(0,0,!0,i),new T(0,0,!0,i),new T(0,0,!0,i)],u=[new T(0,0,!0,i),new T(0,0,!0,i),new T(0,0,!0,i),new T(0,0,!0,i),new T(0,0,!0,i)],l=new C(e.gameCanvas,e.obstacleCanvas,!1),d=new C(e.gameCanvas,e.obstacleCanvas,!1),f=new C(e.gameCanvas,e.obstacleCanvas,!1),p=new K(e.gameCanvas.gameRenderer.canvas,800,100,n,o,h,l,i),y=new K(e.gameCanvas.gameRenderer.canvas,800,200,n,a,c,d,i),v=new K(e.gameCanvas.gameRenderer.canvas,800,300,n,r,u,f,i);e.gameCanvas.addEnemyTank(p),e.gameCanvas.addEnemyTank(y),e.gameCanvas.addEnemyTank(v);var g=new H(e.gameCanvas.gameRenderer.canvas,200,250,n,i);return e.gameCanvas.addPlayerTank(g),e}return q(i,t),i}(J);new(function(){function t(t){var i=this;this.sliderWidth=Math.min(.8*window.innerWidth,600),this.levels=t,this.audioManager=new d,this.audioManager.loadAllAudio().then((function(){i.audioManager.playBackgroundMusic()})),this.activeLevelNumber=1,this.activeLevel=new Q(this.audioManager),this.setHeader(),this.createSlider(),this.createJumbotron()}return t.prototype.setHeader=function(){var t=document.getElementById("main-header");t&&(t.textContent="Treads V".concat(n))},t.prototype.startActiveLevel=function(){switch(this.activeLevel.stop(),this.activeLevelNumber){case 1:default:this.activeLevel=new Q(this.audioManager);break;case 2:this.activeLevel=new Z(this.audioManager);break;case 3:this.activeLevel=new $(this.audioManager);break;case 4:this.activeLevel=new tt(this.audioManager);break;case 5:this.activeLevel=new it(this.audioManager);break;case 6:this.activeLevel=new et(this.audioManager);break;case 7:this.activeLevel=new st(this.audioManager)}this.activeLevel.start()},t.prototype.createSlider=function(){var t=this,i=10,e=10,n=this.sliderWidth-e-i,o=s.m4Y().domain([1,this.levels]).range([0,n]).clamp(!0),a=s.Ltv("#slider").append("svg").attr("width",this.sliderWidth).attr("height",50).append("g").attr("transform","translate(".concat(e,", 30)"));a.append("g").call(s.l78(o).ticks(this.levels).tickFormat(s.GPZ("1")));var r=a.append("circle").attr("cx",o(this.activeLevelNumber)).attr("cy",-10).attr("r",10).style("fill","red").style("cursor","ew-resize"),h=s.$Er().on("drag",(function(i){var s=i.x-e,n=Math.round(o.invert(s));r.attr("cx",o(n)),t.updateActiveLevel(n)}));r.call(h)},t.prototype.createJumbotron=function(){for(var t=this,i=s.Ltv("#jumbotron"),e=s.m4Y().domain([1,this.levels]).range(["lightblue","lightcoral"]),n=function(s){var n=i.append("div").attr("class","jumbotron-box inactive").on("click",(function(){return t.updateActiveLevel(s)})).append("svg").attr("width","100%").attr("height","100%");n.append("rect").attr("width","100%").attr("height","100%").attr("fill",e(s)),n.append("text").attr("x","50%").attr("y","50%").attr("dominant-baseline","middle").attr("text-anchor","middle").text("Level ".concat(s))},o=1;o<=this.levels;o++)n(o);this.updateActiveLevel(this.activeLevelNumber)},t.prototype.updateActiveLevel=function(t){this.activeLevelNumber=t,s.Ubm(".jumbotron-box").classed("active",(function(i,e){return e+1===t})).classed("inactive",(function(i,e){return e+1!==t})),s.Ltv("circle").attr("cx",s.m4Y().domain([1,this.levels]).range([0,this.sliderWidth-20])(t)),this.startActiveLevel()},t}())(7).startActiveLevel()}},t=>{t.O(0,[96],(()=>{return i=113,t(t.s=i);var i}));t.O()}]);
//# sourceMappingURL=main.7ecf1edb214ae80a2d57.bundle.js.map